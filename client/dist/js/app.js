(function(e){function t(t){for(var s,r,o=t[0],l=t[1],c=t[2],d=0,m=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&m.push(i[r][0]),i[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);u&&u(t);while(m.length)m.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],s=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(s=!1)}s&&(n.splice(t--,1),e=r(r.s=a[0]))}return e}var s={},i={app:0},n=[];function r(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=s,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(a,s,function(t){return e[t]}.bind(null,s));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/webclient/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"02d6":function(e,t,a){"use strict";var s=a("5bf9"),i=a.n(s);i.a},"09db":function(e,t,a){},"0b5f":function(e,t,a){"use strict";var s=a("8a72"),i=a.n(s);i.a},"0e0d":function(e,t,a){"use strict";var s=a("de23"),i=a.n(s);i.a},"0e51":function(e,t,a){},"0fc2":function(e,t,a){"use strict";var s=a("15ed"),i=a.n(s);i.a},"15ed":function(e,t,a){},1669:function(e,t,a){"use strict";var s=a("6e2a"),i=a.n(s);i.a},"19d4":function(e,t,a){"use strict";var s=a("9041"),i=a.n(s);i.a},"1afd":function(e,t,a){},"1e1d":function(e,t,a){},"1eb7":function(e,t,a){},"235b":function(e,t,a){"use strict";var s=a("6c54"),i=a.n(s);i.a},2475:function(e,t,a){},"268d":function(e,t,a){"use strict";var s=a("756f"),i=a.n(s);i.a},"2b93":function(e,t,a){},3010:function(e,t,a){},"313d":function(e,t,a){"use strict";var s=a("dbf0"),i=a.n(s);i.a},"33ac":function(e,t,a){"use strict";var s=a("f0f3"),i=a.n(s);i.a},3678:function(e,t,a){"use strict";var s=a("4310"),i=a.n(s);i.a},"3bec":function(e,t,a){"use strict";var s=a("e517"),i=a.n(s);i.a},"3cc7":function(e,t,a){"use strict";var s=a("88fc"),i=a.n(s);i.a},"3cfd":function(e,t,a){"use strict";var s=a("6ead"),i=a.n(s);i.a},"3ebb":function(e,t,a){},"3ed7":function(e,t,a){"use strict";var s=a("2b93"),i=a.n(s);i.a},4179:function(e,t,a){e.exports=a.p+"img/logo.svg"},"42f0":function(e,t,a){},4310:function(e,t,a){},"43fc":function(e,t,a){},4678:function(e,t,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(e){var t=n(e);return a(t)}function n(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}i.keys=function(){return Object.keys(s)},i.resolve=n,e.exports=i,i.id="4678"},4863:function(e,t,a){"use strict";var s=a("5424"),i=a.n(s);i.a},"4a4d":function(e,t,a){"use strict";var s=a("ebe1"),i=a.n(s);i.a},"4b04":function(e,t,a){"use strict";var s=a("3ebb"),i=a.n(s);i.a},"4d37":function(e,t,a){},"4def":function(e,t,a){"use strict";var s=a("9264"),i=a.n(s);i.a},"50b8":function(e,t,a){"use strict";var s=a("fbc1"),i=a.n(s);i.a},"517e":function(e,t,a){},"52dc":function(e,t,a){"use strict";var s=a("517e"),i=a.n(s);i.a},5321:function(e,t,a){},"53c4":function(e,t,a){},5424:function(e,t,a){},"55e1":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("4160"),a("b64b"),a("159b"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("a026"),i=a("c1df"),n=a.n(i),r=a("f2f3"),o=a("e94a"),l=a.n(o),c=a("e37d"),u=a("9ebe"),d=a("9b3e"),m=a.n(d),p="http://robert.local";window.__SERVER_CONFIG__&&window.__SERVER_CONFIG__.baseUrl&&(p=window.__SERVER_CONFIG__.baseUrl);var f={baseUrl:p,api:{url:"".concat(p,"/api"),headers:{Accept:"application/json"},version:"_dev mode_"},defaultLang:"fr",currency:{symbol:"€",name:"Euro",iso:"EUR",symbol_intl:"€",decimal_digits:2,rounding:0},defaultPaginationLimit:100,beneficiaryTagName:"Bénéficiaire",technicianTagName:"Technicien",billingMode:"partial",degressiveRate:function(e){return.75*(e-1)+1}},h=window.__SERVER_CONFIG__||f,_=m()(h),v=(a("d3b7"),a("5530")),g=a("bc3a"),b=a.n(g),y=(a("ac1f"),a("5319"),a("caad"),a("45fc"),a("b0c0"),a("2532"),a("8c4f")),C=a("2f62"),$=a("0e44"),w=(a("4de4"),a("a15b"),a("d81d"),a("466d"),a("1276"),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["name"],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e||0===e.length)return[{value:"",label:"N/A"}];var s=e.map((function(e){var a=t.map((function(t){if(t.match(/\.+/)){var a=e;return t.split(".").forEach((function(e){a=a&&Object.keys(a).includes(e)?a[e]:null})),a}return Object.keys(e).includes(t)?e[t]:t})),s=a.filter((function(e){return!!e})).join(" ");return{value:e.id,label:s}}));return a&&s.unshift({value:"",label:a}),s}),k=w,E={namespaced:!0,state:{list:[],isFetched:!1,error:null},getters:{options:function(e,t,a){var s=a.i18n,i=s.locale,n=s.translations,r=n[i]["please-choose"];return k(e.list,["name"],r)}},mutations:{init:function(e,t){e.list=t,e.isFetched=!0,e.error=null},setError:function(e,t){e.error=t}},actions:{fetch:function(e){var t=e.state,a=e.commit;t.isFetched||Zn.get("countries").then((function(e){var t=e.data;a("init",t.data)})).catch((function(e){a("setError",e)}))}}},T=(a("7db0"),{namespaced:!0,state:{list:[],isFetched:!1,error:null},getters:{options:function(e,t,a){var s=a.i18n,i=s.locale,n=s.translations,r=n[i]["please-choose"];return k(e.list,["name"],r)},parkName:function(e){return function(t){var a=e.list.find((function(e){return e.id===t}));return a?a.name:null}}},mutations:{init:function(e,t){e.list=t,e.isFetched=!0,e.error=null},setError:function(e,t){e.error=t}},actions:{fetch:function(e){var t=e.state,a=e.commit;t.isFetched||Zn.get("parks").then((function(e){var t=e.data;a("init",t.data)})).catch((function(e){a("setError",e)}))},refresh:function(e){var t=e.state,a=e.commit;t.isFetched=!1,Zn.get("parks").then((function(e){var t=e.data;a("init",t.data)})).catch((function(e){a("setError",e)}))}}}),j={namespaced:!0,state:{list:[],isFetched:!1,error:null},getters:{options:function(e,t,a){var s=a.i18n,i=s.locale,n=s.translations,r=n[i]["please-choose"];return k(e.list,["name"],r)},categoryName:function(e){return function(t){var a=e.list.find((function(e){return e.id===t}));return a?a.name:null}},subCategoryName:function(e){return function(t){var a=null;return e.list.forEach((function(e){if(!a){var s=e.sub_categories.find((function(e){return e.id===t}));a=s?s.name:null}})),a}}},mutations:{init:function(e,t){e.list=t,e.isFetched=!0,e.error=null},setError:function(e,t){e.error=t}},actions:{fetch:function(e){var t=e.state,a=e.commit;t.isFetched||Zn.get("categories").then((function(e){var t=e.data;a("init",t.data)})).catch((function(e){a("setError",e)}))},refresh:function(e){var t=e.state,a=e.commit;t.isFetched=!1,Zn.get("categories").then((function(e){var t=e.data;a("init",t.data)})).catch((function(e){a("setError",e)}))}}},D={namespaced:!0,state:{list:[],isFetched:!1,error:null},getters:{options:function(e,t,a){var s=a.i18n,i=s.locale,n=s.translations,r=n[i]["please-choose"];return k(e.list,["legal_name"],r)}},mutations:{init:function(e,t){e.list=t,e.isFetched=!0,e.error=null},setError:function(e,t){e.error=t}},actions:{fetch:function(e){var t=e.state,a=e.commit;t.isFetched||Zn.get("companies").then((function(e){var t=e.data;a("init",t.data)})).catch((function(e){a("setError",e)}))},refresh:function(e){var t=e.state,a=e.commit;t.isFetched=!1,Zn.get("companies").then((function(e){var t=e.data;a("init",t.data)})).catch((function(e){a("setError",e)}))}}},M={namespaced:!0,state:{list:[],isFetched:!1,error:null,protected:[_.beneficiaryTagName.toLowerCase(),_.technicianTagName.toLowerCase()]},getters:{options:function(e,t){return k(e.list.filter((function(e){return!t.isProtected(e.name)})),["name"])},isProtected:function(e){return function(t){return e.protected.includes(t.toLowerCase())}},tagName:function(e){return function(t){var a=e.list.find((function(e){return e.id===t}));return a?a.name:null}}},mutations:{init:function(e,t){e.list=t,e.isFetched=!0,e.error=null},setError:function(e,t){e.error=t}},actions:{fetch:function(e){var t=e.state,a=e.commit;t.isFetched||Zn.get("tags").then((function(e){var t=e.data;a("init",t.data)})).catch((function(e){a("setError",e)}))},refresh:function(e){var t=e.state,a=e.commit;t.isFetched=!1,Zn.get("tags").then((function(e){var t=e.data;a("init",t.data)})).catch((function(e){a("setError",e)}))}}},F=(a("99af"),{namespaced:!0,state:{id:null,groupId:null,firstName:"",lastName:"",pseudo:"",email:"",locale:""},mutations:{init:function(e,t){e.id=t.id,e.groupId=t.group_id,e.firstName=t.first_name,e.lastName=t.last_name,e.pseudo=t.pseudo,e.email=t.email,e.locale=t.settings?t.settings.language:"en"},setLocale:function(e,t){e.locale=t},setInfos:function(e,t){e.firstName=t.first_name,e.lastName=t.last_name,e.pseudo=t.pseudo,e.email=t.email},reset:function(e){e.id=null,e.groupId=null,e.firstName="",e.lastName="",e.pseudo="",e.email=""}},getters:{fullName:function(e){return"".concat(e.lastName," ").concat(e.firstName)}},actions:{}});s["a"].use(C["a"]);var S=new C["a"].Store({namepaced:!0,state:{pageTitle:"",pageSubTitle:""},mutations:{setPageTitle:function(e,t){e.pageTitle=t},setPageSubTitle:function(e,t){e.pageSubTitle=t}},modules:{countries:E,parks:T,categories:j,companies:D,tags:M,user:F},plugins:[Object($["a"])({strict:!1,storage:window.sessionStorage,key:"persistantData",paths:["user"]})]}),x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[a("div",{staticClass:"login__logo"},[a("Logo")],1),a("div",{staticClass:"login__message",class:"login__message--"+e.message.type},[e.message.isLoading?a("i",{staticClass:"fa fa-circle-o-notch fa-spin"}):e._e(),e._v(" "+e._s(e.message.text)+" ")]),a("form",{staticClass:"login__form login-form",on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.credentials.identifier,expression:"credentials.identifier"}],staticClass:"login-form__input",attrs:{type:"text",placeholder:e.$t("email-address-or-pseudo")},domProps:{value:e.credentials.identifier},on:{input:function(t){t.target.composing||e.$set(e.credentials,"identifier",t.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.credentials.password,expression:"credentials.password"}],staticClass:"login-form__input",attrs:{type:"password",placeholder:e.$t("password")},domProps:{value:e.credentials.password},on:{input:function(t){t.target.composing||e.$set(e.credentials,"password",t.target.value)}}}),a("button",{staticClass:"login-form__submit info",attrs:{type:"submit"}},[a("i",{staticClass:"fa fa-user-alt"}),e._v(" "+e._s(e.$t("page-login.connexion"))+" ")])]),a("div",{staticClass:"login__footer"},[e._v(" "+e._s(e.$t("page-login.footer"))),a("br"),e._v(" | "),a("a",{attrs:{href:"http://robertmanager.org",target:"_blank"}},[e._v(e._s(e.$t("page-login.official-website")))]),e._v(" | "),a("a",{attrs:{href:"http://forum.robertmanager.org",target:"_blank"}},[e._v(e._s(e.$t("page-login.community-forum")))]),e._v(" | "),a("a",{attrs:{href:"https://github.com/robert-2/Robert2",target:"_blank"}},[e._v("Github project")]),e._v(" | v"+e._s(e.apiVersion)+" ")])])},L=[],O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("img",{attrs:{src:e.src,alt:"Robert²"}})},q=[],A=a("bf6b"),N=a.n(A),P=a("4179"),I=a.n(P),B={name:"Logo",props:{minimalist:Boolean},computed:{src:function(){return this.minimalist?N.a:I.a}}},R=B,H=a("2877"),z=Object(H["a"])(R,O,q,!1,null,null,null),U=z.exports,V={name:"Login",components:{Logo:U},data:function(){var e="default",t=this.$t("page-login.welcome"),a=this.$route.hash;switch(a){case"#bye":e="success",t=this.$t("page-login.bye");break;case"#expired":e="error",t=this.$t("page-login.error.expired-session");break;case"#restricted":e="error",t=this.$t("page-login.error.not-allowed");break;default:break}return{message:{type:e,text:t,isLoading:!1},credentials:{identifier:"",password:""},apiVersion:_.api.version}},methods:{login:function(){this.message={type:"default",text:this.$t("page-login.please-wait"),isLoading:!0},Kn.login(this,this.credentials)},errorMessage:function(e){var t=this.$t("errors.api-unreachable");404===e.code&&(t=this.$t("page-login.error.bad-infos")),this.message={type:"error",text:t,isLoading:!1}}}},Q=V,G=(a("4b04"),Object(H["a"])(Q,x,L,!1,null,null,null)),Y=G.exports,W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"content__main-view UserProfile",class:{"UserProfile--password-edit":e.isPasswordEdit}},[a("h3",{staticClass:"UserProfile__title"},[e._v(" "+e._s(e.$t("page-profile.you-are-group",{group:e.$t(e.groupId)}))+" ")]),a("div",{staticClass:"UserProfile__content"},[a("form",{staticClass:"Form",attrs:{method:"POST"},on:{submit:e.saveUser}},[a("section",{staticClass:"Form__fieldset"},[a("h4",{staticClass:"Form__fieldset__title"},[e._v(" "+e._s(e.$t("connexion-infos"))+" ")]),a("FormField",{attrs:{name:"pseudo",label:"pseudo",required:"",errors:e.errors.pseudo},model:{value:e.user.pseudo,callback:function(t){e.$set(e.user,"pseudo",t)},expression:"user.pseudo"}}),a("FormField",{attrs:{name:"email",label:"email",type:"email",required:"",errors:e.errors.email},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),e.isPasswordEdit?e._e():a("a",{staticClass:"UserProfile__password-edit-toggle",attrs:{role:"button"},on:{click:e.togglePasswordEdit}},[e._v(" "+e._s(e.$t("page-profile.edit-password"))+" ")]),a("section",{staticClass:"Form__fieldset UserProfile__section-password"},[a("h4",{staticClass:"Form__fieldset__title"},[a("a",{staticClass:"UserProfile__password-edit-cancel",attrs:{role:"button"},on:{click:e.togglePasswordEdit}},[e._v(" "+e._s(e.$t("cancel"))+" ")]),e._v(" "+e._s(e.$t("page-profile.edit-password"))+" ")]),a("FormField",{attrs:{name:"password",label:"password",type:"password",errors:e.errors.password},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),a("FormField",{attrs:{name:"passwordConfirmation",label:"page-profile.password-confirmation",type:"password"},model:{value:e.user.password_confirmation,callback:function(t){e.$set(e.user,"password_confirmation",t)},expression:"user.password_confirmation"}})],1),a("section",{staticClass:"Form__fieldset UserProfile__section-infos"},[a("h4",{staticClass:"Form__fieldset__title"},[e._v(" "+e._s(e.$t("personnal-infos"))+" ")]),a("FormField",{attrs:{name:"first_name",label:"first-name",errors:e.errors.first_name},model:{value:e.user.person.first_name,callback:function(t){e.$set(e.user.person,"first_name",t)},expression:"user.person.first_name"}}),a("FormField",{attrs:{name:"last_name",label:"last-name",errors:e.errors.last_name},model:{value:e.user.person.last_name,callback:function(t){e.$set(e.user.person,"last_name",t)},expression:"user.person.last_name"}}),a("FormField",{attrs:{name:"nickname",label:"nickname",errors:e.errors.nickname},model:{value:e.user.person.nickname,callback:function(t){e.$set(e.user.person,"nickname",t)},expression:"user.person.nickname"}}),a("FormField",{attrs:{name:"phone",label:"phone",type:"tel",errors:e.errors.phone},model:{value:e.user.person.phone,callback:function(t){e.$set(e.user.person,"phone",t)},expression:"user.person.phone"}}),a("FormField",{attrs:{name:"street",label:"street",errors:e.errors.street},model:{value:e.user.person.street,callback:function(t){e.$set(e.user.person,"street",t)},expression:"user.person.street"}}),a("FormField",{staticClass:"UserProfile__postal-code",attrs:{name:"postal_code",label:"postal-code",errors:e.errors.postal_code},model:{value:e.user.person.postal_code,callback:function(t){e.$set(e.user.person,"postal_code",t)},expression:"user.person.postal_code"}}),a("FormField",{attrs:{name:"locality",label:"city",errors:e.errors.locality},model:{value:e.user.person.locality,callback:function(t){e.$set(e.user.person,"locality",t)},expression:"user.person.locality"}})],1),a("section",{staticClass:"Form__actions"},[a("button",{staticClass:"Form__actions__save success",attrs:{type:"submit"}},[e._v(" "+e._s(e.$t("save"))+" ")])])]),a("div",{staticClass:"UserProfile__extras"},[a("Help",{attrs:{message:e.help,error:e.error,isLoading:e.isLoading}}),a("div",{staticClass:"UserProfile__extras__buttons"},[a("router-link",{staticClass:"info",attrs:{to:"/settings",tag:"button"}},[a("i",{staticClass:"fas fa-cogs"}),e._v(" "+e._s(e.$t("your-settings"))+" ")])],1)],1)])])])},J=[],K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Help",class:"Help--"+e.modifier},[e.isLoading?a("div",{staticClass:"Help__loading"},[a("i",{staticClass:"fas fa-circle-notch fa-spin"}),e._v(" "+e._s(e.$t("help-loading"))+" ")]):e._e(),!e.isLoading&&e.error?a("div",{staticClass:"Help__error"},[a("i",{staticClass:"fas fa-exclamation-triangle"}),e._v(" "+e._s(e.errorData.message)+" "),500===e.errorData.code?a("p",[a("a",{staticClass:"Help__error-details-button",on:{click:e.displayErrorDetails}},[a("i",{staticClass:"fas fa-external-link-alt"}),e._v(" "+e._s(e.$t("errors.show-details"))+" ")])]):e._e()]):e._e(),!e.$t(e.messageText)||e.error||e.isLoading?e._e():a("div",{staticClass:"Help__message"},["success"===e.modifier?a("i",{staticClass:"fas fa-check"}):e._e(),"info"===e.modifier?a("i",{staticClass:"fas fa-info-circle"}):e._e(),e._v(" "+e._s(e.$t(e.messageText))+" ")])])},X=[],Z={width:900,height:"auto",minHeight:300,adaptive:!0,draggable:!1,name:"defaultModal"},ee=Z,te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ErrorDetails"},[a("div",{staticClass:"ErrorDetails__header"},[a("h2",{staticClass:"ErrorDetails__title"},[e._v(" "+e._s(e.$t("errors.details-title"))+" ")]),a("button",{staticClass:"ErrorDetails__btn-close",on:{click:function(t){return e.$emit("close")}}},[a("i",{staticClass:"fas fa-times"})])]),a("div",{staticClass:"ErrorDetails__main"},[a("p",[e._v(" "+e._s(e.$t("errors.details-intro1"))+" "+e._s(e.$t("errors.details-intro2"))+" "),a("a",{attrs:{href:"https://forum.robertmanager.org",target:"_blank"}},[e._v(" "+e._s(e.$t("errors.details-intro-forum"))+" ")]),e._v(" "+e._s(e.$t("errors.details-intro3"))+" "),a("a",{attrs:{href:"https://gitlab.com/robertmanager/Robert2-API/-/issues",target:"_blank"}},[e._v("GitLab")]),e._v(". ")]),e.data.requested?e._e():a("p",{staticClass:"ErrorDetails__no-details-info"},[a("i",{staticClass:"fas fa-info-circle"}),e._v(" "+e._s(e.$t("errors.details-intro-not-detailed"))+" ")]),a("hr"),a("div",{ref:"errorContent",staticClass:"ErrorDetails__content"},[e.data.requested?a("div",[a("h3",{staticClass:"ErrorDetails__subtitle"},[e._v(" #### "+e._s(e.$t("errors.details-request"))+" ")]),a("p",{staticClass:"ErrorDetails__request"},[e._v(" `"+e._s(e.data.requested)+"` ")])]):e._e(),a("h3",{staticClass:"ErrorDetails__subtitle"},[e._v(" #### "+e._s(e.$t("errors.details-message"))+" ("),a("span",{staticClass:"ErrorDetails__code"},[e._v(e._s(e.data.code))]),e._v(") : ")]),a("p",{staticClass:"ErrorDetails__message"},[e._v(" `"+e._s(e.data.message)+"` ")]),e.file.length>0?a("div",[a("h3",{staticClass:"ErrorDetails__subtitle"},[e._v(" #### "+e._s(e.$t("errors.details-file"))+" ")]),a("p",{staticClass:"ErrorDetails__file"},[e._v(" `"+e._s(e.file)+"` ")])]):e._e(),e.trace.length>0?a("div",[a("h3",{staticClass:"ErrorDetails__subtitle"},[e._v(" #### "+e._s(e.$t("errors.details-stacktrace"))+" ")]),a("div",{staticClass:"ErrorDetails__trace"},[e._v(" >! Details"),a("br"),e._v(" ```log"),a("br"),e._l(e.trace,(function(t,s){return a("div",{key:s,staticClass:"ErrorDetails__traceItem"},[a("span",{staticClass:"ErrorDetails__traceItem__index"},[e._v("- "+e._s(s)+": ")]),a("span",{staticClass:"ErrorDetails__traceItem__info"},[t.class?a("span",[e._v(e._s(t.class)+"::")]):e._e(),e._v(e._s(t.function)+" "),a("br")]),t.file?a("span",{staticClass:"ErrorDetails__traceItem__info"},[e._v(" File: "+e._s(t.file)+", line "+e._s(t.line)+" ")]):e._e()])})),e._v(" ``` ")],2)]):e._e()]),a("hr"),a("div",{staticClass:"ErrorDetails__footer"},[e.isCopied?a("p",{staticClass:"ErrorDetails__is-copied"},[a("i",{staticClass:"fas fa-check"}),e._v(" "+e._s(e.$t("copied-in-clipboard"))+" ")]):e._e(),a("button",{staticClass:"info",on:{click:e.copyErrorContent}},[a("i",{staticClass:"fas fa-clipboard"}),e._v(" "+e._s(e.$t("copy-to-clipboard"))+" ")]),a("button",{on:{click:function(t){return e.$emit("close")}}},[a("i",{staticClass:"fas fa-times"}),e._v(" "+e._s(e.$t("close"))+" ")])])])])},ae=[],se=function(e){if(!e)return"";var t=e.split("/src/");return t.length>0?"src/".concat(t[1]):e},ie={name:"ErrorDetails",props:["data"],data:function(){return{isCopied:!1}},computed:{file:function(){return se(this.data.file)},trace:function(){return this.data.stackTrace?this.data.stackTrace.map((function(e){var t=e.file;return Object(v["a"])(Object(v["a"])({},e),{},{file:se(t)})})):[]}},methods:{copyErrorContent:function(){var e=document.createRange();e.selectNode(this.$refs.errorContent),window.getSelection().removeAllRanges(),window.getSelection().addRange(e),document.execCommand("copy"),this.isCopied=!0,window.getSelection().removeAllRanges()}}},ne=ie,re=(a("8633a"),Object(H["a"])(ne,te,ae,!1,null,null,null)),oe=re.exports,le={name:"Help",props:{message:{required:!0,default:""},error:{type:Error,default:null},isLoading:{type:Boolean,default:!1}},data:function(){return{errorDetailsModalOpened:!1}},computed:{modifier:function(){return this.isLoading?"info":this.error?"error":this.message.type?this.message.type:"info"},messageText:function(){return this.message.text?this.message.text:this.message},networkError:function(){var e,t,a,s;return{code:(null===(e=this.error)||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)||0,text:(null===(a=this.error)||void 0===a||null===(s=a.response)||void 0===s?void 0:s.statusText)||this.$t("errors.api-unreachable")}},errorData:function(){var e,t;if(!(null===(e=this.error)||void 0===e?void 0:e.response))return{code:"",message:this.$t("errors.api-unreachable")};var a=this.error.response,s=a.status;if(400===s){var i,n=(null===(i=a.data)||void 0===i?void 0:i.error)||{details:{}},r=n.details;return{code:"",message:this.$t("errors.validation"),details:r}}if(409===s)return{code:"",message:this.$t("errors.already-exists")};var o={requested:"",code:500,message:"Unknown error",file:"",stackTrace:[]};return(null===(t=a.data)||void 0===t?void 0:t.error)||o}},methods:{displayErrorDetails:function(){var e=this;this.errorDetailsModalOpened||(this.errorDetailsModalOpened=!0,this.$modal.show(oe,{data:this.errorData},ee,{"before-close":function(){e.errorDetailsModalOpened=!1}}))}}},ce=le,ue=(a("ef5b"),Object(H["a"])(ce,K,X,!1,null,null,null)),de=ue.exports,me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"FormField",class:e.addon?"FormField--with-addon":""},[e.label?a("label",{staticClass:"FormField__label"},[e._v(" "+e._s(e.$t(e.label))+" "),e.required?a("span",{staticClass:"FormField__label__required"},[e._v("*")]):e._e()]):e._e(),["text","email","tel","password","number"].includes(e.type)?a("div",{staticClass:"FormField__input-wrapper"},[a("input",{staticClass:"FormField__input",attrs:{type:e.type,step:"number"===e.type?e.step||.01:null,min:"number"===e.type&&e.min||null,max:"number"===e.type&&e.max||null,name:e.name,autocomplete:"password"===e.type?"new-password":"off",disabled:e.disabled,placeholder:e.$t(e.placeholder)},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)},change:function(t){return e.$emit("change",t.target.value)}}}),e.addon?a("div",{staticClass:"FormField__addon"},[e._v(" "+e._s(e.addon)+" ")]):e._e()]):e._e(),"select"===e.type?a("select",{key:e.renderKey,attrs:{name:e.name,disabled:e.disabled},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)},change:function(t){return e.$emit("change",t.target.value)}}},e._l(e.options,(function(t){return a("option",{key:t.value,domProps:{value:t.value}},[e._v(" "+e._s(e.$t(t.label))+" ")])})),0):e._e(),"textarea"===e.type?a("textarea",{staticClass:"FormField__textarea",attrs:{name:e.name,disabled:e.disabled,placeholder:e.$t(e.placeholder)},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}}):e._e(),e._v(" "),"date"===e.type?a("Datepicker",{staticClass:"FormField__datepicker",attrs:{value:e.value,language:e.datepickerLang,format:e.datepickerOptions.format,"disabled-dates":e.datepickerOptions.disabled,placeholder:e.$t(e.placeholder),"input-class":"FormField__datepicker__input","monday-first":""},on:{input:e.handleDatepickerChange}}):e._e(),"switch"===e.type?a("div",{staticClass:"FormField__switch"},[a("SwitchToggle",{attrs:{value:e.value,locked:e.disabled,lockedReason:e.disabledReason},on:{input:e.handleSwitchChange}})],1):e._e(),e.errors?a("div",{staticClass:"FormField__error"},[a("span",{staticClass:"FormField__error__text"},[e._v(e._s(e.errors[0]))])]):e._e()],1)},pe=[],fe=(a("a9e3"),a("fa33")),he=a("ee9b"),_e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"SwitchToggle",class:e.classnames,on:{click:e.handleSwitch}},[e._m(0),a("div",{staticClass:"SwitchToggle__label"},[e.value?a("span",[e._v(e._s(e.$t("yes")))]):e._e(),e.value?e._e():a("span",[e._v(e._s(e.$t("no")))]),e.locked&&e.lockedReason?a("span",{staticClass:"SwitchToggle__label__locked"},[e._v(" ("+e._s(e.$t("locked"))+": "+e._s(e.lockedReason)+") ")]):e._e()])])},ve=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"SwitchToggle__slide"},[a("div",{staticClass:"SwitchToggle__button"})])}],ge={name:"SwitchToggle",props:{value:Boolean,locked:Boolean,lockedReason:String},computed:{classnames:function(){return{"SwitchToggle--enabled":this.value,"SwitchToggle--locked":this.locked}}},methods:{handleSwitch:function(){this.locked||this.$emit("input",!this.value)}}},be=ge,ye=(a("5ffb"),Object(H["a"])(be,_e,ve,!1,null,null,null)),Ce=ye.exports,$e=["text","email","password","number","tel","select","textarea","date","switch"],we={name:"FormField",components:{Datepicker:fe["a"],SwitchToggle:Ce},props:{label:String,name:String,type:{validator:function(e){return $e.includes(e)},default:"text"},required:Boolean,disabled:Boolean,disabledReason:String,placeholder:String,value:[String,Number,Date,Boolean],step:Number,min:Number,max:Number,addon:String,options:Array,errors:Array,datepickerOptions:Object},data:function(){return{datepickerLang:he[S.state.i18n.locale],renderKey:1}},watch:{options:function(){this.renderKey+=1}},methods:{handleDatepickerChange:function(e){this.$emit("input",e),this.$emit("change",{field:this.name,newDate:e})},handleSwitchChange:function(e){this.$emit("input",e),this.$emit("change",{field:this.name,newValue:e})}}},ke=we,Ee=(a("f62a"),Object(H["a"])(ke,me,pe,!1,null,null,null)),Te=Ee.exports,je={name:"UserProfile",components:{Help:de,FormField:Te},data:function(){return{help:"page-profile.help",error:null,isLoading:!1,isPasswordEdit:!1,user:{id:S.state.user.id,pseudo:S.state.user.pseudo,email:S.state.user.email,password:"",password_confirmation:"",group_id:S.state.user.groupId,person:{first_name:"",last_name:"",nickname:"",phone:"",street:"",postal_code:"",locality:""}},errors:{pseudo:null,email:null,password:null,group_id:null,person:{first_name:null,last_name:null,nickname:null,phone:null,street:null,postal_code:null,locality:null}}}},computed:{groupId:function(){return S.state.user.groupId}},mounted:function(){this.getUserData(),S.commit("setPageSubTitle",S.state.user.pseudo)},methods:{getUserData:function(){var e=this,t=S.state.user.id,a=this.$route.meta.resource;this.resetHelpLoading(),this.$http.get("".concat(a,"/").concat(t)).then((function(t){var a=t.data;e.setUserData(a),e.isLoading=!1})).catch(this.displayError)},saveUser:function(e){var t=this;e.preventDefault();var a=this.user,s=a.id,i=a.password;if(s){this.resetHelpLoading();var n=Object(v["a"])({},this.user);if(i){if(i!==this.user.password_confirmation)return this.errors.password=[this.$t("page-profile.password-confirmation-must-match")],void this.displayError(this.$t("errors.validation"));this.errors.password=null,delete n.password_confirmation,delete n.person}var r=this.$route.meta.resource;this.$http.put("".concat(r,"/").concat(s),n).then((function(e){var a=e.data,s=t.isPasswordEdit?"page-profile.password-modified":"page-profile.saved";t.help={type:"success",text:s},t.isLoading=!1,t.isPasswordEdit=!1,t.setUserData(a),S.commit("user/setInfos",a)})).catch(this.displayError)}},resetHelpLoading:function(){this.help="page-profile.help",this.error=null,this.isLoading=!0},displayError:function(e){var t,a;this.help="page-profile.help",this.error=e,this.isLoading=!1;var s=(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||{code:0,details:{}},i=s.code,n=s.details;400===i&&(this.errors=Object(v["a"])({},n))},setUserData:function(e){this.user=e,S.commit("setPageSubTitle",this.user.pseudo)},togglePasswordEdit:function(e){e.preventDefault(),this.isPasswordEdit=!this.isPasswordEdit,this.isPasswordEdit||(this.user.password="",this.user.password_confirmation="")}}},De=je,Me=(a("52dc"),Object(H["a"])(De,W,J,!1,null,null,null)),Fe=Me.exports,Se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"content__main-view UserSettings"},[a("h3",{staticClass:"UserSettings__title"},[e._v(" "+e._s(e.$t("page-settings.interface"))+" ")]),a("div",{staticClass:"UserSettings__content"},[a("form",{staticClass:"Form",attrs:{method:"POST"},on:{submit:e.saveSettings}},[a("section",{staticClass:"Form__fieldset"},[a("FormField",{attrs:{name:"language",label:"page-settings.language",type:"select",options:e.langsOptions,errors:e.errors.language},model:{value:e.settings.language,callback:function(t){e.$set(e.settings,"language",t)},expression:"settings.language"}}),a("FormField",{staticClass:"UserSettings__hours",attrs:{name:"auth_token_validity_duration",label:"page-settings.auth-token-validity-duration",type:"number",addon:e.$t("hours"),errors:e.errors.auth_token_validity_duration},model:{value:e.settings.auth_token_validity_duration,callback:function(t){e.$set(e.settings,"auth_token_validity_duration",t)},expression:"settings.auth_token_validity_duration"}})],1),a("section",{staticClass:"Form__actions"},[a("button",{staticClass:"Form__actions__save success",attrs:{type:"submit"}},[e._v(" "+e._s(e.$t("save"))+" ")])])]),a("div",{staticClass:"UserSettings__extras"},[a("Help",{attrs:{message:e.help,error:e.error,isLoading:e.isLoading}}),a("div",{staticClass:"UserSettings__extras__buttons"},[a("router-link",{staticClass:"info",attrs:{to:"/profile",tag:"button"}},[a("i",{staticClass:"fas fa-user-alt"}),e._v(" "+e._s(e.$t("your-profile"))+" ")])],1)],1)])])])},xe=[],Le={name:"UserSettings",components:{Help:de,FormField:Te},data:function(){return{help:"page-settings.help",error:null,isLoading:!1,langsOptions:[{label:"french",value:"FR"},{label:"english",value:"EN"}],settings:{language:"",auth_token_validity_duration:""},errors:{language:null,auth_token_validity_duration:null}}},mounted:function(){this.getUserSetings(),S.commit("setPageSubTitle",S.state.user.pseudo)},methods:{getUserSetings:function(){var e=this,t=S.state.user.id,a=this.$route.meta.resource;this.$http.get("".concat(a,"/").concat(t,"/settings")).then((function(t){var a=t.data;e.settings=a,e.isLoading=!1})).catch(this.displayError)},saveSettings:function(e){var t=this;e.preventDefault();var a=S.state.user.id,i=this.$route.meta.resource;this.$http.put("".concat(i,"/").concat(a,"/settings"),this.settings).then((function(e){var a=e.data;t.isLoading=!1,t.help={type:"success",text:"page-settings.saved"},t.settings=a,S.commit("user/setLocale",a.language);var i=a.language.toLowerCase();s["a"].i18n.set(i),localStorage.setItem("userLocale",i)})).catch(this.displayError)},displayError:function(e){var t,a;this.help="page-settings.help",this.error=e,this.isLoading=!1;var s=(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||{code:0,details:{}},i=s.code,n=s.details;400===i&&(this.errors=Object(v["a"])({},n))}}},Oe=Le,qe=(a("5afa"),Object(H["a"])(Oe,Se,xe,!1,null,null,null)),Ae=qe.exports,Ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"content__header"},[a("CalendarHeader",{ref:"Header",attrs:{isLoading:e.isLoading},on:{"set-center-date":e.setCenterDate,refresh:e.getEventsData,filterMissingMaterials:e.handleFilterMissingMaterial}})],1),a("div",{ref:"Container",staticClass:"content__main-view Calendar"},[a("i",{staticClass:"fas fa-circle-notch fa-3x fa-spin Calendar__loading"}),a("Timeline",{ref:"Timeline",staticClass:"Calendar__timeline",attrs:{items:e.events,options:e.timelineOptions,events:["itemover","itemout","doubleClick","items-remove","rangechanged"]},on:{itemover:e.onItemOver,itemout:e.onItemOut,"double-click":e.onDoubleClick,"items-remove":e.onRemoved,rangechanged:e.onRangeChanged}}),a("Help",{attrs:{message:e.help,error:e.error}})],1)])},Pe=[],Ie=a("2909"),Be=a("13d9"),Re="YYYY-MM-DD HH:mm:ss",He="YYYY-MM-DD",ze=500,Ue=a("3dd1"),Ve=a.n(Ue),Qe=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Ve.a.fire({title:e("please-confirm"),text:e("page-".concat(t,a?".confirm-delete":".confirm-permanently-delete")),type:"warning",showCancelButton:!0,confirmButtonClass:a?"swal2-confirm--trash":"swal2-confirm--delete",confirmButtonText:e(a?"yes-delete":"yes-permanently-delete"),cancelButtonText:e("cancel")})},Ge=function(e,t){return Ve.a.fire({title:e("please-confirm"),text:e("page-".concat(t,".confirm-restore")),type:"warning",showCancelButton:!0,confirmButtonClass:"swal2-confirm--restore",confirmButtonText:e("yes-restore"),cancelButtonText:e("cancel")})},Ye=function(e,t,a,s){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return Ve.a.fire({title:t,input:"text",inputPlaceholder:e(a),inputValue:i,showCancelButton:!0,confirmButtonClass:"swal2-confirm--success",confirmButtonText:e(s),cancelButtonText:e("cancel")})},We={ConfirmDelete:Qe,ConfirmRestore:Ge,Prompt:Ye},Je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"CalendarHeader"},[a("div",{staticClass:"CalendarHeader__left"},[a("div",{staticClass:"CalendarHeader__center-date"},[a("FormField",{attrs:{name:"centerDate",label:"page-calendar.center-on",type:"date","datepicker-options":e.datepickerOptions},on:{change:e.setCenterDate},model:{value:e.centerDate,callback:function(t){e.centerDate=t},expression:"centerDate"}})],1),a("button",{staticClass:"CalendarHeader__button info",attrs:{disabled:e.isToday,title:e.$t("page-calendar.center-on-today")},on:{click:function(t){return e.centerToday()}}},[a("i",{staticClass:"fas fa-compress-arrows-alt"}),a("span",{staticClass:"CalendarHeader__button__title"},[e._v(e._s(e.$t("page-calendar.center-on-today")))])]),a("button",{staticClass:"CalendarHeader__button info",attrs:{title:e.$t("action-refresh")},on:{click:function(t){return e.refresh()}}},[a("i",{staticClass:"fas fa-sync-alt"}),a("span",{staticClass:"CalendarHeader__button__title"},[e._v(e._s(e.$t("action-refresh")))])]),a("div",{staticClass:"CalendarHeader__filter"},[a("label",{staticClass:"CalendarHeader__filter__label"},[e._v(" "+e._s(e.$t("page-calendar.event-with-missing-material-only"))+" ")]),a("SwitchToggle",{attrs:{value:e.hasFilterMissingMaterial},on:{input:e.handleFilterMissingMaterialChange}})],1)]),a("div",{staticClass:"CalendarHeader__center"},[e.isLoading?a("div",{staticClass:"CalendarHeader__loading"},[a("i",{staticClass:"fas fa-circle-notch fa-spin"}),e._v(" "+e._s(e.$t("help-loading"))+" ")]):e._e()]),a("div",{staticClass:"CalendarHeader__right"},[a("router-link",{directives:[{name:"show",rawName:"v-show",value:!e.isVisitor,expression:"!isVisitor"}],staticClass:"success",attrs:{to:"/events/new",tag:"button"}},[a("i",{staticClass:"fas fa-plus"}),e._v(" "+e._s(e.$t("page-calendar.add-event"))+" ")])],1)])},Ke=[],Xe={name:"CalendarHeader",components:{Help:de,FormField:Te,SwitchToggle:Ce},props:{isLoading:Boolean},data:function(){return{centerDate:"",datepickerOptions:{format:"d MMMM yyyy"},isVisitor:"visitor"===S.state.user.groupId,hasFilterMissingMaterial:!1}},computed:{isToday:function(){return n()(this.centerDate).isSame(n()(),"day")}},methods:{setCenterDate:function(e){var t=n()(e.newDate).hour(12).minute(0).toDate();this.$emit("set-center-date",t)},centerToday:function(){var e=n()().hour(12).minute(0).toDate();this.$emit("set-center-date",e)},refresh:function(){this.$emit("refresh")},changePeriod:function(e){var t=n()(e.start),a=n()(e.end),s=a.diff(t,"hours");this.centerDate=t.add(s/2,"hours").format()},handleFilterMissingMaterialChange:function(e){this.hasFilterMissingMaterial=e,this.$emit("filterMissingMaterials",e)}}},Ze=Xe,et=(a("8d7f"),Object(H["a"])(Ze,Je,Ke,!1,null,null,null)),tt=et.exports,at=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"CalendarEventDetails"},[e.isLoading?a("section",{staticClass:"CalendarEventDetails__loading"},[a("i",{staticClass:"fas fa-circle-notch fa-spin fa-2x"}),e._v(" "+e._s(e.$t("page-calendar.loading-event"))+" ")]):e._e(),e.isLoading?e._e():a("section",{staticClass:"CalendarEventDetails__content"},[a("Header",{attrs:{event:e.event},on:{close:function(t){return e.$emit("close")},saved:e.handleSaved,error:e.handleError}}),a("div",{staticClass:"CalendarEventDetails__content__body"},[a("Help",{attrs:{message:e.help,error:e.error}}),a("tabs",[a("tab",{attrs:{"title-slot":"infos"}},[e.event.location?a("div",{staticClass:"CalendarEventDetails__location"},[a("i",{staticClass:"fas fa-map-marker-alt"}),e._v(" "+e._s(e.$t("in"))+" "),a("strong",[e._v(e._s(e.event.location))]),a("a",{attrs:{href:"https://www.openstreetmap.org/search?query="+e.event.location,target:"_blank",title:e.$t("open-in-openstreetmap")}},[e._v(" "),a("i",{staticClass:"fas fa-external-link-alt"})])]):e._e(),0===e.beneficiaries.length?a("div",{staticClass:"CalendarEventDetails__no-beneficiary"},[a("i",{staticClass:"fas fa-exclamation-circle"}),e._v(" "+e._s(e.$t("page-events.warning-no-beneficiary"))+" ")]):e._e(),e.beneficiaries.length>0?a("div",{staticClass:"CalendarEventDetails__beneficiaries"},[a("i",{staticClass:"fas fa-address-book"}),e._v(" "+e._s(e.$t("for"))+" "),e._l(e.beneficiaries,(function(t){return a("div",{key:t.id,staticClass:"CalendarEventDetails__beneficiary"},[a("router-link",{attrs:{to:"/beneficiaries/"+t.id,title:e.$t("action-edit"),tag:"a"}},[e._v(" "+e._s(t.name)+" ")]),t.company?a("router-link",{attrs:{to:"/companies/"+t.company_id,title:e.$t("action-edit"),tag:"a"}},[e._v(" ("+e._s(t.company)+") ")]):e._e()],1)}))],2):e._e(),e.assignees.length>0?a("div",{staticClass:"CalendarEventDetails__assignees"},[a("i",{staticClass:"fas fa-people-carry"}),e._v(" "+e._s(e.$t("with"))+" "),e._l(e.assignees,(function(t){return a("div",{key:t.id,staticClass:"CalendarEventDetails__assignee"},[a("router-link",{attrs:{to:"/technicians/"+t.id,title:e.$t("action-edit"),tag:"a"}},[e._v(" "+e._s(t.name)+" ")])],1)}))],2):e._e(),e.event.description?a("p",{staticClass:"CalendarEventDetails__description"},[a("i",{staticClass:"fas fa-clipboard"}),e._v(" "+e._s(e.event.description)+" ")]):e._e(),e.hasMaterials&&!e.event.isPast?a("div",{staticClass:"CalendarEventDetails__confirmation",class:{"CalendarEventDetails__confirmation--confirmed":e.event.is_confirmed}},[e.event.is_confirmed?e._e():a("p",[a("i",{staticClass:"fas fa-hourglass-half"}),e._v(" "+e._s(e.$t("page-events.event-not-confirmed-help"))+" ")]),e.event.is_confirmed?a("p",[a("i",{staticClass:"fas fa-check"}),e._v(" "+e._s(e.$t("page-events.event-confirmed-help"))+" ")]):e._e()]):e._e()]),a("tab",{attrs:{"title-slot":"materials",disabled:!e.hasMaterials}},[a("EventMissingMaterials",{attrs:{eventId:e.event.id}}),e.hasMaterials?a("EventMaterials",{attrs:{materials:e.event.materials,start:e.event.startDate,end:e.event.endDate,withRentalPrices:e.showBilling&&e.event.is_billable,hideDetails:!1}}):e._e()],1),e.showBilling?a("tab",{attrs:{"title-slot":"billing",disabled:!e.hasMaterials}},[e.hasMaterials&&e.event.is_billable?a("EventBilling",{attrs:{beneficiaries:e.event.beneficiaries,lastBill:e.lastBill,materials:e.event.materials,start:e.event.startDate,end:e.event.endDate,loading:e.billLoading},on:{discountRateChange:e.handleChangeDiscountRate,createBill:e.handleCreateBill}}):e._e(),e.event.is_billable?e._e():a("div",{staticClass:"CalendarEventDetails__not-billable"},[a("p",[a("i",{staticClass:"fas fa-ban"}),e._v(" "+e._s(e.$t("event-not-billable"))+" ")]),e.event.is_confirmed?e._e():a("p",[a("button",{staticClass:"success",on:{click:e.setEventIsBillable}},[e._v(" "+e._s(e.$t("enable-billable-event"))+" ")])])])],1):e._e(),a("template",{slot:"infos"},[a("i",{staticClass:"fas fa-info-circle"}),e._v(" "+e._s(e.$t("informations"))+" ")]),a("template",{slot:"materials"},[a("i",{staticClass:"fas fa-box"}),e._v(" "+e._s(e.$t("material"))+" ")]),a("template",{slot:"billing"},[a("i",{staticClass:"fas fa-file-invoice-dollar"}),e._v(" "+e._s(e.$t("billing"))+" ")])],2),e.hasMaterials?a("div",{staticClass:"CalendarEventDetails__totals"},[a("EventTotals",{attrs:{materials:e.event.materials,withRentalPrices:e.showBilling&&e.event.is_billable,discountRate:e.discountRate,start:e.event.startDate,end:e.event.endDate}})],1):e._e(),e.hasMaterials?e._e():a("div",{staticClass:"CalendarEventDetails__materials-empty"},[a("p",[a("i",{staticClass:"fas fa-exclamation-triangle"}),e._v(" "+e._s(e.$t("page-events.warning-no-material"))+" ")]),e.event.isPast?e._e():a("router-link",{staticClass:"info",attrs:{to:"/events/"+e.event.id,tag:"button"}},[a("i",{staticClass:"fas fa-edit"}),e._v(" "+e._s(e.$t("page-events.edit-event"))+" ")])],1)],1)],1)])},st=[],it=a("3835"),nt=a("0652"),rt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"EventMaterials"},[!e.showMaterialsList||e.materials.length>30?a("div",{staticClass:"EventMaterials__toggle"},[a("button",{class:{info:!e.showMaterialsList},on:{click:function(t){e.showMaterialsList=!e.showMaterialsList}}},[a("i",{staticClass:"fas",class:{"fa-eye":!e.showMaterialsList,"fa-eye-slash":e.showMaterialsList}}),e._v(" "+e._s(e.$t(e.showMaterialsList?"hide-materials-details":"show-materials-details"))+" ")])]):e._e(),e.showMaterialsList?a("div",{staticClass:"EventMaterials__categories"},e._l(e.categories,(function(t,s){return a("div",{key:t.id,staticClass:"EventMaterials__category"},[a("h4",{staticClass:"EventMaterials__title"},[e._v(" "+e._s(t.name)+" ")]),a("ul",{staticClass:"EventMaterials__list"},e._l(t.materials,(function(t){return a("li",{key:t.id,staticClass:"EventMaterials__item"},[a("div",{staticClass:"EventMaterials__item__name"},[e._v(" "+e._s(t.name)+" ")]),e.withRentalPrices?a("div",{staticClass:"EventMaterials__item__price"},[e._v(" "+e._s(e.formatAmount(t.rental_price))+" ")]):e._e(),a("div",{staticClass:"EventMaterials__item__quantity"},[a("i",{staticClass:"fas fa-times"}),e._v(" "+e._s(t.pivot.quantity)+" ")]),e.withRentalPrices?a("div",{staticClass:"EventMaterials__item__total"},[e._v(" "+e._s(e.formatAmount(t.pivot.quantity*t.rental_price))+" ")]):e._e()])})),0),e.withRentalPrices?a("div",{staticClass:"EventMaterials__subtotal"},[s===e.categories.length-1?a("button",{on:{click:function(t){e.showMaterialsList=!1}}},[a("i",{staticClass:"fas fa-eye-slash"}),e._v(" "+e._s(e.$t("hide-materials-details"))+" ")]):e._e(),a("div",{staticClass:"EventMaterials__subtotal__name"},[e._v(" "+e._s(e.$t("sub-total"))+" ")]),a("div",{staticClass:"EventMaterials__subtotal__price"},[e._v(" "+e._s(e.formatAmount(t.subTotal))+" ")])]):e._e()])})),0):e._e()])},ot=[],lt=function(e){var t=_.currency.iso;return e.toLocaleString(void 0,{style:"currency",currency:t,currencyDisplay:"symbol",useGrouping:!0})},ct=lt,ut=(a("c740"),function(e,t){if(!e||0===e.length||!t)return[];var a=[];return e.forEach((function(e){var s=e.category_id,i=e.rental_price,n=e.pivot,r=a.findIndex((function(e){return e.id===s}));if(r<0){var o=t(s);a.push({id:s,name:o}),r=a.length-1}var l=n.quantity;a[r].materials?(a[r].materials.push(e),a[r].subTotal+=l*i):(a[r].materials=[e],a[r].subTotal=l*i)})),a.forEach((function(e){e.materials.sort((function(e,t){var a=e.rental_price*e.pivot.quantity,s=t.rental_price*t.pivot.quantity;return a>s?-1:1}))})),a}),dt=ut,mt={name:"EventMaterials",props:{materials:Array,start:Object,end:Object,withRentalPrices:{type:Boolean,default:!0},hideDetails:{type:Boolean,default:!1}},data:function(){return{showMaterialsList:!this.hideDetails}},computed:{categories:function(){var e=S.getters["categories/categoryName"];return dt(this.materials,e)}},created:function(){S.dispatch("categories/fetch")},methods:{formatAmount:function(e){return ct(e)}}},pt=mt,ft=(a("86c6"),Object(H["a"])(pt,rt,ot,!1,null,null,null)),ht=ft.exports,_t=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.hasMissingMaterials||e.error?a("div",{staticClass:"EventMissingMaterials"},[a("h3",{staticClass:"EventMissingMaterials__title"},[a("i",{staticClass:"fas fa-box-open"}),e._v(" "+e._s(e.$t("page-events.event-missing-materials"))+" ")]),a("p",{staticClass:"EventMissingMaterials__help"},[e._v(" "+e._s(e.$t("page-events.event-missing-materials-help"))+" ")]),e.error?a("div",{staticClass:"EventMissingMaterials__error"},[e._v(" "+e._s(e.error)+" ")]):e._e(),a("ul",{staticClass:"EventMissingMaterials__list"},e._l(e.missingMaterials,(function(t){return a("li",{key:t.id,staticClass:"EventMissingMaterials__item"},[a("div",{staticClass:"EventMissingMaterials__item__name"},[e._v(" "+e._s(t.name)+" ")]),a("div",{staticClass:"EventMissingMaterials__item__quantity"},[e._v(" "+e._s(e.$t("page-events.missing-material-count",e.getMissingCount(t)))+" ")])])})),0)]):e._e()},vt=[],gt={name:"EventMissingMaterials",props:{eventId:Number},data:function(){return{hasMissingMaterials:!1,missingMaterials:[],error:null}},mounted:function(){this.fetchMissingMaterials()},methods:{fetchMissingMaterials:function(){var e=this;this.$http.get("events/".concat(this.eventId,"/missing-materials")).then((function(t){var a=t.data;e.missingMaterials=a,e.hasMissingMaterials=a.length>0})).catch(this.displayError)},getMissingCount:function(e){var t=e.pivot.quantity,a=Math.min(Math.abs(e.remaining_quantity),t);return{quantity:t,missing:a}},displayError:function(e){this.error=e}}},bt=gt,yt=(a("5b9a"),Object(H["a"])(bt,_t,vt,!1,null,null,null)),Ct=yt.exports,$t=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"EventBilling"},[a("div",{staticClass:"EventBilling__last-bill"},[!e.lastBill||e.displayCreateBill||e.loading?e._e():a("div",{staticClass:"EventBilling__last-bill__download"},[a("p",{staticClass:"EventBilling__last-bill__download__text"},[e._v(" "+e._s(e.$t("download-bill-help1",{number:e.lastBill.number,date:e.lastBill.date.format("L")}))+" "),e.discountRate>0?a("span",[e._v(e._s(e.$t("download-bill-help2",{discountRate:e.discountRate}))+",")]):e._e(),0===e.discountRate?a("span",[e._v(e._s(e.$t("without-discount"))+",")]):e._e(),e._v(" "+e._s(e.$t("download-bill-help3",{amount:e.formatAmount(e.lastBill.due_amount)}))+". ")]),a("a",{staticClass:"EventBilling__last-bill__download__link",attrs:{href:e.billPdfUrl}},[a("i",{staticClass:"fas fa-download"}),e._v(" "+e._s(e.$t("download-bill-pdf"))+" ")])]),e.lastBill?a("div",{staticClass:"EventBilling__last-bill__regenerate"},[a("p",{staticClass:"EventBilling__last-bill__regenerate__text"},[e._v(" "+e._s(e.$t("regenerate-bill-help"))+" ")]),e.displayCreateBill||e.loading?e._e():a("a",{attrs:{href:"#"},on:{click:e.openBillRegeneration}},[a("i",{staticClass:"fas fa-sync"}),e._v(" "+e._s(e.$t("click-here-to-regenerate"))+" ")])]):e._e(),e.isBillable?e._e():a("div",{staticClass:"EventBilling__last-bill__not-billable"},[a("h3",{staticClass:"EventBilling__last-bill__not-billable__title"},[a("i",{staticClass:"fas fa-exclamation-triangle"}),e._v(" "+e._s(e.$t("missing-beneficiary"))+" ")]),a("p",{staticClass:"EventBilling__last-bill__not-billable__text"},[e._v(" "+e._s(e.$t("not-billable-help"))),a("br"),e._v(" "+e._s(e.$t("click-edit-to-create-one"))+" ")])]),!e.lastBill&&e.isBillable?a("p",{staticClass:"EventBilling__last-bill__no-bill"},[e._v(" "+e._s(e.$t("no-bill-help"))),a("br"),e._v(" "+e._s(e.$t("create-bill-help"))+" ")]):e._e(),e.displayCreateBill||e.loading||!e.lastBill&&e.isBillable?a("form",{staticClass:"Form EventBilling__last-bill__create",attrs:{method:"POST"},on:{submit:e.createBill}},[a("div",{staticClass:"Form__fieldset"},[a("h4",{staticClass:"Form__fieldset__title"},[e._v(e._s(e.$t("discount")))]),a("FormField",{staticClass:"EventBilling__last-bill__discount-input",attrs:{name:"discountRate",type:"number",step:1e-4,min:0,max:99.9999,addon:"%",label:"wanted-rate",disabled:e.loading},model:{value:e.discountRate,callback:function(t){e.discountRate=t},expression:"discountRate"}}),a("FormField",{staticClass:"EventBilling__last-bill__discount-target-input",attrs:{value:e.discountTarget,name:"discountTarget",type:"number",step:.01,min:0,max:e.grandTotal,addon:e.currency,label:"wanted-amount",disabled:e.loading},on:{change:e.recalcDiscountRate}}),a("div",{staticClass:"EventBilling__last-bill__beneficiary"},[a("label",{staticClass:"EventBilling__last-bill__beneficiary__label"},[e._v(" "+e._s(e.$t("beneficiary"))+" ")]),a("div",{staticClass:"EventBilling__last-bill__beneficiary__name"},[a("router-link",{key:e.beneficiaries[0].id,attrs:{to:"/beneficiaries/"+e.beneficiaries[0].id,title:e.$t("action-edit"),tag:"a"}},[e._v(" "+e._s(e.beneficiaries[0].full_name)+" ")])],1)])],1),a("div",{staticClass:"EventBilling__last-bill__save"},[a("button",{staticClass:"success",attrs:{type:"submit"}},[e.loading?a("i",{staticClass:"fas fa-spinner fa-spin"}):e._e(),e._v(" "+e._s(e.$t("create-bill"))+" ")]),e.lastBill?a("button",{attrs:{type:"button"},on:{click:e.closeBillRegeneration}},[e._v(" "+e._s(e.$t("cancel"))+" ")]):e._e()])]):e._e()])])},wt=[],kt=(a("13d5"),function(e){return e&&0!==e.length?e.reduce((function(e,t){return e+t.pivot.quantity}),0):0}),Et=kt,Tt=function(e){return e&&0!==e.length?e.reduce((function(e,t){return e+t.rental_price*t.pivot.quantity}),0):0},jt=Tt,Dt=function(e){return e&&0!==e.length?e.reduce((function(e,t){return t.is_discountable?e+t.rental_price*t.pivot.quantity:e}),0):0},Mt=Dt,Ft=(a("9129"),function(e,t){if("number"!==typeof e||Number.isNaN(e))return 0;if(0===e||0===t)return 0;var a=_.degressiveRate(t);return e*a}),St=Ft,xt=function(e){return e&&0!==e.length?e.reduce((function(e,t){return e+t.replacement_price*t.pivot.quantity}),0):0},Lt=xt,Ot=(a("35b3"),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Math.round((e+Number.EPSILON)*Math.pow(10,t))/Math.pow(10,t)}),qt=Ot,At={name:"EventBilling",components:{FormField:Te},props:{lastBill:Object,beneficiaries:Array,materials:Array,loading:Boolean,start:Object,end:Object},data:function(){return{duration:this.end?this.end.diff(this.start,"days")+1:1,discountRate:this.lastBill?this.lastBill.discount_rate:0,currency:_.currency.symbol,isBillable:this.beneficiaries.length>0,displayCreateBill:!1}},watch:{discountRate:function(e){this.$emit("discountRateChange",parseFloat(e))}},computed:{billPdfUrl:function(){var e=_.baseUrl,t=this.lastBill||{id:null},a=t.id;return"".concat(e,"/bills/").concat(a,"/pdf")},ratio:function(){return _.degressiveRate(this.duration)},itemsCount:function(){return Et(this.materials)},total:function(){return jt(this.materials)},grandTotal:function(){return St(this.total,this.duration)},totalDiscountable:function(){return Mt(this.materials)},grandTotalDiscountable:function(){return St(this.totalDiscountable,this.duration)},discountAmount:function(){return this.grandTotalDiscountable*(this.discountRate/100)},discountTarget:{get:function(){return qt(this.grandTotal-this.discountAmount)},set:function(e){var t=this.grandTotal-e,a=t/this.grandTotalDiscountable*100;this.discountRate=qt(a,4)}},grandTotalWithDiscount:function(){return this.grandTotal-this.discountAmount},replacementTotal:function(){return Lt(this.materials)}},methods:{recalcDiscountRate:function(e){this.discountTarget=parseFloat(e)},createBill:function(e){e.preventDefault(),this.displayCreateBill=!1,this.loading||this.$emit("createBill",this.discountRate)},openBillRegeneration:function(){this.displayCreateBill=!0},closeBillRegeneration:function(){this.displayCreateBill=!1},formatAmount:function(e){return ct(e)}}},Nt=At,Pt=(a("19d4"),Object(H["a"])(Nt,$t,wt,!1,null,null,null)),It=Pt.exports,Bt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"EventTotals"},[e.withRentalPrices?a("div",[a("div",{staticClass:"EventTotals__base"},[e._v(" "+e._s(e.$t("total"))+": "),a("span",{staticClass:"EventTotals__items-count"},[e._v(" "+e._s(e.$t("items-count",{count:e.itemsCount},e.itemsCount))+" ")]),a("span",{staticClass:"EventTotals__daily-total"},[a("i",{staticClass:"fas fa-arrow-right"}),e._v(" "+e._s(e.formatAmount(e.total))+" ")]),a("span",{staticClass:"EventTotals__duration"},[a("i",{staticClass:"fas fa-times"}),e._v(" "+e._s(e.duration)+" "+e._s(e.duration>1?e.$t("days"):e.$t("day"))+" ")]),a("span",{staticClass:"EventTotals__ratio"},[a("i",{staticClass:"fas fa-arrow-right"}),e._v(" "+e._s(e.$t("ratio"))+" "+e._s(e.ratio)+" ")])]),a("div",{staticClass:"EventTotals__grand"},[e._v(" "+e._s(e.$t("total-amount"))+": "+e._s(e.formatAmount(e.grandTotal))+" ")]),e.discountRate>0&&e.totalDiscountable!==e.total?a("div",{staticClass:"EventTotals__discountable"},[e._v(" "+e._s(e.$t("total-discountable"))+": "+e._s(e.formatAmount(e.totalDiscountable))+" / "+e._s(e.$t("day"))+" "),a("i",{staticClass:"fas fa-arrow-right"}),e._v(" "+e._s(e.formatAmount(e.grandTotalDiscountable))+" ")]):e._e(),e.discountRate>0?a("div",{staticClass:"EventTotals__discount"},[e._v(" "+e._s(e.$t("discount"))+" "+e._s(e.discountRate)+" % "),a("i",{staticClass:"fas fa-arrow-right"}),e._v(" - "+e._s(e.formatAmount(e.discountAmount))+" ")]):e._e(),e.discountRate>0?a("div",{staticClass:"EventTotals__grand-discount"},[e._v(" "+e._s(e.$t("total-amount-with-discount"))+": "+e._s(e.formatAmount(e.grandTotalWithDiscount))+" ")]):e._e(),e.duration>1?a("div",{staticClass:"EventTotals__daily"},[e._v(" ("+e._s(e.formatAmount(e.grandTotalWithDiscount/e.duration))+" / "+e._s(e.$t("day"))+") ")]):e._e()]):e._e(),a("div",{staticClass:"EventTotals__replacement"},[e._v(" "+e._s(e.$t("replacement-total"))+": "+e._s(e.formatAmount(e.replacementTotal))+" ")])])},Rt=[],Ht={name:"EventTotals",components:{FormField:Te},props:{materials:Array,withRentalPrices:Boolean,discountRate:Number,start:Object,end:Object},data:function(){return{duration:this.end?this.end.diff(this.start,"days")+1:1,currency:_.currency.symbol}},created:function(){S.dispatch("categories/fetch")},computed:{ratio:function(){return _.degressiveRate(this.duration)},itemsCount:function(){return Et(this.materials)},total:function(){return jt(this.materials)},grandTotal:function(){return St(this.total,this.duration)},totalDiscountable:function(){return Mt(this.materials)},grandTotalDiscountable:function(){return St(this.totalDiscountable,this.duration)},discountAmount:function(){return this.grandTotalDiscountable*(this.discountRate/100)},discountTarget:{get:function(){return qt(this.grandTotal-this.discountAmount)},set:function(e){var t=this.grandTotal-e,a=t/this.grandTotalDiscountable*100;this.discountRate=qt(a,4)}},grandTotalWithDiscount:function(){return this.grandTotal-this.discountAmount},replacementTotal:function(){return Lt(this.materials)}},methods:{recalcDiscountRate:function(e){this.discountTarget=parseFloat(e)},formatAmount:function(e){return ct(e)}}},zt=Ht,Ut=(a("9b72"),Object(H["a"])(zt,Bt,Rt,!1,null,null,null)),Vt=Ut.exports,Qt=function(e){var t=e.start_date,a=e.end_date,s=e.is_confirmed,i=e.has_missing_materials,r=n()(),o=n()(t),l=n()(a),c=l.isBefore(r,"day"),u=r.isBetween(o,l,"day","[]");return Object(v["a"])(Object(v["a"])({},e),{},{startDate:o,endDate:l,isConfirmed:s,isPast:c,isCurrent:u,hasMissingMaterials:i})},Gt=function(e,t){var a=Qt(e),s=a.id,i=a.title,n=a.startDate,r=a.endDate,o=a.isPast,l=a.isCurrent,c=a.isConfirmed,u=a.location,d=a.hasMissingMaterials,m=i;u&&(m="".concat(i," (").concat(u,")"));var p=[],f=["Calendar__event"];o&&(f.push("Calendar__event--past"),p.push(t("page-calendar.this-event-is-past"))),l&&(f.push("Calendar__event--current"),p.push(t("page-calendar.this-event-is-currently-running"))),c&&(p.push(t("page-calendar.this-event-is-confirmed")),o||f.push("Calendar__event--confirmed"));var h=c;h&&f.push("Calendar__event--locked"),d&&(f.push("Calendar__event--with-warning"),p.push(t("page-calendar.this-event-has-missing-materials")));var _=m;return p.length>0&&(_+="\n  →".concat(p.join("\n  →"))),{id:s,content:m,start:n,end:r,editable:!h,className:f.join(" "),title:_,hasMissingMaterials:d}},Yt={formatEvent:Qt,formatTimelineEvent:Gt},Wt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",{staticClass:"CalendarEventDetailsHeader"},[a("div",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:e.event.isConfirmed?e.$t("confirmed"):e.$t("not-confirmed"),expression:"event.isConfirmed ? $t('confirmed') : $t('not-confirmed')",modifiers:{bottom:!0}}],staticClass:"CalendarEventDetailsHeader__status"},[e.event.isConfirmed?e._e():a("i",{staticClass:"far fa-question-circle text-muted"}),e.event.isConfirmed?a("i",{staticClass:"fas fa-check"}):e._e()]),a("div",{staticClass:"CalendarEventDetailsHeader__details"},[a("h4",{staticClass:"CalendarEventDetailsHeader__details__title"},[e._v(" "+e._s(e.event.title)+" ")]),a("div",{staticClass:"CalendarEventDetailsHeader__details__location-dates"},[e._v(" "+e._s(e.$t("from-date-to-date",e.fromToDates))+" "),e.event.isCurrent?a("span",{staticClass:"CalendarEventDetailsHeader__details__in-progress"},[e._v(" ("+e._s(e.$t("in-progress"))+") ")]):e._e()])]),a("div",{staticClass:"CalendarEventDetailsHeader__actions"},[a("router-link",{directives:[{name:"show",rawName:"v-show",value:!e.isVisitor,expression:"!isVisitor"}],staticClass:"info",attrs:{to:"/events/"+e.event.id,disabled:e.event.isConfirmed,tag:"button"}},[a("i",{staticClass:"fas fa-edit"}),e._v(" "+e._s(e.$t("action-edit"))+" ")]),e.event.isConfirmed?e._e():a("button",{directives:[{name:"show",rawName:"v-show",value:!e.isVisitor,expression:"!isVisitor"}],staticClass:"success",attrs:{disabled:0===e.event.materials.length},on:{click:e.confirmEvent}},[e.isConfirming?a("i",{staticClass:"fas fa-circle-notch fa-spin"}):e._e(),e.isConfirming?e._e():a("i",{staticClass:"fas fa-check"}),e._v(" "+e._s(e.$t("confirm"))+" ")]),e.event.isConfirmed?a("button",{directives:[{name:"show",rawName:"v-show",value:!e.isVisitor,expression:"!isVisitor"}],staticClass:"warning",on:{click:e.unconfirmEvent}},[e.isConfirming?a("i",{staticClass:"fas fa-circle-notch fa-spin"}):e._e(),e.isConfirming?e._e():a("i",{staticClass:"fas fa-hourglass-half"}),e._v(" "+e._s(e.$t("set-back-on-hold"))+" ")]):e._e(),e.event.materials.length>0&&e.event.beneficiaries.length>0?a("a",{staticClass:"CalendarEventDetailsHeader__actions__print",attrs:{href:e.eventSummaryPdfUrl,target:"_blank"}},[a("i",{staticClass:"fas fa-print"}),e._v(" "+e._s(e.$t("print"))+" ")]):e._e()],1),a("button",{staticClass:"close",on:{click:function(t){return e.$emit("close")}}},[a("i",{staticClass:"fas fa-times"})])])},Jt=[],Kt={name:"CalendarEventDetailsHeader",props:["event","onSaved","onError"],data:function(){return{isConfirming:!1,fromToDates:{},isVisitor:"visitor"===S.state.user.groupId}},computed:{eventSummaryPdfUrl:function(){var e=_.baseUrl,t=this.event||{id:null},a=t.id;return"".concat(e,"/events/").concat(a,"/pdf")}},created:function(){var e=this.$props.event;e&&(this.fromToDates={from:e.startDate.format("L"),to:e.endDate.format("L")})},methods:{confirmEvent:function(){this.setEventConfirmation(!0)},unconfirmEvent:function(){this.setEventConfirmation(!1)},printEvent:function(){console.log("TODO: PRINT EVENT")},setEventConfirmation:function(e){var t=this,a=this.$props.event.id,s="".concat(this.$route.meta.resource,"/").concat(a);this.isConfirming=!0,this.$http.put(s,{id:a,is_confirmed:e}).then((function(e){var a=e.data;t.$emit("saved",a)})).catch((function(e){t.$emit("error",e)})).finally((function(){t.isConfirming=!1}))}}},Xt=Kt,Zt=(a("a5de"),Object(H["a"])(Xt,Wt,Jt,!1,null,null,null)),ea=Zt.exports,ta={name:"CalendarEventDetails",components:{Header:ea,Tabs:nt["b"],Tab:nt["a"],Help:de,EventMaterials:ht,EventMissingMaterials:Ct,EventBilling:It,EventTotals:Vt},props:["eventId"],data:function(){return{help:"",error:null,isLoading:!1,event:null,beneficiaries:[],discountRate:0,assignees:[],showBilling:"none"!==_.billingMode,lastBill:null,billLoading:!1}},created:function(){this.getEvent()},computed:{hasMaterials:function(){return this.event.materials.length>0}},methods:{getEvent:function(){var e=this,t=this.$props.eventId,a="".concat(this.$route.meta.resource,"/").concat(t);this.error=null,this.isLoading=!0,this.$http.get(a).then((function(t){var a=t.data;e.setData(a),e.isLoading=!1})).catch(this.handleError)},handleChangeDiscountRate:function(e){this.discountRate=e},handleCreateBill:function(e){var t=this;this.error=null,this.billLoading=!0;var a=this.$props.eventId,s="".concat(this.$route.meta.resource,"/").concat(a,"/bill");this.$http.post(s,{discountRate:e}).then((function(e){var a=e.data;t.lastBill=Object(v["a"])(Object(v["a"])({},a),{},{date:n()(a.date)})})).catch(this.handleError).finally((function(){t.billLoading=!1}))},setEventIsBillable:function(){var e=this;this.error=null,this.isLoading=!0;var t=this.$props.eventId,a={is_billable:!0};this.$http.put("".concat(this.$route.meta.resource,"/").concat(t),a).then((function(t){var a=t.data;e.setData(a),e.isLoading=!1})).catch(this.handleError)},handleSaved:function(e){this.error=null,this.setData(e),this.$emit("event-updated",e)},handleError:function(e){this.error=e,this.isLoading=!1},setData:function(e){if(this.event=Object(v["a"])(Object(v["a"])({},Yt.formatEvent(e)),e),e.beneficiaries&&(this.beneficiaries=e.beneficiaries.map((function(e){return{id:e.id,name:e.full_name,company_id:e.company_id?e.company_id:null,company:e.company?e.company.legal_name:null}}))),e.assignees&&(this.assignees=e.assignees.map((function(e){return{id:e.id,name:e.full_name}}))),e.bills.length>0){var t=Object(it["a"])(e.bills,1),a=t[0];this.lastBill=Object(v["a"])(Object(v["a"])({},a),{},{date:n()(a.date)}),this.discountRate=a?a.discount_rate:0}}}},aa=ta,sa=(a("cd79"),Object(H["a"])(aa,at,st,!1,null,null,null)),ia=sa.exports,na=864e5,ra={name:"Calendar",components:{CalendarHeader:tt,Timeline:Be["a"],EventDetails:ia,Help:de},data:function(){var e=this,t=n()().subtract(2,"days").startOf("day"),a=n()().add(5,"days").endOf("day"),s=localStorage.getItem("calendarStart"),i=localStorage.getItem("calendarEnd");s&&i&&(t=s,a=i);var r="visitor"===S.state.user.groupId;return{help:"page-calendar.help",error:null,isLoading:!1,fetchStart:n()().subtract(8,"days").startOf("day"),fetchEnd:n()().add(1,"months").endOf("month"),isModalOpened:!1,hasMissingMaterialFilter:!1,events:[],allEvents:[],timelineOptions:{selectable:!r,editable:{add:!1,updateTime:!0,updateGroup:!1,remove:!0,overrideItems:!1},start:t,end:a,locale:S.state.i18n.locale,minHeight:300,orientation:"top",zoomMin:7*na,zoomMax:60*na,tooltip:{followMouse:!0,overflowMethod:"flip"},moment:function(e){return n()(e)},onMove:function(t,a){if(!r){var s="".concat(e.$route.meta.resource,"/").concat(t.id),i=n()(t.end);0===i.hour()&&i.subtract(1,"day").endOf("day");var o={start_date:n()(t.start).format(Re),end_date:i.format(Re)};e.error=null,e.isLoading=!0,e.$http.put(s,o).then((function(){e.isLoading=!1,e.help={type:"success",text:"page-calendar.event-saved"},a(t),e.getEventsData()})).catch((function(t){a(null),e.showError(t)}))}},onRemove:function(t,a){r||We.ConfirmDelete(e.$t,"calendar").then((function(s){if(s.value){e.error=null,e.isLoading=!0;var i="".concat(e.$route.meta.resource,"/").concat(t.id);e.$http.delete(i).then((function(){a(t)}))}else a(null)}))}}}},mounted:function(){this.getEventsData()},methods:{filterEventsByMissingMaterials:function(){this.events=this.allEvents.filter((function(e){var t=e.hasMissingMaterials;return!!t}))},getEventsData:function(){var e=this;this.error=null,this.isLoading=!0,this.isModalOpened=!1;var t={start:this.fetchStart.format("YYYY-MM-DD HH:mm:ss"),end:this.fetchEnd.format("YYYY-MM-DD HH:mm:ss")};this.$http.get(this.$route.meta.resource,{params:t}).then((function(t){var a=t.data;e.events=a.data.map((function(t){return Yt.formatTimelineEvent(t,e.$t)})),e.allEvents=Object(Ie["a"])(e.events),e.hasMissingMaterialFilter&&e.filterEventsByMissingMaterials(),e.isLoading=!1})).catch((function(t){e.showError(t)}))},onRangeChanged:function(e){localStorage.setItem("calendarStart",e.start),localStorage.setItem("calendarEnd",e.end),this.$refs.Header.changePeriod(e);var t=!1;this.fetchStart.isAfter(e.start)&&(this.fetchStart=n()(e.start).subtract(8,"days").startOf("day"),t=!0),this.fetchEnd.isBefore(e.end)&&(this.fetchEnd=n()(e.end).add(1,"months").endOf("month"),t=!0),t&&this.getEventsData()},setCenterDate:function(e){this.$refs.Timeline.moveTo(e)},onItemOver:function(){this.help="page-calendar.help-timeline-event-operations"},onItemOut:function(){this.help="page-calendar.help"},onDoubleClick:function(e){if(!this.isModalOpened){var t=e.item;if(t)return this.openEventModal(t),void(this.isModalOpened=!0);var a=n()(e.time).startOf("day").format(He);this.$router.push({path:"/events/new",query:{startDate:a}})}},openEventModal:function(e){var t=this;this.$modal.show(ia,{eventId:e},ee,{"before-close":function(){t.getEventsData()}})},onRemoved:function(){this.isLoading&&(this.help={type:"success",text:"page-calendar.event-deleted"},this.error=null,this.isLoading=!1)},showError:function(e){this.error=e,this.isLoading=!1},handleFilterMissingMaterial:function(e){this.hasMissingMaterialFilter=e,e?this.filterEventsByMissingMaterials():this.events=Object(Ie["a"])(this.allEvents)}}},oa=ra,la=(a("f59e"),Object(H["a"])(oa,Ne,Pe,!1,null,null,null)),ca=la.exports,ua=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"content__main-view"},[a("div",{staticClass:"Event"},[a("div",{staticClass:"Event__panel"},[a("Breadcrumb",{attrs:{event:e.event,steps:e.steps,"current-step":e.currentStep},on:{openStep:e.openStep}}),a("MiniSummary"),a("Help",{attrs:{message:e.help,error:e.error,isLoading:e.isLoading}})],1),1===e.currentStep?a("EventStep1",{attrs:{event:e.event},on:{loading:e.startLoading,error:e.displayError,updateEvent:e.setEventData,gotoStep:e.openStep}}):e._e(),2===e.currentStep?a("EventStep2",{attrs:{event:e.event},on:{loading:e.startLoading,stopLoading:e.stopLoading,error:e.displayError,updateEvent:e.setEventData,gotoStep:e.openStep}}):e._e(),3===e.currentStep?a("EventStep3",{attrs:{event:e.event},on:{loading:e.startLoading,stopLoading:e.stopLoading,error:e.displayError,updateEvent:e.setEventData,gotoStep:e.openStep}}):e._e(),4===e.currentStep?a("EventStep4",{attrs:{event:e.event},on:{loading:e.startLoading,error:e.displayError,updateEvent:e.setEventData,gotoStep:e.openStep}}):e._e(),5===e.currentStep?a("EventStep5",{attrs:{event:e.event},on:{error:e.displayError,updateEvent:e.setEventData}}):e._e()],1)])])},da=[],ma=(a("a4d3"),a("e01a"),new C["a"].Store({state:{title:"",dates:{start:null,end:null},location:null,description:null,materials:[],isConfirmed:!1,isBillable:!0,isSaved:!1},mutations:{reset:function(e){e.title="",e.dates={start:null,end:null},e.location=null,e.description=null,e.materials=[],e.isConfirmed=!1,e.isBillable=!0,e.isSaved=!0},init:function(e,t){e.title=t.title,e.dates={start:t.start_date,end:t.end_date},e.location=t.location,e.description=t.description,e.isBillable=t.is_billable,e.materials=t.materials,e.isConfirmed=t.is_confirmed},setIsSaved:function(e,t){e.isSaved=t}},actions:{checkIsSaved:function(e,t){var a=e.commit,s=e.state,i=t.title===s.title&&t.start_date===s.dates.start&&t.end_date===s.dates.end&&t.location===s.location&&t.description===s.description&&t.is_confirmed===s.isConfirmed&&t.is_billable===s.isBillable;a("setIsSaved",i)}}})),pa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Breadcrumb"},e._l(e.steps,(function(t){return a("div",{key:t.id,staticClass:"Breadcrumb__step",class:{"Breadcrumb__step--current":e.isCurrent(t),"Breadcrumb__step--active":e.isActive(t),"Breadcrumb__step--validated":!e.isCurrent(t)&&e.isValidated(t)},on:{click:function(a){return e.openStep(t)}}},[e.isCurrent(t)?a("i",{staticClass:"fas fa-arrow-right"}):e._e(),!e.isCurrent(t)&&e.isValidated(t)?a("i",{staticClass:"fas fa-check"}):e._e(),e._v(" "+e._s(t.id)+" - "),a("span",{staticClass:"Breadcrumb__step__name"},[e._v(" "+e._s(t.name)+" ")])])})),0)},fa=[],ha={name:"Breadcrumb",props:["event","steps","currentStep"],methods:{openStep:function(e){this.isActive(e)&&this.$emit("openStep",e.id)},isCurrent:function(e){return e.id===this.currentStep},isActive:function(e){var t=this.steps.findIndex((function(t){return t.id===e.id}));if(t<0)return!1;var a=this.steps[t-1]||null;return this.isCurrent(e)||this.isValidated(e)||a&&this.isValidated(a)},isValidated:function(e){var t=this,a=!0;return e.fields.forEach((function(e){t.event[e]&&0!==t.event[e].length||(a=!1)})),a}}},_a=ha,va=(a("3ed7"),Object(H["a"])(_a,pa,fa,!1,null,null,null)),ga=va.exports,ba=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"EventMiniSummary",class:{"EventMiniSummary--confirmed":e.isConfirmed,"EventMiniSummary--not-saved":!e.isSaved}},[e.isSaved?e._e():a("div",{directives:[{name:"tooltip",rawName:"v-tooltip.right-end",value:e.$t("page-events.not-saved"),expression:"$t('page-events.not-saved')",modifiers:{"right-end":!0}}],staticClass:"EventMiniSummary__not-saved"},[a("i",{staticClass:"fas fa-exclamation-triangle"})]),e.title?a("div",{staticClass:"EventMiniSummary__title"},[e._v(" "+e._s(e.title)+" ")]):e._e(),e.location?a("div",{staticClass:"EventMiniSummary__detail"},[e._v(" "+e._s(e.$t("in"))+" "+e._s(e.location)+" ")]):e._e(),e.dates.start&&e.dates.end?a("div",{staticClass:"EventMiniSummary__detail"},[1===e.duration?a("span",[e._v(" "+e._s(e.$t("on-date",{date:e.fromToDates.from}))+" ")]):e._e(),e.duration>1?a("span",[e._v(" "+e._s(e.$t("from-date-to-date",e.fromToDates))+" ")]):e._e(),a("br"),e._v(" "+e._s(e.$t("duration-days",{duration:e.duration}))+" "),a("br"),e.showPrices?a("span",[e._v(" "+e._s(e.$t("ratio"))+" "+e._s(e.ratio)+" ")]):e._e()]):e._e(),e.showPrices?a("div",{staticClass:"EventMiniSummary__total"},[e._v(" "+e._s(e.$t("total"))+" "),a("strong",[e._v(e._s(e.grandTotal))])]):e._e(),a("div",{staticClass:"EventMiniSummary__detail"},[e.isConfirmed?a("span",[a("i",{staticClass:"fas fa-check"}),e._v(" "+e._s(e.$t("confirmed"))+" ")]):a("span",{},[a("i",{staticClass:"far fa-question-circle"}),e._v(" "+e._s(e.$t("not-confirmed"))+" ")])])])},ya=[],Ca={name:"EventMiniSummary",computed:{title:function(){return ma.state.title},dates:function(){return ma.state.dates},location:function(){return ma.state.location},materials:function(){return ma.state.materials},isConfirmed:function(){return ma.state.isConfirmed},isSaved:function(){return ma.state.isSaved},showPrices:function(){return"none"!==_.billingMode&&ma.state.isBillable},fromToDates:function(){var e=this.dates,t=e.start,a=e.end;return{from:t?n()(t).format("L"):"",to:a?n()(a).format("L"):""}},duration:function(){var e=this.dates,t=e.start,a=e.end;return t&&a?n()(a).diff(t,"days")+1:0},ratio:function(){return _.degressiveRate(this.duration)},grandTotal:function(){var e=jt(this.materials),t=St(e,this.duration);return ct(t)}},methods:{formatAmount:function(e){return ct(e)}}},$a=Ca,wa=(a("ae27"),Object(H["a"])($a,ba,ya,!1,null,null,null)),ka=wa.exports,Ea=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{staticClass:"Form EventStep1",attrs:{method:"POST"},on:{submit:e.saveAndBack}},[a("section",{staticClass:"Form__fieldset"},[a("h4",{staticClass:"Form__fieldset__title"},[e._v(" "+e._s(e.$t("minimal-infos"))+" "),a("span",{staticClass:"FormField__label__required"},[e._v("*")])]),a("FormField",{attrs:{name:"title",label:"title",required:"",errors:e.errors.title},on:{input:e.checkIsSavedEvent},model:{value:e.event.title,callback:function(t){e.$set(e.event,"title",t)},expression:"event.title"}}),a("div",{staticClass:"EventStep1__dates"},[a("div",{staticClass:"EventStep1__dates__fields"},[a("FormField",{attrs:{name:"start_date",label:"start-date",type:"date",required:"",errors:e.errors.start_date,"datepicker-options":e.startDatepickerOptions},on:{change:e.handleStartDateChange},model:{value:e.event.start_date,callback:function(t){e.$set(e.event,"start_date",t)},expression:"event.start_date"}}),a("FormField",{attrs:{name:"end_date",label:"end-date",type:"date",required:"",errors:e.errors.end_date,"datepicker-options":e.endDatepickerOptions},on:{change:e.refreshDateFieldLimit},model:{value:e.event.end_date,callback:function(t){e.$set(e.event,"end_date",t)},expression:"event.end_date"}})],1),e.duration>0?a("div",{staticClass:"EventStep1__dates__duration"},[e._v(" "+e._s(e.$t("duration-days",{duration:e.duration}))+" ")]):e._e()])],1),a("section",{staticClass:"Form__fieldset"},[a("h4",{staticClass:"Form__fieldset__title"},[e._v(" "+e._s(e.$t("event-details"))+" ")]),a("FormField",{staticClass:"EventStep1__location",attrs:{name:"location",label:"location",errors:e.errors.location},on:{input:e.checkIsSavedEvent},model:{value:e.event.location,callback:function(t){e.$set(e.event,"location",t)},expression:"event.location"}}),a("FormField",{staticClass:"EventStep1__description",attrs:{name:"description",label:"description",type:"textarea",errors:e.errors.description},on:{input:e.checkIsSavedEvent},model:{value:e.event.description,callback:function(t){e.$set(e.event,"description",t)},expression:"event.description"}}),e.showIsBillable?a("div",{staticClass:"EventStep1__is-billable"},[a("FormField",{attrs:{name:"is_billable",label:"is-billable",type:"switch",errors:e.errors.is_billable},on:{change:e.checkIsSavedEvent},model:{value:e.event.is_billable,callback:function(t){e.$set(e.event,"is_billable",t)},expression:"event.is_billable"}}),a("div",{staticClass:"EventStep1__is-billable__help"},[a("i",{staticClass:"fas fa-arrow-right"}),e.event.is_billable?e._e():a("span",[e._v(" "+e._s(e.$t("is-not-billable-help"))+" ")]),e.event.is_billable?a("span",[e._v(" "+e._s(e.$t("is-billable-help"))+" ")]):e._e()])],1):e._e()],1),a("section",{staticClass:"Form__actions"},[a("button",{staticClass:"EventStep1__save-btn info",attrs:{type:"submit"}},[a("i",{staticClass:"fas fa-arrow-left"}),e._v(" "+e._s(e.$t("page-events.save-and-back-to-calendar"))+" ")]),a("button",{staticClass:"EventStep1__save-btn success",on:{click:e.saveAndNext}},[e._v(" "+e._s(e.$t("page-events.save-and-continue"))+" "),a("i",{staticClass:"fas fa-arrow-right"})])])])},Ta=[],ja=a("15fd"),Da={name:"EventStep1",components:{FormField:Te},props:{event:Object},data:function(){return{startDatepickerOptions:{format:"d MMMM yyyy",disabled:{from:null,to:null}},endDatepickerOptions:{format:"d MMMM yyyy",disabled:{from:null,to:null}},initialStartDate:null,duration:0,showIsBillable:"partial"===_.billingMode,errors:{title:null,start_date:null,end_date:null,location:null,description:null}}},mounted:function(){if(!this.event.id&&this.$route.query.startDate){var e=n()(this.$route.query.startDate).toDate();this.refreshDateFieldLimit({field:"start_date",newDate:e})}this.refreshDatesLimits()},watch:{event:"refreshDatesLimits"},methods:{refreshDatesLimits:function(){var e=this.event.start_date;e&&(this.initialStartDate=n()(e),this.endDatepickerOptions.disabled.to=n()(e).toDate()),this.calcDuration()},handleStartDateChange:function(e){var t=e.field,a=e.newDate,s=this.initialStartDate,i=this.event.end_date;if("start_date"===t&&i){var r=n()(a);if(s){var o=r.diff(s,"days");if(o){var l=n()(i);this.event.end_date=l.add(o,"days").toDate()}}this.initialStartDate=r}this.refreshDateFieldLimit({field:t,newDate:a})},refreshDateFieldLimit:function(e){var t=e.field,a=e.newDate;"start_date"===t&&(this.endDatepickerOptions.disabled.to=a),this.calcDuration(),this.checkIsSavedEvent()},calcDuration:function(){var e=this.event,t=e.start_date,a=e.end_date;t&&a&&(this.duration=n()(a).diff(t,"days")+1)},checkIsSavedEvent:function(){ma.dispatch("checkIsSaved",this.event)},saveAndBack:function(e){e.preventDefault(),this.save({gotoStep:!1})},saveAndNext:function(e){e.preventDefault(),this.save({gotoStep:2})},displayError:function(e){var t,a;this.$emit("error",e);var s=(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||{code:0,details:{}},i=s.code,n=s.details;400===i&&(this.errors=Object(v["a"])({},n))},save:function(e){var t=this;this.$emit("loading");var a=this.event.id,s=this.$route.meta.resource,i=this.$http.post,r=s;a&&(i=this.$http.put,r="".concat(s,"/").concat(a));var o=this.event,l=(o.user,o.beneficiaries,o.assignees,o.materials,Object(ja["a"])(o,["user","beneficiaries","assignees","materials"])),c=Object(v["a"])(Object(v["a"])({},l),{},{start_date:n()(this.event.start_date).startOf("day").format(Re),end_date:n()(this.event.end_date).endOf("day").format(Re)});i(r,c).then((function(a){var s=a.data,i=e.gotoStep;i?(ma.commit("setIsSaved",!0),t.$emit("updateEvent",s),t.$emit("gotoStep",i)):t.$router.push("/")})).catch(this.displayError)}}},Ma=Da,Fa=(a("313d"),Object(H["a"])(Ma,Ea,Ta,!1,null,null,null)),Sa=Fa.exports,xa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{staticClass:"Form EventStep2",attrs:{method:"POST"},on:{submit:e.saveAndBack}},[a("section",{staticClass:"Form__fieldset"},[a("h4",{staticClass:"Form__fieldset__title"},[e._v(" "+e._s(e.$t("page-events.event-beneficiaries"))+" ")]),a("MultipleItem",{attrs:{label:"beneficiary",field:"full_name","field-options":e.beneficiariesOptions,"initial-items-ids":e.beneficiariesIds},on:{itemsUpdated:e.updateItems}}),e.showBillingHelp?a("p",{staticClass:"EventStep2__help"},[a("i",{staticClass:"fas fa-info-circle"}),e._v(" "+e._s(e.$t("page-events.beneficiary-billing-help"))+" ")]):e._e()],1),a("section",{staticClass:"Form__actions"},[a("button",{staticClass:"EventStep2__save-btn info",attrs:{type:"submit"}},[a("i",{staticClass:"fas fa-arrow-left"}),e._v(" "+e._s(e.$t("page-events.save-and-back-to-calendar"))+" ")]),a("button",{staticClass:"EventStep2__save-btn success",on:{click:e.saveAndNext}},[e._v(" "+e._s(e.$t("page-events.save-and-continue"))+" "),a("i",{staticClass:"fas fa-arrow-right"})])])])},La=[],Oa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"MultipleItem"},[e._l(e.itemsIds,(function(t,s){return a("div",{key:t,staticClass:"MultipleItem__item FormField"},[a("label",{staticClass:"FormField__label"},[e._v(" "+e._s(e.$t(e.label))+" "+e._s(s+1)+" ")]),a("div",{staticClass:"MultipleItem__value-field"},[0===e.fieldOptions.length?a("span",{staticClass:"MultipleItem__value-field--loading"},[a("i",{staticClass:"fas fa-spin fa-spinner"})]):e._e(),e.fieldOptions.length>0&&!e.getItemLabel(t)?a("span",{staticClass:"MultipleItem__value-field--error"},[a("i",{staticClass:"fas fa-exclamation-triangle"}),e._v(" "+e._s(e.$t("item-not-found",{item:e.$t(e.label)}))+" ")]):a("span",[e._v(e._s(e.getItemLabel(t)))])]),a("button",{staticClass:"MultipleItem__item-action-btn danger",attrs:{title:e.$t("remove-item",{item:e.$t(e.label)})},on:{click:function(a){a.preventDefault(),e.removeItem(t)}}},[a("i",{staticClass:"fas fa-trash-alt"})])])})),e.askNewItem?a("div",{staticClass:"MultipleItem__item FormField"},[a("label",{staticClass:"FormField__label"},[e._v(" "+e._s(e.$t(e.label))+" "+e._s(e.itemsIds.length+1)+" ")]),a("VueSelect",{attrs:{options:e.selectableOptions},on:{input:e.insertNewItem},model:{value:e.newItem,callback:function(t){e.newItem=t},expression:"newItem"}}),a("button",{staticClass:"MultipleItem__item-action-btn warning",attrs:{title:e.$t("cancel-add-item",{item:e.$t(e.label)})},on:{click:e.cancelNewItem}},[a("i",{staticClass:"fas fa-ban"})])],1):e._e(),a("div",{staticClass:"MultipleItem__actions"},[e.askNewItem?e._e():a("button",{staticClass:"success",on:{click:e.startAddItem}},[a("i",{staticClass:"fas fa-plus"}),e._v(" "+e._s(e.$t("add-item",{item:e.$t(e.label)}))+" ")])])],2)},qa=[],Aa=a("4a7a"),Na=a.n(Aa),Pa={name:"MultipleItem",components:{VueSelect:Na.a},props:{label:String,field:String,fieldOptions:Array,initialItemsIds:Array},data:function(){var e={value:null,label:this.$t("please-choose")};return{itemsIds:Object(Ie["a"])(this.initialItemsIds)||[],askNewItem:!1,newItem:e,defaultItem:e}},computed:{selectableOptions:function(){var e=this;return this.fieldOptions.filter((function(t){return!e.itemsIds.includes(t.value)}))}},methods:{getItemLabel:function(e){var t=this.fieldOptions.find((function(t){return t.value===e}));return t?t.label:""},startAddItem:function(e){e.preventDefault(),this.askNewItem=!0},insertNewItem:function(){this.newItem&&this.newItem.value&&(this.itemsIds.push(this.newItem.value),this.askNewItem=!1,this.newItem=this.defaultItem,this.$emit("itemsUpdated",this.itemsIds))},cancelNewItem:function(e){e.preventDefault(),this.askNewItem=!1,this.newItem=this.defaultItem},removeItem:function(e){this.itemsIds=this.itemsIds.filter((function(t){return t!==e})),this.$emit("itemsUpdated",this.itemsIds)}}},Ia=Pa,Ba=(a("5f98"),Object(H["a"])(Ia,Oa,qa,!1,null,null,null)),Ra=Ba.exports,Ha={name:"EventStep2",components:{MultipleItem:Ra},props:["event"],data:function(){return{beneficiariesIds:this.event.beneficiaries.map((function(e){return e.id})),beneficiariesOptions:[],showBillingHelp:"none"!==_.billingMode,errors:{}}},mounted:function(){this.getEntities(),ma.commit("setIsSaved",!0)},methods:{getEntities:function(){var e=this;this.$emit("loading");var t={tags:[_.beneficiaryTagName]};this.$http.get("persons",{params:t}).then((function(t){var a=t.data;e.beneficiariesOptions=k(a.data,["first_name","last_name","−","company.legal_name","−","locality"]),e.$emit("stopLoading")})).catch(this.displayError)},updateItems:function(e){this.beneficiariesIds=e;var t=this.event.beneficiaries.map((function(e){return e.id})),a=e.filter((function(e){return!t.includes(e)})).concat(t.filter((function(t){return!e.includes(t)})));ma.commit("setIsSaved",0===a.length)},saveAndBack:function(e){e.preventDefault(),this.save({gotoStep:!1})},saveAndNext:function(e){e.preventDefault(),this.save({gotoStep:3})},displayError:function(e){var t,a;this.$emit("error",e);var s=(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||{code:0,details:{}},i=s.code,n=s.details;400===i&&(this.errors=Object(v["a"])({},n))},save:function(e){var t=this;this.$emit("loading");var a=this.event.id,s=this.$route.meta.resource,i={beneficiaries:this.beneficiariesIds};this.$http.put("".concat(s,"/").concat(a),i).then((function(a){var s=a.data,i=e.gotoStep;i?(ma.commit("setIsSaved",!0),t.$emit("updateEvent",s),t.$emit("gotoStep",i)):t.$router.push("/")})).catch(this.displayError)}}},za=Ha,Ua=(a("3bec"),Object(H["a"])(za,xa,La,!1,null,null,null)),Va=Ua.exports,Qa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{staticClass:"Form EventStep3",attrs:{method:"POST"},on:{submit:e.saveAndBack}},[a("section",{staticClass:"Form__fieldset"},[a("h4",{staticClass:"Form__fieldset__title"},[e._v(" "+e._s(e.$t("page-events.event-technicians"))+" ")]),a("MultipleItem",{attrs:{label:"technician",field:"full_name","field-options":e.assigneesOptions,"initial-items-ids":e.assigneesIds},on:{itemsUpdated:e.updateItems}})],1),a("section",{staticClass:"Form__actions"},[a("button",{staticClass:"EventStep3__save-btn info",attrs:{type:"submit"}},[a("i",{staticClass:"fas fa-arrow-left"}),e._v(" "+e._s(e.$t("page-events.save-and-back-to-calendar"))+" ")]),a("button",{staticClass:"EventStep3__save-btn success",on:{click:e.saveAndNext}},[e._v(" "+e._s(e.$t("page-events.save-and-continue"))+" "),a("i",{staticClass:"fas fa-arrow-right"})])])])},Ga=[],Ya={name:"EventStep3",components:{MultipleItem:Ra},props:["event"],data:function(){return{assigneesIds:this.event.assignees.map((function(e){return e.id})),assigneesOptions:[],errors:{}}},mounted:function(){this.getEntities(),ma.commit("setIsSaved",!0)},methods:{getEntities:function(){var e=this;this.$emit("loading");var t={tags:[_.technicianTagName]};this.$http.get("persons",{params:t}).then((function(t){var a=t.data;e.assigneesOptions=k(a.data,["first_name","last_name","−","phone"]),e.$emit("stopLoading")})).catch(this.displayError)},updateItems:function(e){this.assigneesIds=e;var t=this.event.beneficiaries.map((function(e){return e.id})),a=e.filter((function(e){return!t.includes(e)})).concat(t.filter((function(t){return!e.includes(t)})));ma.commit("setIsSaved",0===a.length)},saveAndBack:function(e){e.preventDefault(),this.save({gotoStep:!1})},saveAndNext:function(e){e.preventDefault(),this.save({gotoStep:4})},displayError:function(e){var t,a;this.$emit("error",e);var s=(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||{code:0,details:{}},i=s.code,n=s.details;400===i&&(this.errors=Object(v["a"])({},n))},save:function(e){var t=this;this.$emit("loading");var a=this.event.id,s=this.$route.meta.resource,i={assignees:this.assigneesIds};this.$http.put("".concat(s,"/").concat(a),i).then((function(a){var s=a.data,i=e.gotoStep;i?(ma.commit("setIsSaved",!0),t.$emit("updateEvent",s),t.$emit("gotoStep",i)):t.$router.push("/")})).catch(this.displayError)}}},Wa=Ya,Ja=(a("02d6"),Object(H["a"])(Wa,Qa,Ga,!1,null,null,null)),Ka=Ja.exports,Xa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{staticClass:"Form EventStep4",attrs:{method:"POST"},on:{submit:e.saveAndBack}},[a("section",{staticClass:"Form__fieldset"},[a("MaterialsList",{attrs:{eventId:e.event.id,initialList:e.event.materials,eventIsBillable:e.event.is_billable},on:{change:e.handleChange}})],1),a("section",{staticClass:"Form__actions"},[a("button",{staticClass:"EventStep4__save-btn info",attrs:{type:"submit"}},[a("i",{staticClass:"fas fa-arrow-left"}),e._v(" "+e._s(e.$t("page-events.save-and-back-to-calendar"))+" ")]),a("button",{staticClass:"EventStep4__save-btn success",on:{click:e.saveAndNext}},[e._v(" "+e._s(e.$t("page-events.save-and-continue"))+" "),a("i",{staticClass:"fas fa-arrow-right"})])])])},Za=[],es=a("b012"),ts=a.n(es),as=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"MaterialsList"},[a("header",{staticClass:"MaterialsList__header"},[a("MaterialsFilter",{attrs:{baseRoute:"/events/"+e.eventId},on:{change:e.refreshTableAndPagination}}),a("div",{staticClass:"MaterialsList__header__extra-filters"},[a("div",{staticClass:"MaterialsList__header__extra-filters__filter"},[e._v(" "+e._s(e.$t("page-events.display-only-selected-materials"))+" "),a("SwitchToggle",{attrs:{value:e.showSelectedOnly},on:{input:e.handleToggleSelectedOnly}})],1)])],1),e.error?a("div",{staticClass:"MaterialsList__error"},[e._v(e._s(e.error))]):e._e(),a("div",{staticClass:"MaterialsList__main"},[e.isLoading?a("div",{staticClass:"MaterialsList__loading"},[a("i",{staticClass:"fas fa-circle-notch fa-spin fa-2x"}),e._v(" "+e._s(e.$t("help-loading"))+" ")]):e._e(),a("v-server-table",{ref:"DataTable",attrs:{name:"materialsListTable",columns:e.columns,options:e.options},scopedSlots:e._u([{key:"qty",fn:function(t){return a("div",{},[a("span",{key:"qty-"+t.row.id+"-"+e.renderId},[e._v(" "+e._s(e.getQuantity(t.row.id)>0?e.getQuantity(t.row.id)+" ×":"")+" ")])])}},{key:"remaining_quantity",fn:function(t){return a("div",{},[a("span",{key:"remain-qty-"+t.row.id+"-"+e.renderId,staticClass:"MaterialsList__remaining",class:{"MaterialsList__remaining--zero":t.row.remaining_quantity===e.getQuantity(t.row.id),"MaterialsList__remaining--empty":t.row.remaining_quantity<e.getQuantity(t.row.id)}},[e._v(" "+e._s(e.$t("remaining-count",{count:e.getRemainingQuantity(t.row)}))+" ")])])}},{key:"price",fn:function(t){return a("div",{},[e._v(" "+e._s(e.formatAmount(t.row.rental_price))+" "),a("i",{staticClass:"fas fa-times"})])}},{key:"quantity",fn:function(t){return a("Quantity",{key:"quantities-"+t.row.id+"-"+e.renderId,attrs:{materialId:t.row.id,initialQuantity:e.getQuantity(t.row.id),maxQuantity:t.row.remaining_quantity},on:{decrement:function(a){return e.decrement(t.row.id)},setQuantity:e.setQuantity,increment:function(a){return e.increment(t.row.id)}}})}},{key:"amount",fn:function(t){return a("div",{},[a("span",{key:"amount-"+t.row.id+"-"+e.renderId},[e._v(" "+e._s(e.formatAmount(t.row.rental_price*e.getQuantity(t.row.id)))+" ")])])}},{key:"actions",fn:function(t){return a("div",{},[a("button",{directives:[{name:"show",rawName:"v-show",value:e.getQuantity(t.row.id)>0,expression:"getQuantity(material.row.id) > 0"}],key:"clear-"+t.row.id+"-"+e.renderId,staticClass:"warning",on:{click:function(a){return e.setQuantity(t.row.id,0)}}},[a("i",{staticClass:"fas fa-backspace"})])])}}])})],1)])},ss=[],is=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"MaterialsFilters"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.filters.park,expression:"filters.park"}],staticClass:"MaterialsFilters__park",on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.filters,"park",t.target.multiple?a:a[0])},e.changePark]}},[a("option",{attrs:{value:""}},[e._v(" "+e._s(e.$t("all-parks"))+" ")]),e._l(e.parks,(function(t){return a("option",{key:t.id,domProps:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])}))],2),a("select",{directives:[{name:"model",rawName:"v-model",value:e.filters.category,expression:"filters.category"}],staticClass:"MaterialsFilters__category",on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.filters,"category",t.target.multiple?a:a[0])},e.changeCategory]}},[a("option",{attrs:{value:""}},[e._v(" "+e._s(e.$t("all-categories"))+" ")]),e._l(e.categories,(function(t){return a("option",{key:t.id,domProps:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])}))],2),a("select",{directives:[{name:"model",rawName:"v-model",value:e.filters.subCategory,expression:"filters.subCategory"}],staticClass:"MaterialsFilters__sub-category",attrs:{disabled:0===e.selectedCategory.sub_categories.length},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.filters,"subCategory",t.target.multiple?a:a[0])},e.changeSubCategory]}},[a("option",{attrs:{value:""}},[e._v(" "+e._s(e.$t("all-sub-categories"))+" ")]),e._l(e.selectedCategory.sub_categories,(function(t){return a("option",{key:t.id,domProps:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])}))],2),a("VueSelect",{staticClass:"MaterialsFilters__tags",attrs:{options:e.$store.getters["tags/options"],placeholder:e.$t("tags"),multiple:""},on:{input:e.setQueryFilters},model:{value:e.filters.tags,callback:function(t){e.$set(e.filters,"tags",t)},expression:"filters.tags"}}),a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("page-materials.clear-filters"),expression:"$t('page-materials.clear-filters')"}],attrs:{disabled:e.isFilterEmpty},on:{click:e.clearFilters}},[a("i",{staticClass:"fas fa-backspace"})])],1)},ns=[],rs={name:"MaterialsFilters",components:{VueSelect:Na.a},props:{baseRoute:String},data:function(){return{filters:{park:this.$route.query.park||"",category:this.$route.query.category||"",subCategory:this.$route.query.subCategory||"",tags:[]},selectedCategory:{sub_categories:[]}}},computed:{parks:function(){return S.state.parks.list},categories:function(){return S.state.categories.list},isFilterEmpty:function(){return""===this.filters.park&&""===this.filters.category&&""===this.filters.subCategory&&0===this.filters.tags.length}},mounted:function(){S.dispatch("parks/fetch"),S.dispatch("categories/fetch"),S.dispatch("tags/fetch")},methods:{changePark:function(e){this.filters.park=parseInt(e.currentTarget.value,10)||"",this.setQueryFilters()},changeCategory:function(e){var t=parseInt(e.currentTarget.value,10)||"";this.selectedCategory=t?this.categories.find((function(e){return e.id===t})):{sub_categories:[]},this.filters.category=t,this.setQueryFilters()},changeSubCategory:function(e){this.filters.subCategory=parseInt(e.currentTarget.value,10)||"",this.setQueryFilters()},clearFilters:function(){this.selectedCategory={sub_categories:[]},this.filters={park:"",category:"",subCategory:"",tags:[]},this.setQueryFilters()},setQueryFilters:function(){var e={},t=this.filters,a=t.park,s=t.category,i=t.subCategory,n=t.tags;a&&(e.park=a),s&&(e.category=s),i&&(e.subCategory=i),n.length>0&&(e.tags=JSON.stringify(n.map((function(e){return e.label})))),this.$router.push({path:this.baseRoute,query:e}),this.$emit("change")}}},os=rs,ls=(a("3cc7"),Object(H["a"])(os,is,ns,!1,null,null,null)),cs=ls.exports,us=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"MaterialsListQuantity"},[a("button",{class:{info:e.quantity>0},attrs:{disabled:0===e.quantity},on:{click:function(t){return e.$emit("decrement")}}},[a("i",{staticClass:"fas fa-minus"})]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.quantity,expression:"quantity"}],staticClass:"MaterialsListQuantity__number",domProps:{value:e.quantity},on:{input:[function(t){t.target.composing||(e.quantity=t.target.value)},e.updateQuantityDebounced],focus:function(e){return e.target.select()}}}),a("button",{class:{info:e.quantity<e.maxQuantity},on:{click:function(t){return e.$emit("increment")}}},[a("i",{staticClass:"fas fa-plus"})])])},ds=[],ms={name:"MaterialsListQuantity",props:{materialId:Number,initialQuantity:Number,maxQuantity:Number},data:function(e){return{quantity:e.initialQuantity}},methods:{updateQuantityDebounced:ts()((function(){this.$emit("setQuantity",this.materialId,this.quantity)}),300)}},ps=ms,fs=(a("4def"),Object(H["a"])(ps,us,ds,!1,null,null,null)),hs=fs.exports,_s=new C["a"].Store({state:{quantities:{}},mutations:{init:function(e,t){var a={};t.forEach((function(e){a[e.id]=e.pivot.quantity})),e.quantities=a},setQuantity:function(e,t){var a=t.id,s=t.quantity;e.quantities[a]=s,e.quantities[a]||delete e.quantities[a]},increment:function(e,t){void 0===e.quantities[t]?e.quantities[t]=1:e.quantities[t]+=1},decrement:function(e,t){e.quantities[t]&&(e.quantities[t]-=1)}},getters:{getQuantity:function(e){return function(t){return e.quantities[t]||0}}}}),vs={name:"MaterialsList",components:{MaterialsFilter:cs,SwitchToggle:Ce,Quantity:hs},props:{eventId:Number,initialList:Array,eventIsBillable:Boolean},data:function(){var e=this,t=["qty","reference","name","remaining_quantity","price","quantity","amount","actions"].filter((function(t){return!("none"===_.billingMode||!e.eventIsBillable)||!["price","amount"].includes(t)}));return{error:null,renderId:1,showSelectedOnly:this.initialList.length>0,isLoading:!0,columns:t,options:{columnsDropdown:!1,preserveState:!1,orderBy:{column:"reference",ascending:!0},initialPage:this.$route.query.page||1,sortable:["reference","name"],columnsClasses:{qty:"MaterialsList__qty",reference:"MaterialsList__ref",name:"MaterialsList__name",remaining_quantity:"MaterialsList__remaining",price:"MaterialsList__price",quantity:"MaterialsList__quantity",amount:"MaterialsList__amount",actions:"MaterialsList__actions"},requestFunction:function(t){e.isLoading=!0;var a=e.getFilters(),s=Object(v["a"])(Object(v["a"])({whileEvent:e.eventId},t),a);return e.$http.get("materials",{params:s}).then((function(t){return e.isLoading=!1,t})).catch(e.showError)}}}},created:function(){_s.commit("init",this.initialList)},methods:{getFilters:function(){var e={};return this.$route.query.park&&(e.park=this.$route.query.park),this.$route.query.category&&(e.category=this.$route.query.category),this.$route.query.subCategory&&(e.subCategory=this.$route.query.subCategory),this.$route.query.tags&&(e.tags=JSON.parse(this.$route.query.tags)),this.showSelectedOnly&&(e.onlySelectedInEvent=this.eventId),e},handleToggleSelectedOnly:function(e){this.showSelectedOnly=e,this.isLoading=!0,this.$refs.DataTable.refresh()},refreshTable:function(){this.$refs.DataTable.getData()},refreshTableAndPagination:function(){this.error=!1,this.isLoading=!0,this.$refs.DataTable.refresh()},getQuantity:function(e){return _s.getters.getQuantity(e)},getRemainingQuantity:function(e){return e.remaining_quantity-_s.getters.getQuantity(e.id)},setQuantity:function(e,t){var a=parseInt(t,10)||0;_s.commit("setQuantity",{id:e,quantity:a}),this.handleQuantitiesChange()},decrement:function(e){_s.commit("decrement",e),this.handleQuantitiesChange()},increment:function(e){_s.commit("increment",e),this.handleQuantitiesChange()},handleQuantitiesChange:function(){this.renderId+=1;var e=Object.keys(_s.state.quantities).map((function(e){return{id:parseInt(e,10),quantity:_s.getters.getQuantity(e)}}));this.$emit("change",e)},formatAmount:function(e){return ct(e)},showError:function(e){this.isLoading=!1,this.error=e.message}}},gs=vs,bs=(a("d0bc"),Object(H["a"])(gs,as,ss,!1,null,null,null)),ys=bs.exports,Cs={name:"EventStep4",components:{MaterialsList:ys},props:{event:Object},data:function(){return{materials:this.event.materials.map((function(e){var t=e.id,a=e.pivot;return{id:t,quantity:a.quantity}}))}},methods:{handleChange:function(e){this.materials=e;var t=this.event.materials.map((function(e){var t=e.id,a=e.pivot;return{id:t,quantity:a.quantity}})),a=e.filter((function(e){var a=e.id,s=e.quantity;return 0!==s&&!t.some((function(e){var t=e.id,i=e.quantity;return a===t&&s===i}))})).concat(t.filter((function(t){var a=t.id,s=t.quantity;return!e.some((function(e){var t=e.id,i=e.quantity;return a===t&&s===i}))}))),s=a.length>0;ma.commit("setIsSaved",!s),s&&this.debouncedSave()},saveAndBack:function(e){e.preventDefault(),this.save({gotoStep:!1})},saveAndNext:function(e){e.preventDefault(),this.save({gotoStep:5})},displayError:function(e){var t,a;this.$emit("error",e);var s=(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||{code:0,details:{}},i=s.code,n=s.details;400===i&&(this.errors=Object(v["a"])({},n))},debouncedSave:Object(es["debounce"])((function(){this.save({gotoStep:4})}),ze),save:function(e){var t=this;this.$emit("loading");var a=this.event.id,s=this.$route.meta.resource,i=this.materials.filter((function(e){var t=e.quantity;return t>0}));this.$http.put("".concat(s,"/").concat(a),{materials:i}).then((function(a){var s=a.data,i=e.gotoStep;i?(ma.commit("setIsSaved",!0),t.$emit("updateEvent",s),t.$emit("gotoStep",i)):t.$router.push("/")})).catch(this.displayError)}}},$s=Cs,ws=(a("f8c6"),Object(H["a"])($s,Xa,Za,!1,null,null,null)),ks=ws.exports,Es=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"EventStep5"},[a("EventOverview",{attrs:{event:e.event}}),e.event.materials.length>0?a("section",{staticClass:"EventStep5__confirmation"},[a("h3",{staticClass:"EventStep5__confirmation__title"},[e._v(" "+e._s(e.$t("page-events.event-confirmation"))+" ")]),a("div",{staticClass:"EventStep5__confirmation__help",class:{"EventStep5__confirmation__help--confirmed":e.event.is_confirmed}},[e.event.is_confirmed?e._e():a("p",[e.isConfirming?e._e():a("i",{staticClass:"fas fa-hourglass-half"}),e._v(" "+e._s(e.$t("page-events.event-not-confirmed-help"))+" ")]),e.event.is_confirmed?a("p",[e.isConfirming?e._e():a("i",{staticClass:"fas fa-check"}),e._v(" "+e._s(e.$t("page-events.event-confirmed-help"))+" ")]):e._e()]),a("div",{staticClass:"EventStep5__confirmation__actions"},[e.event.is_confirmed?e._e():a("button",{staticClass:"success",on:{click:e.confirmEvent}},[e.isConfirming?a("i",{staticClass:"fas fa-circle-notch fa-spin"}):e._e(),e.isConfirming?e._e():a("i",{staticClass:"fas fa-check"}),e._v(" "+e._s(e.$t("set-event-confirmed"))+" ")]),e.event.is_confirmed?a("button",{staticClass:"warning",on:{click:e.unconfirmEvent}},[e.isConfirming?a("i",{staticClass:"fas fa-circle-notch fa-spin"}):e._e(),e.isConfirming?e._e():a("i",{staticClass:"fas fa-hourglass-half"}),e._v(" "+e._s(e.$t("set-back-event-pending"))+" ")]):e._e(),e.event.beneficiaries.length>0?a("a",{staticClass:"EventStep5__confirmation__actions__print",attrs:{href:e.eventSummaryPdfUrl,target:"_blank"}},[a("i",{staticClass:"fas fa-print"}),e._v(" "+e._s(e.$t("print-summary"))+" ")]):e._e()])]):e._e(),a("section",[a("router-link",{staticClass:"EventStep5__back-btn info",attrs:{to:"/",tag:"button",exact:""}},[a("i",{staticClass:"fas fa-arrow-left"}),e._v(" "+e._s(e.$t("page-events.back-to-calendar"))+" ")])],1)],1)},Ts=[],js=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"EventOverview"},[a("div",{staticClass:"EventOverview__header"},[a("h1",{staticClass:"EventOverview__title"},[e._v(e._s(e.event.title))]),a("h2",{staticClass:"EventOverview__dates-location"},[a("i",{staticClass:"fas fa-map-marker-alt"}),e.event.location?a("span",[e._v(" "+e._s(e.$t("in"))+" "+e._s(e.event.location)+", ")]):e._e(),e._v(" "+e._s(e.$t("from-date-to-date",e.fromToDates))+" ")])]),e.event.description?a("p",{staticClass:"EventOverview__description"},[a("i",{staticClass:"fas fa-clipboard"}),e._v(" "+e._s(e.event.description)+" ")]):e._e(),a("div",{staticClass:"EventOverview__main"},[e.event.beneficiaries.length>0?a("section",{staticClass:"EventOverview__section"},[a("dl",{staticClass:"EventOverview__info EventOverview__info--vertical"},[a("dt",{staticClass:"EventOverview__info__term"},[a("i",{staticClass:"fas fa-address-book"}),e._v(" "+e._s(e.$t("page-events.event-beneficiaries"))+" ")]),a("dd",{staticClass:"EventOverview__info__value"},[a("ul",{staticClass:"EventOverview__info__list"},e._l(e.event.beneficiaries,(function(t){return a("li",{key:t.id,staticClass:"EventOverview__info__list-item"},[a("router-link",{attrs:{to:"/beneficiaries/"+t.id,title:e.$t("action-edit"),tag:"a"}},[e._v(" "+e._s(t.full_name)+" ")]),t.company?a("router-link",{attrs:{to:"/companies/"+t.company_id,title:e.$t("action-edit"),tag:"a"}},[e._v(" ("+e._s(t.company.legal_name)+") ")]):e._e()],1)})),0)])])]):e._e(),e.event.assignees.length>0?a("section",{staticClass:"EventOverview__section"},[a("dl",{staticClass:"EventOverview__info EventOverview__info--vertical"},[a("dt",{staticClass:"EventOverview__info__term"},[a("i",{staticClass:"fas fa-people-carry"}),e._v(" "+e._s(e.$t("page-events.event-technicians"))+" ")]),a("dd",{staticClass:"EventOverview__info__value"},[a("ul",{staticClass:"EventOverview__info__list"},e._l(e.event.assignees,(function(t){return a("li",{key:t.id,staticClass:"EventOverview__info__list-item"},[a("router-link",{key:t.id,staticClass:"EventOverview__info__link",attrs:{to:"/technicians/"+t.id,tag:"a",title:e.$t("action-edit")}},[e._v(" "+e._s(t.full_name)+" ")])],1)})),0)])])]):e._e(),a("section",{staticClass:"EventOverview__section"},[a("dl",{staticClass:"EventOverview__info"},[a("dt",{staticClass:"EventOverview__info__term"},[a("i",{staticClass:"far fa-clock"}),e._v(" "+e._s(e.$t("duration"))+" ")]),a("dd",{staticClass:"EventOverview__info__value"},[e._v(" "+e._s(e.duration)+" "+e._s(e.$t("days"))+" ")])])])]),a("div",{staticClass:"EventOverview__materials"},[a("h3",{staticClass:"EventOverview__materials__title"},[a("i",{staticClass:"fas fa-box"}),e._v(" "+e._s(e.$t("page-events.event-materials"))+" ")]),e.hasMaterials?a("EventMaterials",{attrs:{materials:e.event.materials,start:e.startDate,end:e.endDate,withRentalPrices:e.showBilling&&e.event.is_billable,hideDetails:e.showBilling&&e.event.is_billable}}):e._e()],1),e.showBilling&&e.event.is_billable?a("h3",{staticClass:"EventOverview__billing-title"},[a("i",{staticClass:"fas fa-file-invoice-dollar"}),e._v(" "+e._s(e.$t("billing"))+" ")]):e._e(),a("div",{staticClass:"EventOverview__billing"},[e.hasMaterials&&e.showBilling&&e.event.is_billable?a("EventBilling",{attrs:{beneficiaries:e.event.beneficiaries,lastBill:e.lastBill,materials:e.event.materials,start:e.startDate,end:e.endDate,loading:e.billLoading},on:{discountRateChange:e.handleChangeDiscountRate,createBill:e.handleCreateBill}}):e._e(),e.hasMaterials?a("EventTotals",{attrs:{materials:e.event.materials,withRentalPrices:e.showBilling&&e.event.is_billable,discountRate:e.discountRate,start:e.startDate,end:e.endDate}}):e._e(),e.hasMaterials?e._e():a("p",{staticClass:"EventOverview__materials__empty"},[a("i",{staticClass:"fas fa-exclamation-triangle"}),e._v(" "+e._s(e.$t("page-events.warning-no-material"))+" ")])],1),a("div",{staticClass:"EventOverview__missing-materials"},[a("EventMissingMaterials",{attrs:{eventId:e.event.id}})],1)])},Ds=[],Ms={name:"EventOverview",components:{EventMaterials:ht,EventMissingMaterials:Ct,EventBilling:It,EventTotals:Vt},props:{event:Object},data:function(){var e=Object(it["a"])(this.event.bills,1),t=e[0],a=t?t.discount_rate:0;return{showBilling:"none"!==_.billingMode,lastBill:t?Object(v["a"])(Object(v["a"])({},t),{},{date:n()(t.date)}):null,billLoading:!1,discountRate:a}},computed:{startDate:function(){return n()(this.event.start_date)},endDate:function(){return n()(this.event.end_date)},hasMaterials:function(){return this.event.materials.length>0},fromToDates:function(){return{from:this.startDate.format("L"),to:this.endDate.format("L")}},duration:function(){var e=this.event,t=e.start_date,a=e.end_date;return t&&a?n()(a).diff(t,"days")+1:0}},methods:{handleChangeDiscountRate:function(e){this.discountRate=e},handleCreateBill:function(e){var t=this;this.billLoading=!0;var a=this.event.id;this.$http.post("events/".concat(a,"/bill"),{discountRate:e}).then((function(e){var a=e.data;t.lastBill=Object(v["a"])(Object(v["a"])({},a),{},{date:n()(a.date)})})).catch(this.handleError).finally((function(){t.billLoading=!1}))}}},Fs=Ms,Ss=(a("6aae"),Object(H["a"])(Fs,js,Ds,!1,null,null,null)),xs=Ss.exports,Ls={name:"EventStep5",components:{EventOverview:xs},props:{event:Object},data:function(){return{isConfirming:!1}},computed:{eventSummaryPdfUrl:function(){var e=_.baseUrl,t=this.event||{id:null},a=t.id;return"".concat(e,"/events/").concat(a,"/pdf")}},methods:{confirmEvent:function(){this.setEventConfirmation(!0)},unconfirmEvent:function(){this.setEventConfirmation(!1)},printEvent:function(){console.log("TODO: PRINT EVENT")},setEventConfirmation:function(e){var t=this,a=this.$props.event.id,s="".concat(this.$route.meta.resource,"/").concat(a);this.isConfirming=!0,this.$http.put(s,{id:a,is_confirmed:e}).then((function(e){var a=e.data;t.$emit("updateEvent",a)})).catch((function(e){t.$emit("error",e)})).finally((function(){t.isConfirming=!1}))}}},Os=Ls,qs=(a("95a4"),Object(H["a"])(Os,Es,Ts,!1,null,null,null)),As=qs.exports,Ns={name:"Event",components:{Help:de,Breadcrumb:ga,MiniSummary:ka,EventStep1:Sa,EventStep2:Va,EventStep3:Ka,EventStep4:ks,EventStep5:As},data:function(){return{help:"page-events.help-edit",error:null,isLoading:!1,steps:[{id:1,name:this.$t("page-events.event-informations"),fields:["title","start_date","end_date"]},{id:2,name:this.$t("page-events.event-beneficiaries"),fields:["beneficiaries"]},{id:3,name:this.$t("page-events.event-technicians"),fields:["assignees"]},{id:4,name:this.$t("page-events.event-materials"),fields:["materials"]},{id:5,name:this.$t("page-events.event-summary"),fields:["none"]}],currentStep:1,event:{id:this.$route.params.id||null,title:"",start_date:this.$route.query.startDate||"",end_date:"",location:"",description:"",is_confirmed:!1,user_id:S.state.user.id,is_billable:!0,beneficiaries:[],technicians:[],materials:[]}}},mounted:function(){this.getEventData(),ma.commit("reset")},methods:{getEventData:function(){var e=this,t=this.event.id;if(t&&"new"!==t){this.startLoading();var a=this.$route.meta.resource;this.$http.get("".concat(a,"/").concat(t)).then((function(t){var a=t.data;e.setEventData(a,{from:"get"}),e.stopLoading()})).catch(this.displayError)}},setEventData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{from:"save"};"get"===t.from?this.help="page-events.help-edit":this.help={type:"success",text:"page-events.saved"},this.error=null,this.isLoading=!1,this.event=e,S.commit("setPageSubTitle",this.event.title),ma.commit("init",this.event)},openStep:function(e){this.currentStep=e},startLoading:function(){this.isLoading=!0},stopLoading:function(){this.isLoading=!1},displayError:function(e){this.error=e,this.isLoading=!1}}},Ps=Ns,Is=(a("b0bc"),Object(H["a"])(Ps,ua,da,!1,null,null,null)),Bs=Is.exports,Rs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content Users"},[a("div",{staticClass:"content__header header-page"},[a("div",{staticClass:"header-page__help"},[a("Help",{attrs:{message:e.help,error:e.error,isLoading:e.isLoading}})],1),a("div",{staticClass:"header-page__actions"},[a("router-link",{staticClass:"Users__create success",attrs:{to:"/users/new",tag:"button"}},[a("i",{staticClass:"fas fa-user-plus"}),e._v(" "+e._s(e.$t("page-users.action-add"))+" ")])],1)]),a("div",{staticClass:"content__main-view"},[a("v-server-table",{ref:"DataTable",attrs:{name:"UsersTable",columns:e.columns,options:e.options},scopedSlots:e._u([{key:"pseudo",fn:function(t){return a("div",{},[a("i",{staticClass:"fas",class:t.row.id===e.currentUserId?"fa-user-circle":"fa-user"}),e._v(" "+e._s(t.row.pseudo)+" ")])}},{key:"full_name",fn:function(t){return a("div",{},[t.row.person?a("span",[e._v(" "+e._s(t.row.person.first_name)+" "+e._s(t.row.person.last_name)+" ")]):a("span",{staticClass:"Users__no-profile"},[e._v(" "+e._s(e.$t("page-users.profile-missing-or-deleted"))+" ")])])}},{key:"group_id",fn:function(t){return a("div",{},[e._v(" "+e._s(e.$t(t.row.group_id))+" ")])}},{key:"email",fn:function(t){return a("div",{},[t.row.id!==e.currentUserId?a("a",{attrs:{href:"mailto:"+t.row.email}},[e._v(" "+e._s(t.row.email)+" ")]):a("span",[e._v(e._s(t.row.email))])])}},{key:"phone",fn:function(t){return a("div",{},[t.row.person?a("span",[e._v(" "+e._s(t.row.person.phone)+" ")]):e._e()])}},{key:"address",fn:function(t){return a("div",{},[e._v(" "+e._s(t.row.person.street)),a("br"),e._v(" "+e._s(t.row.person.postal_code)+" "+e._s(t.row.person.locality)+" ")])}},{key:"actions",fn:function(t){return a("div",{staticClass:"Users__actions"},[t.row.id===e.currentUserId?a("div",[a("router-link",{staticClass:"info",attrs:{to:"/profile",tag:"button"}},[a("i",{staticClass:"fas fa-edit"}),e._v(" "+e._s(e.$t("your-profile"))+" ")])],1):a("div",[e.isTrashDisplayed?e._e():a("router-link",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("action-edit"),expression:"$t('action-edit')"}],staticClass:"item-actions__button info",attrs:{to:"/users/"+t.row.id,tag:"button"}},[a("i",{staticClass:"fas fa-edit"})]),e.isTrashDisplayed||"admin"===t.row.group_id?e._e():a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("action-trash"),expression:"$t('action-trash')"}],staticClass:"item-actions__button warning",on:{click:function(a){return e.deleteUser(t.row.id)}}},[a("i",{staticClass:"fas fa-trash"})]),e.isTrashDisplayed?a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("action-restore"),expression:"$t('action-restore')"}],staticClass:"item-actions__button info",on:{click:function(a){return e.restoreUser(t.row.id)}}},[a("i",{staticClass:"fas fa-trash-restore"})]):e._e(),e.isTrashDisplayed&&"admin"!==t.row.group_id?a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("action-delete"),expression:"$t('action-delete')"}],staticClass:"item-actions__button danger",on:{click:function(a){return e.deleteUser(t.row.id)}}},[a("i",{staticClass:"fas fa-trash-alt"})]):e._e()],1)])}}])})],1),a("div",{staticClass:"content__footer"},[a("button",{staticClass:"Users__show-trashed",class:e.isTrashDisplayed?"info":"warning",on:{click:function(t){return e.showTrashed()}}},[e.isTrashDisplayed?e._e():a("span",[a("i",{staticClass:"fas fa-trash"}),e._v(" "+e._s(e.$t("open-trash-bin"))+" ")]),e.isTrashDisplayed?a("span",[a("i",{staticClass:"fas fa-eye"}),e._v(" "+e._s(e.$t("display-not-deleted-items"))+" ")]):e._e()])])])},Hs=[],zs={name:"Users",components:{Help:de},data:function(){var e=this;return{help:"page-users.help",error:null,isLoading:!1,isDisplayTrashed:!1,isTrashDisplayed:!1,columns:["pseudo","full_name","group_id","email","phone","address","actions"],options:{columnsDropdown:!0,preserveState:!0,orderBy:{column:"pseudo",ascending:!0},initialPage:this.$route.query.page||1,sortable:["pseudo","group_id","email"],columnsDisplay:{address:"mobile"},headings:{pseudo:this.$t("pseudo"),full_name:this.$t("name"),group_id:this.$t("group"),email:this.$t("email"),phone:this.$t("phone"),address:this.$t("address"),actions:""},columnsClasses:{pseudo:"Users__pseudo",full_name:"Users__name",group_id:"Users__group",email:"Users__email",phone:"Users__phone",address:"Users__address"},requestFunction:function(t){e.error=null,e.isLoading=!0;var a=Object(v["a"])(Object(v["a"])({},t),{},{deleted:e.isDisplayTrashed?"1":"0"});return e.$http.get(e.$route.meta.resource,{params:a}).catch(e.showError).finally((function(){e.isTrashDisplayed=e.isDisplayTrashed,e.isLoading=!1}))}}}},computed:{currentUserId:function(){return S.state.user.id}},methods:{deleteUser:function(e){var t=this,a=!this.isTrashDisplayed;We.ConfirmDelete(this.$t,"users",a).then((function(a){a.value&&(t.error=null,t.isLoading=!0,t.$http.delete("".concat(t.$route.meta.resource,"/").concat(e)).then(t.refreshTable).catch(t.showError))}))},restoreUser:function(e){var t=this;We.ConfirmRestore(this.$t,"users").then((function(a){a.value&&(t.error=null,t.isLoading=!0,t.$http.put("".concat(t.$route.meta.resource,"/restore/").concat(e)).then(t.refreshTable).catch(t.showError))}))},refreshTable:function(){this.help="page-users.help",this.error=null,this.isLoading=!0,this.$refs.DataTable.refresh()},showTrashed:function(){this.isDisplayTrashed=!this.isDisplayTrashed,this.refreshTable()},showError:function(e){this.error=e,this.isLoading=!1}}},Us=zs,Vs=(a("235b"),Object(H["a"])(Us,Rs,Hs,!1,null,null,null)),Qs=Vs.exports,Gs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"content__main-view"},[a("div",{staticClass:"User"},[a("form",{staticClass:"Form",attrs:{method:"POST"},on:{submit:e.saveUser}},[a("section",{staticClass:"Form__fieldset"},[a("h4",{staticClass:"Form__fieldset__title"},[e._v(" "+e._s(e.$t("connexion-infos"))+" ")]),a("FormField",{attrs:{name:"pseudo",label:"pseudo",required:"",disabled:e.user.id&&"admin"===e.user.group_id,errors:e.errors.pseudo},model:{value:e.user.pseudo,callback:function(t){e.$set(e.user,"pseudo",t)},expression:"user.pseudo"}}),a("FormField",{attrs:{name:"email",label:"email",type:"email",required:"",disabled:e.user.id&&"admin"===e.user.group_id,errors:e.errors.email},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}),e.user.id?e._e():a("FormField",{attrs:{name:"password",label:"password",type:"password",required:"",errors:e.errors.password},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),a("FormField",{attrs:{name:"group_id",label:"group",type:"select",required:"",disabled:e.user.id&&"admin"===e.user.group_id,options:e.groupOptions,errors:e.errors.group_id},model:{value:e.user.group_id,callback:function(t){e.$set(e.user,"group_id",t)},expression:"user.group_id"}})],1),a("section",{staticClass:"Form__fieldset"},[a("h4",{staticClass:"Form__fieldset__title"},[e._v(" "+e._s(e.$t("personnal-infos"))+" ")]),a("FormField",{attrs:{name:"first_name",label:"first-name",errors:e.errors.first_name},model:{value:e.user.person.first_name,callback:function(t){e.$set(e.user.person,"first_name",t)},expression:"user.person.first_name"}}),a("FormField",{attrs:{name:"last_name",label:"last-name",errors:e.errors.last_name},model:{value:e.user.person.last_name,callback:function(t){e.$set(e.user.person,"last_name",t)},expression:"user.person.last_name"}}),a("FormField",{attrs:{name:"nickname",label:"nickname",errors:e.errors.nickname},model:{value:e.user.person.nickname,callback:function(t){e.$set(e.user.person,"nickname",t)},expression:"user.person.nickname"}}),a("FormField",{attrs:{name:"phone",label:"phone",type:"tel",errors:e.errors.phone},model:{value:e.user.person.phone,callback:function(t){e.$set(e.user.person,"phone",t)},expression:"user.person.phone"}}),a("FormField",{attrs:{name:"street",label:"street",errors:e.errors.street},model:{value:e.user.person.street,callback:function(t){e.$set(e.user.person,"street",t)},expression:"user.person.street"}}),a("FormField",{staticClass:"User__postal-code",attrs:{name:"postal_code",label:"postal-code",errors:e.errors.postal_code},model:{value:e.user.person.postal_code,callback:function(t){e.$set(e.user.person,"postal_code",t)},expression:"user.person.postal_code"}}),a("FormField",{attrs:{name:"locality",label:"city",errors:e.errors.locality},model:{value:e.user.person.locality,callback:function(t){e.$set(e.user.person,"locality",t)},expression:"user.person.locality"}})],1),a("section",{staticClass:"Form__actions"},[a("button",{staticClass:"Form__actions__save success",attrs:{type:"submit"}},[e._v(" "+e._s(e.$t("save"))+" ")])])]),a("Help",{attrs:{message:e.help,error:e.error,isLoading:e.isLoading}})],1)])])},Ys=[],Ws={name:"User",components:{Help:de,FormField:Te},data:function(){return{help:"page-users.help-edit",error:null,isLoading:!1,user:{id:this.$route.params.id||null,pseudo:"",email:"",password:"",group_id:"member",person:{first_name:"",last_name:"",nickname:"",phone:"",street:"",postal_code:"",locality:""}},errors:{pseudo:null,email:null,password:null,group_id:null,person:{first_name:null,last_name:null,nickname:null,phone:null,street:null,postal_code:null,locality:null}},groupOptions:[{value:"admin",label:"admin"},{value:"member",label:"member"},{value:"visitor",label:"visitor"}]}},mounted:function(){this.getUserData()},methods:{getUserData:function(){var e=this,t=this.user.id;if(t&&"new"!==t){this.resetHelpLoading();var a=this.$route.meta.resource;this.$http.get("".concat(a,"/").concat(t)).then((function(t){var a=t.data;e.setUserData(a),e.isLoading=!1})).catch(this.displayError)}},saveUser:function(e){var t=this;e.preventDefault(),this.resetHelpLoading();var a=this.user.id,s=this.$route.meta.resource,i=this.$http.post,n="users/signup";this.user.id&&(i=this.$http.put,n="".concat(s,"/").concat(a)),i(n,Object(v["a"])({},this.user)).then((function(e){var a=e.data;t.isLoading=!1,t.help={type:"success",text:"page-users.saved"},t.setUserData(a),setTimeout((function(){t.$router.push("/users")}),300)})).catch(this.displayError)},resetHelpLoading:function(){this.help="page-users.help-edit",this.error=null,this.isLoading=!0},displayError:function(e){var t,a;this.help="page-users.help-edit",this.error=e,this.isLoading=!1;var s=(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||{code:0,details:{}},i=s.code,n=s.details;400===i&&(this.errors=Object(v["a"])({},n))},setUserData:function(e){this.user=e,e.person||(this.user.person={first_name:"",last_name:"",nickname:"",phone:"",street:"",postal_code:"",locality:""}),S.commit("setPageSubTitle",this.user.pseudo)}}},Js=Ws,Ks=(a("50b8"),Object(H["a"])(Js,Gs,Ys,!1,null,null,null)),Xs=Ks.exports,Zs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content Beneficiaries"},[a("div",{staticClass:"content__header header-page"},[a("div",{staticClass:"header-page__help"},[a("Help",{attrs:{message:e.help,error:e.error,isLoading:e.isLoading}})],1),a("div",{staticClass:"header-page__actions"},[a("router-link",{staticClass:"Beneficiaries__create success",attrs:{to:"/beneficiaries/new",tag:"button"}},[a("i",{staticClass:"fas fa-user-plus"}),e._v(" "+e._s(e.$t("page-beneficiaries.action-add"))+" ")])],1)]),a("div",{staticClass:"content__main-view"},[a("v-server-table",{ref:"DataTable",attrs:{name:"BeneficiariesTable",columns:e.columns,options:e.options},scopedSlots:e._u([{key:"company",fn:function(t){return a("div",{},[t.row.company?a("router-link",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("action-edit"),expression:"$t('action-edit')"}],attrs:{to:"/companies/"+t.row.company.id,tag:"a"}},[e._v(" "+e._s(t.row.company.legal_name)+" "),a("i",{staticClass:"fas fa-edit"})]):e._e()],1)}},{key:"email",fn:function(t){return a("div",{},[a("a",{attrs:{href:"mailto:"+t.row.email}},[e._v(e._s(t.row.email))])])}},{key:"phone",fn:function(t){return a("div",{},[t.row.phone?a("div",[e._v(" "+e._s(t.row.phone)+" ")]):e._e(),t.row.company?a("div",[e._v(" "+e._s(t.row.company.phone)+" ")]):e._e()])}},{key:"address",fn:function(t){return a("div",{},[t.row.company&&t.row.company.postal_code&&t.row.locality?a("div",[e._v(" "+e._s(t.row.company.street)),a("br"),e._v(" "+e._s(t.row.company.postal_code)+" "+e._s(t.row.company.locality)+" ")]):a("div",[e._v(" "+e._s(t.row.street)),a("br"),e._v(" "+e._s(t.row.postal_code)+" "+e._s(t.row.locality)+" ")])])}},{key:"note",fn:function(t){return a("div",{},[t.row.company?a("pre",[e._v(e._s(t.row.company.note))]):a("pre",[e._v(e._s(t.row.note))])])}},{key:"actions",fn:function(t){return a("div",{staticClass:"Beneficiaries__actions"},[e.isTrashDisplayed?e._e():a("router-link",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("action-edit"),expression:"$t('action-edit')"}],staticClass:"item-actions__button info",attrs:{to:"/beneficiaries/"+t.row.id,tag:"button"}},[a("i",{staticClass:"fas fa-edit"})]),e.isTrashDisplayed?e._e():a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("action-trash"),expression:"$t('action-trash')"}],staticClass:"item-actions__button warning",on:{click:function(a){return e.deleteBeneficiary(t.row.id)}}},[a("i",{staticClass:"fas fa-trash"})]),e.isTrashDisplayed?a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("action-restore"),expression:"$t('action-restore')"}],staticClass:"item-actions__button info",on:{click:function(a){return e.restoreBeneficiary(t.row.id)}}},[a("i",{staticClass:"fas fa-trash-restore"})]):e._e(),e.isTrashDisplayed?a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("action-delete"),expression:"$t('action-delete')"}],staticClass:"item-actions__button danger",on:{click:function(a){return e.deleteBeneficiary(t.row.id)}}},[a("i",{staticClass:"fas fa-trash-alt"})]):e._e()],1)}}])})],1),a("div",{staticClass:"content__footer"},[a("button",{staticClass:"Beneficiaries__show-trashed",class:e.isTrashDisplayed?"info":"warning",on:{click:function(t){return e.showTrashed()}}},[e.isTrashDisplayed?e._e():a("span",[a("i",{staticClass:"fas fa-trash"}),e._v(" "+e._s(e.$t("open-trash-bin"))+" ")]),e.isTrashDisplayed?a("span",[a("i",{staticClass:"fas fa-eye"}),e._v(" "+e._s(e.$t("display-not-deleted-items"))+" ")]):e._e()])])])},ei=[],ti={name:"Beneficiaries",components:{Help:de},data:function(){var e=this;return{help:"page-beneficiaries.help",error:null,isLoading:!1,isDisplayTrashed:!1,isTrashDisplayed:!1,columns:["last_name","first_name","company","email","phone","address","note","actions"],options:{columnsDropdown:!0,preserveState:!0,orderBy:{column:"last_name",ascending:!0},initialPage:this.$route.query.page||1,sortable:["last_name","first_name","company","email"],columnsDisplay:{note:"mobile"},headings:{last_name:this.$t("last-name"),first_name:this.$t("first-name"),company:this.$t("company"),email:this.$t("email"),phone:this.$t("phone"),address:this.$t("address"),note:this.$t("notes"),actions:""},columnsClasses:{company:"Beneficiaries__company",email:"Beneficiaries__email",address:"Beneficiaries__address",note:"Beneficiaries__note"},requestFunction:function(t){e.isLoading=!0,e.error=null;var a=Object(v["a"])(Object(v["a"])({},t),{},{tags:[_.beneficiaryTagName],deleted:e.isDisplayTrashed?"1":"0"});return e.$http.get(e.$route.meta.resource,{params:a}).catch(e.showError).finally((function(){e.isTrashDisplayed=e.isDisplayTrashed,e.isLoading=!1}))}}}},methods:{deleteBeneficiary:function(e){var t=this,a=!this.isTrashDisplayed;We.ConfirmDelete(this.$t,"beneficiaries",a).then((function(a){a.value&&(t.error=null,t.isLoading=!0,t.$http.delete("".concat(t.$route.meta.resource,"/").concat(e)).then(t.refreshTable).catch(t.showError))}))},restoreBeneficiary:function(e){var t=this;We.ConfirmRestore(this.$t,"beneficiaries").then((function(a){a.value&&(t.error=null,t.isLoading=!0,t.$http.put("".concat(t.$route.meta.resource,"/restore/").concat(e)).then(t.refreshTable).catch(t.showError))}))},refreshTable:function(){this.error=null,this.isLoading=!0,this.$refs.DataTable.refresh()},showTrashed:function(){this.isDisplayTrashed=!this.isDisplayTrashed,this.refreshTable()},showError:function(e){this.isLoading=!1,this.error=e}}},ai=ti,si=(a("b574"),Object(H["a"])(ai,Zs,ei,!1,null,null,null)),ii=si.exports,ni=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"content__main-view Beneficiary"},[a("div",{staticClass:"Beneficiary__main"},[a("PersonForm",{attrs:{person:e.person,errors:e.errors,withCompany:""},on:{submit:e.saveBeneficiary}}),a("Help",{attrs:{message:e.help,error:e.error,isLoading:e.isLoading}})],1)])])},ri=[],oi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{staticClass:"Form PersonForm",attrs:{method:"POST"},on:{submit:e.doSubmit}},[a("section",{staticClass:"Form__fieldset"},[a("h4",{staticClass:"Form__fieldset__title"},[e._v(" "+e._s(e.$t("personnal-infos"))+" ")]),a("FormField",{attrs:{name:"first_name",label:"first-name",required:"",errors:e.errors.first_name},model:{value:e.person.first_name,callback:function(t){e.$set(e.person,"first_name",t)},expression:"person.first_name"}}),a("FormField",{attrs:{name:"last_name",label:"last-name",required:"",errors:e.errors.last_name},model:{value:e.person.last_name,callback:function(t){e.$set(e.person,"last_name",t)},expression:"person.last_name"}}),e.withCompany?e._e():a("FormField",{attrs:{name:"nickname",label:"nickname",errors:e.errors.nickname},model:{value:e.person.nickname,callback:function(t){e.$set(e.person,"nickname",t)},expression:"person.nickname"}})],1),e.withCompany?a("section",{staticClass:"Form__fieldset"},[a("h4",{staticClass:"Form__fieldset__title"},[e._v(" "+e._s(e.$t("company"))+" ")]),a("div",{staticClass:"PersonForm__company"},[a("FormField",{attrs:{name:"company_id",label:"company",type:"select",options:e.companiesOptions,errors:e.errors.company_id},model:{value:e.person.company_id,callback:function(t){e.$set(e.person,"company_id",t)},expression:"person.company_id"}}),e.person.company_id?a("router-link",{staticClass:"PersonForm__company__edit-btn info",attrs:{to:"/companies/"+e.person.company_id,tag:"button"}},[a("i",{staticClass:"fas fa-edit"}),e._v(" "+e._s(e.$t("page-companies.edit-btn"))+" ")]):e._e()],1),a("router-link",{staticClass:"PersonForm__add-company",attrs:{to:"/companies/new"}},[a("i",{staticClass:"fas fa-plus"}),e._v(" "+e._s(e.$t("page-companies.create-new"))+" ")])],1):e._e(),a("section",{staticClass:"Form__fieldset"},[a("h4",{staticClass:"Form__fieldset__title"},[e._v(" "+e._s(e.$t("contact"))+" ")]),a("FormField",{staticClass:"PersonForm__phone",attrs:{name:"phone",label:"phone",type:"tel",errors:e.errors.phone},model:{value:e.person.phone,callback:function(t){e.$set(e.person,"phone",t)},expression:"person.phone"}}),a("FormField",{attrs:{name:"email",label:"email",type:"email",errors:e.errors.email},model:{value:e.person.email,callback:function(t){e.$set(e.person,"email",t)},expression:"person.email"}}),a("FormField",{attrs:{name:"street",label:"street",errors:e.errors.street},model:{value:e.person.street,callback:function(t){e.$set(e.person,"street",t)},expression:"person.street"}}),a("FormField",{staticClass:"PersonForm__postal-code",attrs:{name:"postal_code",label:"postal-code",errors:e.errors.postal_code},model:{value:e.person.postal_code,callback:function(t){e.$set(e.person,"postal_code",t)},expression:"person.postal_code"}}),a("FormField",{attrs:{name:"locality",label:"city",errors:e.errors.locality},model:{value:e.person.locality,callback:function(t){e.$set(e.person,"locality",t)},expression:"person.locality"}}),a("FormField",{attrs:{name:"country_id",label:"country",type:"select",options:e.countriesOptions,errors:e.errors.country_id},model:{value:e.person.country_id,callback:function(t){e.$set(e.person,"country_id",t)},expression:"person.country_id"}})],1),a("section",{staticClass:"Form__fieldset"},[a("h4",{staticClass:"Form__fieldset__title"},[e._v(" "+e._s(e.$t("other-infos"))+" ")]),a("FormField",{staticClass:"PersonForm__notes",attrs:{label:"notes",name:"note",type:"textarea",errors:e.errors.note},model:{value:e.person.note,callback:function(t){e.$set(e.person,"note",t)},expression:"person.note"}})],1),a("section",{staticClass:"Form__actions"},[a("button",{staticClass:"Form__actions__save success",attrs:{type:"submit"}},[a("i",{staticClass:"fas fa-save"}),e._v(" "+e._s(e.$t("save"))+" ")]),a("button",{attrs:{type:"button"},on:{click:e.goBack}},[a("i",{staticClass:"fas fa-ban"}),e._v(" "+e._s(e.$t("cancel"))+" ")])])])},li=[],ci={name:"PersonForm",components:{FormField:Te},props:{person:Object,errors:Object,withCompany:Boolean},computed:{countriesOptions:function(){return S.getters["countries/options"]},companiesOptions:function(){return S.getters["companies/options"]}},mounted:function(){S.dispatch("countries/fetch"),S.dispatch("companies/fetch")},methods:{doSubmit:function(e){this.$emit("submit",e)},goBack:function(){this.$router.back()}}},ui=ci,di=(a("704a"),Object(H["a"])(ui,oi,li,!1,null,null,null)),mi=di.exports,pi={name:"Beneficiary",components:{Help:de,PersonForm:mi},data:function(){return{help:"page-beneficiaries.help-edit",error:null,isLoading:!1,person:{id:this.$route.params.id||null,email:"",first_name:"",last_name:"",company_id:"",nickname:"",phone:"",street:"",postal_code:"",locality:"",country_id:"",note:""},errors:{first_name:null,last_name:null,nickname:null,phone:null,street:null,postal_code:null,locality:null,note:null}}},mounted:function(){this.getBeneficiaryData()},methods:{getBeneficiaryData:function(){var e=this,t=this.person.id;if(t&&"new"!==t){this.resetHelpLoading();var a=this.$route.meta.resource;this.$http.get("".concat(a,"/").concat(t)).then((function(t){var a=t.data;e.setPerson(a),e.isLoading=!1})).catch(this.displayError)}},saveBeneficiary:function(e){var t=this;e.preventDefault(),this.resetHelpLoading();var a=this.person.id,s=this.$route.meta.resource,i=this.$http.post,n=s;a&&(i=this.$http.put,n="".concat(s,"/").concat(a));var r=Object(v["a"])({},this.person);a||(r.tags=[_.beneficiaryTagName]),i(n,r).then((function(e){var a=e.data;t.isLoading=!1,t.help={type:"success",text:"page-beneficiaries.saved"},t.setPerson(a),setTimeout((function(){t.$router.push("/beneficiaries")}),300)})).catch(this.displayError)},resetHelpLoading:function(){this.help="page-beneficiaries.help-edit",this.error=null,this.isLoading=!0},displayError:function(e){var t,a;this.help="page-beneficiaries.help-edit",this.error=e,this.isLoading=!1;var s=(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||{code:0,details:{}},i=s.code,n=s.details;400===i&&(this.errors=Object(v["a"])({},n))},setPerson:function(e){this.person=e;var t=e.full_name||"".concat(e.first_name," ").concat(e.last_name);S.commit("setPageSubTitle",t)}}},fi=pi,hi=(a("3cfd"),Object(H["a"])(fi,ni,ri,!1,null,null,null)),_i=hi.exports,vi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"content__main-view Company"},[a("div",{staticClass:"Company__main"},[a("CompanyForm",{attrs:{company:e.company,errors:e.errors},on:{submit:e.saveCompany}}),a("div",{staticClass:"Company__extras"},[a("Help",{attrs:{message:e.help,error:e.error,isLoading:e.isLoading}}),e.persons.length>0?a("div",{staticClass:"Company__persons"},[a("h4",{staticClass:"Company__persons__title"},[e._v(" "+e._s(e.$t("page-companies.attached-persons"))+" ")]),a("ul",{staticClass:"Company__persons__list"},e._l(e.persons,(function(t){return a("li",{key:t.id,staticClass:"Company__persons__item"},[a("i",{staticClass:"fas fa-user"}),a("router-link",{attrs:{to:"/beneficiaries/"+t.id,tag:"a"}},[e._v(" "+e._s(t.full_name)+" ")])],1)})),0)]):e._e()],1)],1)])])},gi=[],bi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{staticClass:"Form CompanyForm",attrs:{method:"POST"},on:{submit:e.doSubmit}},[a("section",{staticClass:"Form__fieldset"},[a("h4",{staticClass:"Form__fieldset__title"},[e._v(" "+e._s(e.$t("informations"))+" ")]),a("FormField",{attrs:{name:"legal_name",label:"legal-name",required:"",errors:e.errors.legal_name},model:{value:e.company.legal_name,callback:function(t){e.$set(e.company,"legal_name",t)},expression:"company.legal_name"}}),a("FormField",{staticClass:"CompanyForm__phone",attrs:{name:"phone",label:"phone",type:"tel",errors:e.errors.phone},model:{value:e.company.phone,callback:function(t){e.$set(e.company,"phone",t)},expression:"company.phone"}})],1),a("section",{staticClass:"Form__fieldset"},[a("h4",{staticClass:"Form__fieldset__title"},[e._v(" "+e._s(e.$t("address"))+" ")]),a("FormField",{attrs:{name:"street",label:"street",errors:e.errors.street},model:{value:e.company.street,callback:function(t){e.$set(e.company,"street",t)},expression:"company.street"}}),a("FormField",{staticClass:"CompanyForm__postal-code",attrs:{name:"postal_code",label:"postal-code",errors:e.errors.postal_code},model:{value:e.company.postal_code,callback:function(t){e.$set(e.company,"postal_code",t)},expression:"company.postal_code"}}),a("FormField",{attrs:{name:"locality",label:"city",errors:e.errors.locality},model:{value:e.company.locality,callback:function(t){e.$set(e.company,"locality",t)},expression:"company.locality"}}),a("FormField",{attrs:{name:"country_id",label:"country",type:"select",options:e.countriesOptions,errors:e.errors.country_id},model:{value:e.company.country_id,callback:function(t){e.$set(e.company,"country_id",t)},expression:"company.country_id"}})],1),a("section",{staticClass:"Form__fieldset"},[a("h4",{staticClass:"Form__fieldset__title"},[e._v(" "+e._s(e.$t("other-infos"))+" ")]),a("FormField",{staticClass:"CompanyForm__notes",attrs:{label:"notes",name:"note",type:"textarea",errors:e.errors.note},model:{value:e.company.note,callback:function(t){e.$set(e.company,"note",t)},expression:"company.note"}})],1),a("section",{staticClass:"Form__actions"},[a("button",{staticClass:"Form__actions__save success",attrs:{type:"submit"}},[a("i",{staticClass:"fas fa-save"}),e._v(" "+e._s(e.$t("save"))+" ")]),a("button",{attrs:{type:"button"},on:{click:e.goBack}},[a("i",{staticClass:"fas fa-ban"}),e._v(" "+e._s(e.$t("cancel"))+" ")])])])},yi=[],Ci={name:"CompanyForm",components:{FormField:Te},props:["company","errors"],computed:{countriesOptions:function(){return S.getters["countries/options"]}},mounted:function(){S.dispatch("countries/fetch")},methods:{doSubmit:function(e){this.$emit("submit",e)},goBack:function(){this.$router.back()}}},$i=Ci,wi=(a("5af6"),Object(H["a"])($i,bi,yi,!1,null,null,null)),ki=wi.exports,Ei={name:"Company",components:{Help:de,CompanyForm:ki},data:function(){return{help:"page-companies.help-edit",error:null,isLoading:!1,company:{id:this.$route.params.id||null,legal_name:"",street:"",postal_code:"",locality:"",country_id:"",phone:"",note:""},persons:[],errors:{legal_name:null,street:null,postal_code:null,locality:null,country_id:null,phone:null}}},mounted:function(){this.getCompanyData(),this.getCompanyPersons()},methods:{getCompanyData:function(){var e=this,t=this.company.id;if(t&&"new"!==t){this.resetHelpLoading();var a=this.$route.meta.resource;this.$http.get("".concat(a,"/").concat(t)).then((function(t){var a=t.data;e.setCompany(a),e.isLoading=!1})).catch(this.displayError)}},getCompanyPersons:function(){var e=this,t=this.company.id;if(t&&"new"!==t){this.resetHelpLoading();var a=this.$route.meta.resource;this.$http.get("".concat(a,"/").concat(t,"/persons")).then((function(t){var a=t.data;e.persons=a.data,e.isLoading=!1})).catch(this.displayError)}},saveCompany:function(e){var t=this;e.preventDefault(),this.resetHelpLoading();var a=this.company.id,s=this.$route.meta.resource,i=this.$http.post,n=s;a&&(i=this.$http.put,n="".concat(s,"/").concat(a));var r=Object(v["a"])({},this.company);a||(r.tags=[_.beneficiaryTagName]),i(n,r).then((function(e){var a=e.data;t.isLoading=!1,t.help={type:"success",text:"page-companies.saved"},t.setCompany(a),S.dispatch("companies/refresh"),setTimeout((function(){t.$router.back()}),300)})).catch(this.displayError)},resetHelpLoading:function(){this.help="page-companies.help-edit",this.error=null,this.isLoading=!0},displayError:function(e){var t,a;this.help="page-companies.help-edit",this.error=e,this.isLoading=!1;var s=(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||{code:0,details:{}},i=s.code,n=s.details;400===i&&(this.errors=Object(v["a"])({},n))},setCompany:function(e){this.company=e,S.commit("setPageSubTitle",e.legal_name)}}},Ti=Ei,ji=(a("a993"),Object(H["a"])(Ti,vi,gi,!1,null,null,null)),Di=ji.exports,Mi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content Materials"},[a("div",{staticClass:"content__header header-page"},[a("div",{staticClass:"header-page__help"},[a("Help",{attrs:{message:e.help,error:e.error,isLoading:e.isLoading}})],1),a("div",{staticClass:"header-page__actions"},[a("MaterialsFilter",{attrs:{baseRoute:"/materials"},on:{change:e.refreshTableAndPagination}}),a("router-link",{staticClass:"Materials__create success",attrs:{to:"/materials/new",tag:"button"}},[a("i",{staticClass:"fas fa-plus"}),e._v(" "+e._s(e.$t("page-materials.action-add"))+" ")])],1)]),a("div",{staticClass:"content__main-view"},[a("v-server-table",{ref:"DataTable",attrs:{name:"materialsTable",columns:e.columns,options:e.options},scopedSlots:e._u([{key:"park",fn:function(t){return a("div",{},[e._v(" "+e._s(e.getParkName(t.row.park_id))+" ")])}},{key:"category",fn:function(t){return a("div",{},[a("i",{staticClass:"fas fa-folder-open"}),e._v(" "+e._s(e.getCategoryName(t.row.category_id))+" "),t.row.sub_category_id?a("div",[a("i",{staticClass:"fas fa-arrow-right"}),e._v(" "+e._s(e.getSubCategoryName(t.row.sub_category_id))+" ")]):e._e()])}},{key:"rental_price",fn:function(t){return a("div",{},[e._v(" "+e._s(e.formatAmount(t.row.rental_price))+" ")])}},{key:"replacement_price",fn:function(t){return a("div",{},[e._v(" "+e._s(e.formatAmount(t.row.replacement_price))+" ")])}},{key:"tags",fn:function(t){return a("div",{staticClass:"Materials__tags-list",attrs:{role:"button"},on:{click:function(a){return e.setTags(t.row)}}},[e._l(t.row.tags,(function(t){return a("span",{key:t.id,staticClass:"Materials__tag-item"},[a("i",{staticClass:"fas fa-tag"}),e._v(" "+e._s(t.name)+" ")])})),0!==t.row.tags.length||e.isTrashDisplayed?e._e():a("span",{staticClass:"Materials__add-tags"},[e._v(" "+e._s(e.$t("add-tags"))+" ")])],2)}},{key:"actions",fn:function(t){return a("div",{staticClass:"Materials__actions"},[e.isTrashDisplayed?e._e():a("router-link",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("action-edit"),expression:"$t('action-edit')"}],staticClass:"item-actions__button info",attrs:{to:"/materials/"+t.row.id,tag:"button"}},[a("i",{staticClass:"fas fa-edit"})]),e.isTrashDisplayed?e._e():a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("action-trash"),expression:"$t('action-trash')"}],staticClass:"item-actions__button warning",on:{click:function(a){return e.deleteMaterial(t.row.id)}}},[a("i",{staticClass:"fas fa-trash"})]),e.isTrashDisplayed?a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("action-restore"),expression:"$t('action-restore')"}],staticClass:"item-actions__button info",on:{click:function(a){return e.restoreMaterial(t.row.id)}}},[a("i",{staticClass:"fas fa-trash-restore"})]):e._e(),e.isTrashDisplayed?a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("action-delete"),expression:"$t('action-delete')"}],staticClass:"item-actions__button danger",on:{click:function(a){return e.deleteMaterial(t.row.id)}}},[a("i",{staticClass:"fas fa-trash-alt"})]):e._e()],1)}}])})],1),a("div",{staticClass:"content__footer"},[a("button",{staticClass:"Materials__show-trashed",class:e.isTrashDisplayed?"info":"warning",on:{click:function(t){return e.showTrashed()}}},[e.isTrashDisplayed?e._e():a("span",[a("i",{staticClass:"fas fa-trash"}),e._v(" "+e._s(e.$t("open-trash-bin"))+" ")]),e.isTrashDisplayed?a("span",[a("i",{staticClass:"fas fa-eye"}),e._v(" "+e._s(e.$t("display-not-deleted-items"))+" ")]):e._e()])])])},Fi=[],Si=(a("a434"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"AssignTags"},[a("Header",{attrs:{title:e.title},on:{close:function(t){return e.$emit("close")}}}),a("div",{staticClass:"AssignTags__content"},[a("p",{staticClass:"AssignTags__help"},[e._v(e._s(e.$t("choose-tags-below")))]),a("div",{staticClass:"AssignTags__form"},[a("VueSelect",{attrs:{options:e.$store.getters["tags/options"],"close-on-select":!1,multiple:""},model:{value:e.tags,callback:function(t){e.tags=t},expression:"tags"}}),a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("remove-all-tags"),expression:"$t('remove-all-tags')"}],staticClass:"AssignTags__form__remove-all",on:{click:e.removeAll}},[a("i",{staticClass:"fas fa-backspace"})])],1)]),a("div",{staticClass:"AssignTags__actions"},[e.error?a("p",{staticClass:"AssignTags__error"},[e._v(e._s(e.error))]):e._e(),a("button",{staticClass:"success",on:{click:e.save}},[e.isLoading?a("i",{staticClass:"fas fa-circle-notch fa-spin"}):e._e(),e.isLoading?a("span",[e._v(e._s(e.$t("saving")))]):a("span",[e._v(e._s(e.$t("save")))])]),a("button",{on:{click:function(t){return e.$emit("close")}}},[e._v(" "+e._s(e.$t("cancel"))+" ")])])],1)}),xi=[],Li=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",{staticClass:"AssignTagsHeader"},[a("h4",{staticClass:"AssignTagsHeader__title"},[a("i",{staticClass:"fas fa-tags"}),e._v(" "+e._s(e.title)+" ")]),a("button",{staticClass:"close",on:{click:function(t){return e.$emit("close")}}},[a("i",{staticClass:"fas fa-times"})])])},Oi=[],qi={name:"AssignTagsHeader",props:["title"]},Ai=qi,Ni=(a("56e7"),Object(H["a"])(Ai,Li,Oi,!1,null,null,null)),Pi=Ni.exports,Ii={name:"AssignTags",components:{Header:Pi,VueSelect:Na.a},props:["entity","id","name","initialTags"],data:function(){return{isLoading:!1,title:this.$t("entity-name-tags",{entityName:this.name||""}),tags:this.initialTags?this.initialTags.map((function(e){var t=e.id,a=e.name;return{label:a,value:t}})):[],error:null}},methods:{save:function(){var e=this;this.isLoading=!0;var t=this.tags.map((function(e){return e.label}));this.$http.put("".concat(this.entity,"/").concat(this.id),{tags:t}).then((function(){e.$emit("saved"),e.$emit("close")})).catch((function(t){if(t.response){var a=t.response.data.error.message;e.error=a}else e.error=t})).finally((function(){e.isLoading=!1}))},removeAll:function(){this.tags=[]}}},Bi=Ii,Ri=(a("4a4d"),Object(H["a"])(Bi,Si,xi,!1,null,null,null)),Hi=Ri.exports,zi={name:"Materials",components:{Help:de,MaterialsFilter:cs},data:function(){var e=this,t=["reference","name","description","park","category","rental_price","replacement_price","stock_quantity","out_of_order_quantity","tags","actions"];return"none"===_.billingMode&&t.splice(5,1),{help:"page-materials.help",error:null,isLoading:!1,isDisplayTrashed:!1,isTrashDisplayed:!1,columns:t,options:{columnsDropdown:!0,preserveState:!0,orderBy:{column:"name",ascending:!0},initialPage:this.$route.query.page||1,sortable:["reference","name","description","rental_price","replacement_price","stock_quantity","out_of_order_quantity"],columnsDisplay:{park:"mobile",description:"mobile",replacement_price:"mobile",out_of_order_quantity:"mobile"},headings:{reference:this.$t("ref"),name:this.$t("name"),description:this.$t("description"),park:this.$t("park"),category:this.$t("category"),rental_price:this.$t("rent-price"),replacement_price:this.$t("repl-price"),stock_quantity:this.$t("quantity"),out_of_order_quantity:this.$t("quantity-out-of-order"),tags:this.$t("tags"),actions:""},columnsClasses:{reference:"Materials__ref",name:"Materials__name",park:"Materials__park",category:"Materials__category",description:"Materials__description",rental_price:"Materials__rental-price",replacement_price:"Materials__replacement-price",stock_quantity:"Materials__quantity",out_of_order_quantity:"Materials__quantity-out",tags:"Materials__tags"},requestFunction:function(t){e.isLoading=!0;var a=e.getFilters(),s=Object(v["a"])(Object(v["a"])(Object(v["a"])({},t),a),{},{deleted:e.isDisplayTrashed?"1":"0"});return e.$http.get(e.$route.meta.resource,{params:s}).catch(e.showError).finally((function(){e.isTrashDisplayed=e.isDisplayTrashed,e.isLoading=!1}))}}}},mounted:function(){S.dispatch("categories/fetch"),S.dispatch("tags/fetch")},methods:{getParkName:function(e){return S.getters["parks/parkName"](e)},getCategoryName:function(e){return S.getters["categories/categoryName"](e)},getSubCategoryName:function(e){return S.getters["categories/subCategoryName"](e)},getFilters:function(){var e={};return this.$route.query.park&&(e.park=this.$route.query.park),this.$route.query.category&&(e.category=this.$route.query.category),this.$route.query.subCategory&&(e.subCategory=this.$route.query.subCategory),this.$route.query.tags&&(e.tags=JSON.parse(this.$route.query.tags)),e},deleteMaterial:function(e){var t=this,a=!this.isTrashDisplayed;We.ConfirmDelete(this.$t,"materials",a).then((function(a){a.value&&(t.error=null,t.isLoading=!0,t.$http.delete("".concat(t.$route.meta.resource,"/").concat(e)).then(t.refreshTable).catch(t.showError))}))},restoreMaterial:function(e){var t=this;We.ConfirmRestore(this.$t,"materials").then((function(a){a.value&&(t.error=null,t.isLoading=!0,t.$http.put("".concat(t.$route.meta.resource,"/restore/").concat(e)).then(t.refreshTable).catch(t.showError))}))},setTags:function(e){var t=this,a=e.id,s=e.name,i=e.tags;if(!this.isTrashDisplayed){var n=Object(v["a"])(Object(v["a"])({},ee),{},{width:600,draggable:!0,clickToClose:!1});this.$modal.show(Hi,{entity:"materials",id:a,name:s,initialTags:i},n,{"before-close":function(){t.refreshTable()}})}},refreshTable:function(){this.error=null,this.isLoading=!0,this.$refs.DataTable.getData()},refreshTableAndPagination:function(){this.error=null,this.isLoading=!0,this.$refs.DataTable.refresh()},showTrashed:function(){this.isDisplayTrashed=!this.isDisplayTrashed,this.refreshTableAndPagination()},showError:function(e){this.isLoading=!1,this.error=e},formatAmount:function(e){return ct(e)}}},Ui=zi,Vi=(a("0e0d"),Object(H["a"])(Ui,Mi,Fi,!1,null,null,null)),Qi=Vi.exports,Gi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"content__main-view"},[a("div",{staticClass:"Material"},[a("form",{key:e.entitiesState,staticClass:"Form Form--fixed-actions",attrs:{method:"POST"},on:{submit:e.saveMaterial}},[a("section",{staticClass:"Form__fieldset"},[a("h4",{staticClass:"Form__fieldset__title"},[e._v(" "+e._s(e.$t("minimal-infos"))+" "),a("span",{staticClass:"FormField__label__required"},[e._v("*")])]),a("FormField",{attrs:{name:"name",label:"name",required:"",errors:e.errors.name},model:{value:e.material.name,callback:function(t){e.$set(e.material,"name",t)},expression:"material.name"}}),a("FormField",{staticClass:"Material__ref",attrs:{name:"reference",label:"reference",required:"",errors:e.errors.reference},model:{value:e.material.reference,callback:function(t){e.$set(e.material,"reference",t)},expression:"material.reference"}}),a("FormField",{attrs:{name:"park_id",label:"park",type:"select",required:"",options:e.parksOptions,errors:e.errors.park_id},model:{value:e.material.park_id,callback:function(t){e.$set(e.material,"park_id",t)},expression:"material.park_id"}}),a("FormField",{attrs:{name:"category_id",label:"category",type:"select",required:"",options:e.categoriesOptions,errors:e.errors.category_id},on:{change:e.updateSubCategories},model:{value:e.material.category_id,callback:function(t){e.$set(e.material,"category_id",t)},expression:"material.category_id"}}),a("FormField",{directives:[{name:"show",rawName:"v-show",value:e.showBilling,expression:"showBilling"}],staticClass:"Material__price",attrs:{name:"rental_price",label:"rental-price",type:"number",addon:e.currency,required:"",errors:e.errors.rental_price},on:{input:e.updateRentalPrice},model:{value:e.material.rental_price,callback:function(t){e.$set(e.material,"rental_price",t)},expression:"material.rental_price"}}),a("FormField",{staticClass:"Material__quantity",attrs:{name:"stock_quantity",label:"quantity",type:"number",step:1,required:"",errors:e.errors.stock_quantity},model:{value:e.material.stock_quantity,callback:function(t){e.$set(e.material,"stock_quantity",t)},expression:"material.stock_quantity"}})],1),a("section",{staticClass:"Form__fieldset"},[a("h4",{staticClass:"Form__fieldset__title"},[e._v(" "+e._s(e.$t("extra-infos"))+" ")]),a("FormField",{attrs:{name:"description",label:"description",type:"textarea",errors:e.errors.description},model:{value:e.material.description,callback:function(t){e.$set(e.material,"description",t)},expression:"material.description"}}),a("FormField",{attrs:{name:"sub_category_id",label:"sub-category",type:"select",options:e.subCategoriesOptions,errors:e.errors.sub_category_id},model:{value:e.material.sub_category_id,callback:function(t){e.$set(e.material,"sub_category_id",t)},expression:"material.sub_category_id"}}),a("FormField",{staticClass:"Material__price",attrs:{name:"replacement_price",label:"replacement-price",type:"number",addon:e.currency,errors:e.errors.replacement_price},model:{value:e.material.replacement_price,callback:function(t){e.$set(e.material,"replacement_price",t)},expression:"material.replacement_price"}}),a("FormField",{staticClass:"Material__quantity",attrs:{name:"out_of_order_quantity",label:"quantity-out-of-order",type:"number",step:1,errors:e.errors.out_of_order_quantity},model:{value:e.material.out_of_order_quantity,callback:function(t){e.$set(e.material,"out_of_order_quantity",t)},expression:"material.out_of_order_quantity"}}),a("FormField",{attrs:{name:"note",label:"notes",type:"textarea",errors:e.errors.note},model:{value:e.material.note,callback:function(t){e.$set(e.material,"note",t)},expression:"material.note"}})],1),e.showBilling?a("section",{staticClass:"Form__fieldset"},[a("h4",{staticClass:"Form__fieldset__title"},[e._v(" "+e._s(e.$t("billing-infos"))+" ")]),a("FormField",{attrs:{name:"is_discountable",label:"discountable",type:"switch",errors:e.errors.is_discountable},model:{value:e.material.is_discountable,callback:function(t){e.$set(e.material,"is_discountable",t)},expression:"material.is_discountable"}}),a("FormField",{attrs:{name:"is_hidden_on_bill",disabled:e.material.rental_price>0,disabledReason:e.$t("price-must-be-zero"),label:"hidden-on-bill",type:"switch",errors:e.errors.is_hidden_on_bill},model:{value:e.material.is_hidden_on_bill,callback:function(t){e.$set(e.material,"is_hidden_on_bill",t)},expression:"material.is_hidden_on_bill"}})],1):e._e(),a("section",{staticClass:"Form__fieldset"},[a("h4",{staticClass:"Form__fieldset__title"},[e._v(" "+e._s(e.$t("special-attributes"))+" ")]),0===e.extraAttributes.length?a("p",{staticClass:"Material__no-attribute-help"},[e._v(" "+e._s(e.$t("page-attributes.no-attribute-yet"))+" ")]):e._e(),e._l(e.extraAttributes,(function(t){return a("FormField",{key:t.id,attrs:{name:t.name,label:t.name,addon:t.unit,type:e.getAttributeType(t.type)},on:{change:e.handleAttributeChange},model:{value:e.materialAttributes[t.id],callback:function(a){e.$set(e.materialAttributes,t.id,a)},expression:"materialAttributes[extraAttribute.id]"}})})),a("router-link",{staticClass:"Material__modify-attribute-link",attrs:{to:"/attributes"}},[a("i",{staticClass:"fas fa-plus"}),e._v(" "+e._s(e.$t("page-attributes.add-attributes"))+" ")])],2),a("section",{staticClass:"Form__actions"},[a("button",{staticClass:"Form__actions__save success",attrs:{type:"submit"}},[e._v(" "+e._s(e.$t("save"))+" ")])])]),a("Help",{attrs:{message:e.help,error:e.error,isLoading:e.isLoading}})],1)])])},Yi=[],Wi=a("ade3"),Ji={name:"Material",components:{Help:de,FormField:Te},data:function(){var e="none"!==_.billingMode;return{help:"page-materials.help-edit",error:null,isLoading:!1,extraAttributes:[],showBilling:e,material:{id:this.$route.params.id||null,name:"",reference:"",park_id:1,category_id:"",rental_price:e?"":0,stock_quantity:"",description:"",sub_category_id:"",replacement_price:"",out_of_order_quantity:"",note:"",is_hidden_on_bill:!1,is_discountable:!0,attributes:[]},materialAttributes:{},errors:{name:null,reference:null,park_id:null,category_id:null,rental_price:null,stock_quantity:null},currency:_.currency.symbol,subCategoriesOptions:[{value:"",label:this.$t("please-choose")}]}},computed:{entitiesState:function(){var e=S.state,t=e.parks,a=e.categories;return t.isFetched&&a.isFetched?"ready":"fetching"},parksOptions:function(){return S.getters["parks/options"]},categoriesOptions:function(){return S.getters["categories/options"]}},mounted:function(){S.dispatch("parks/fetch"),S.dispatch("categories/fetch"),this.fetchMaterial()},methods:{fetchMaterial:function(){var e=this,t=this.material.id;if(t&&"new"!==t){this.resetHelpLoading();var a=this.$route.meta.resource;this.$http.get("".concat(a,"/").concat(t)).then((function(t){var a=t.data;e.setMaterialData(a),e.fetchAttributes(),e.isLoading=!1})).catch(this.displayError)}else this.fetchAttributes()},fetchAttributes:function(){var e=this;this.$http.get("materials/attributes").then((function(t){var a=t.data;e.extraAttributes=a})).catch(this.displayError)},getAttributeType:function(e){switch(e){case"integer":case"float":return"number";case"boolean":return"switch";default:return"text"}},handleAttributeChange:function(e){var t=e.field,a=e.newValue,s=this.extraAttributes.find((function(e){return e.name===t}));s&&(this.materialAttributes=Object(v["a"])(Object(v["a"])({},this.materialAttributes),{},Object(Wi["a"])({},s.id,a)))},saveMaterial:function(e){var t=this;e.preventDefault(),this.resetHelpLoading();var a=this.material.id,s=this.$route.meta.resource,i=this.$http.post,n=s;a&&(i=this.$http.put,n="".concat(s,"/").concat(a));var r=Object.keys(this.materialAttributes).map((function(e){return{id:e,value:t.materialAttributes[e]}})),o=Object(v["a"])(Object(v["a"])({},this.material),{},{attributes:r});i(n,o).then((function(e){var a=e.data;t.isLoading=!1,t.help={type:"success",text:"page-materials.saved"},t.setMaterialData(a),setTimeout((function(){t.$router.push("/materials")}),300)})).catch(this.displayError)},resetHelpLoading:function(){this.help="page-materials.help-edit",this.error=null,this.isLoading=!0},displayError:function(e){var t,a;this.help="page-materials.help-edit",this.error=e,this.isLoading=!1;var s=(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||{code:0,details:{}},i=s.code,n=s.details;400===i&&(this.errors=Object(v["a"])({},n))},setMaterialData:function(e){this.material=e,S.commit("setPageSubTitle",this.material.name),this.updateSubCategories(),this.setMaterialAttributes()},updateRentalPrice:function(){this.material.rental_price>0&&(this.material.is_hidden_on_bill=!1)},updateSubCategories:function(){var e=this,t=S.state.categories.list,a=t.find((function(t){return parseInt(t.id,10)===parseInt(e.material.category_id,10)}));a&&(this.subCategoriesOptions=k(a.sub_categories,["name"],this.$t("please-choose")),this.refreshSubCategorySelect())},setMaterialAttributes:function(){var e=this;this.materialAttributes={},this.material.attributes.forEach((function(t){e.materialAttributes[t.id]=t.value}))},refreshSubCategorySelect:function(){var e=this,t=parseInt(this.material.sub_category_id,10)||"";if(t){var a=this.subCategoriesOptions.find((function(e){return e.value===t}));a&&(this.material.sub_category_id="",setTimeout((function(){e.material.sub_category_id=t}),0))}}}},Ki=Ji,Xi=(a("4863"),Object(H["a"])(Ki,Gi,Yi,!1,null,null,null)),Zi=Xi.exports,en=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content Attributes"},[a("div",{staticClass:"Attributes__header header-page"},[a("Help",{attrs:{message:e.help,error:e.error,isLoading:e.isLoading}}),a("button",{staticClass:"info Attributes__back-button",on:{click:e.goBack}},[a("i",{staticClass:"fas fa-arrow-left"}),e._v(" "+e._s(e.$t("page-attributes.go-back-to-material"))+" ")])],1),a("div",{staticClass:"content__main-view"},[a("div",{staticClass:"Attributes__content"},[a("table",{staticClass:"Attributes__items"},[a("thead",{staticClass:"Attributes__items__header"},[a("tr",[a("th",{staticClass:"Attributes__items__name"},[e._v(" "+e._s(e.$t("page-attributes.name"))+" ")]),a("th",{staticClass:"Attributes__items__type"},[e._v(" "+e._s(e.$t("page-attributes.type"))+" ")]),a("th",{staticClass:"Attributes__items__unit"},[e._v(" "+e._s(e.$t("page-attributes.unit"))+" ")]),a("th",{staticClass:"Attributes__items__max-length"},[e._v(" "+e._s(e.$t("page-attributes.max-length"))+" ")])])]),a("tbody",e._l(e.attributes,(function(t){return a("tr",{key:t.id},[a("td",{staticClass:"Attributes__items__name"},[e._v(" "+e._s(t.name)+" ")]),a("td",{staticClass:"Attributes__items__type"},[e._v(" "+e._s(e.$t("page-attributes.type-"+t.type))+" ")]),a("td",{staticClass:"Attributes__items__unit"},[e._v(" "+e._s(t.unit)+" ")]),a("td",{staticClass:"Attributes__items__max-length"},[e._v(" "+e._s(t.max_length||("string"===t.type?e.$t("page-attributes.no-limit"):""))+" ")])])})),0)]),e.isAddingMode||0!==e.attributes.length?e._e():a("p",{staticClass:"Attributes__no-data"},[e._v(" "+e._s(e.$t("page-attributes.no-attribute-yet"))+" ")]),a("div",{staticClass:"Attributes__add-item"},[e.isAddingMode?a("AttributeEditForm",{ref:"AttributeEditForm",attrs:{errors:e.errors}}):e._e(),a("div",{staticClass:"Attributes__actions",class:{"Attributes__actions--add":e.isAddingMode}},[e.isAddingMode?a("button",{staticClass:"success",on:{click:e.saveAttribute}},[e._v(" "+e._s(e.$t("save"))+" ")]):e._e(),a("button",{class:{success:!e.isAddingMode},on:{click:e.toggleAddingMode}},[e.isAddingMode?e._e():a("span",[a("i",{staticClass:"fas fa-plus"}),e._v(" "+e._s(e.$t("page-attributes.add-btn"))+" ")]),e.isAddingMode?a("span",[e._v(" "+e._s(e.$t("cancel"))+" ")]):e._e()])])],1)])])])},tn=[],an=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"AttributeEditForm"},[a("div",{staticClass:"AttributeEditForm__name"},[a("input",{ref:"InputName",staticClass:"AttributeEditForm__input",attrs:{type:"text",placeholder:e.$t("page-attributes.name")}}),e.errors.name?a("div",{staticClass:"AttributeEditForm__error",staticStyle:{"word-break":"break-all"}},[e._v(" "+e._s(e.errors.name[0])+" ")]):e._e()]),a("div",{staticClass:"AttributeEditForm__type"},[a("select",{ref:"InputType",staticClass:"AttributeEditForm__select",on:{change:e.handleTypeChange}},[a("option",{attrs:{value:"string"}},[e._v(e._s(e.$t("page-attributes.type-string")))]),a("option",{attrs:{value:"integer"}},[e._v(e._s(e.$t("page-attributes.type-integer")))]),a("option",{attrs:{value:"float"}},[e._v(e._s(e.$t("page-attributes.type-float")))]),a("option",{attrs:{value:"boolean"}},[e._v(e._s(e.$t("page-attributes.type-boolean")))])]),e.errors.type?a("ul",{staticClass:"AttributeEditForm__error"},e._l(e.errors.type,(function(t){return a("li",{key:t},[e._v(" "+e._s(t)+" ")])})),0):e._e()]),a("div",{staticClass:"AttributeEditForm__unit"},[e.hasUnit?a("input",{ref:"InputUnit",staticClass:"AttributeEditForm__input",attrs:{type:"text",placeholder:e.$t("page-attributes.unit")}}):e._e(),e.errors.unit?a("div",{staticClass:"AttributeEditForm__error"},[e._v(" "+e._s(e.errors.unit[0])+" ")]):e._e()]),a("div",{staticClass:"AttributeEditForm__max-length"},[e.hasMaxLength?a("input",{ref:"InputMaxLength",staticClass:"AttributeEditForm__input",attrs:{type:"number",placeholder:e.$t("page-attributes.max-length")}}):e._e(),e.errors.max_length?a("div",{staticClass:"AttributeEditForm__error"},[e._v(" "+e._s(e.errors.max_length[0])+" ")]):e._e()])])},sn=[],nn={name:"AttributeEditForm",props:{errors:Object},data:function(){return{hasUnit:!1,hasMaxLength:!0}},methods:{handleTypeChange:function(e){var t=e.currentTarget.value;this.hasUnit="integer"===t||"float"===t,this.hasMaxLength="string"===t},getValues:function(){var e=this.$refs,t=e.InputName,a=e.InputType,s=e.InputUnit,i=e.InputMaxLength,n=t.value,r=a.value,o=s&&s.value||null,l=i&&i.value||null;return{name:n,type:r,unit:o,max_length:l}},reset:function(){this.$refs.InputName.value="",this.$refs.InputType.value="",this.$refs.InputUnit&&(this.$refs.InputUnit.value=""),this.$refs.InputMaxLength&&(this.$refs.InputMaxLength.value="")}}},rn=nn,on=(a("6564"),Object(H["a"])(rn,an,sn,!1,null,null,null)),ln=on.exports,cn={name:"Attributes",components:{Help:de,AttributeEditForm:ln},data:function(){return{attributes:[],isAddingMode:!1,errors:{},help:"page-attributes.help",error:null,isLoading:!1}},mounted:function(){this.fetchAttributes()},methods:{fetchAttributes:function(){var e=this;this.isLoading=!0,this.$http.get("materials/attributes").then((function(t){var a=t.data;e.attributes=a,e.isLoading=!1})).catch(this.displayError)},toggleAddingMode:function(){this.isAddingMode=!this.isAddingMode,this.isAddingMode||this.resetForm()},handleTypeChange:function(e){var t=e.currentTarget.value;this.hasMaxLength="string"===t,this.hasUnit="integer"===t||"float"===t},saveAttribute:function(){var e=this;this.isLoading=!0;var t=this.$refs.AttributeEditForm.getValues();this.$http.post("/attributes",t).then((function(){e.resetForm(),e.fetchAttributes()})).catch(this.displayError)},displayError:function(e){var t,a;this.isLoading=!1,this.error=e;var s=(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||{code:0,details:{}},i=s.code,n=s.details;400===i&&(this.errors=Object(v["a"])({},n))},resetForm:function(){this.errors={},this.isLoading=!1,this.isAddingMode=!1,this.$refs.AttributeEditForm.reset()},goBack:function(){Jn.back()}}},un=cn,dn=(a("0b5f"),Object(H["a"])(un,en,tn,!1,null,null,null)),mn=dn.exports,pn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content Tags"},[a("div",{staticClass:"content__header header-page"},[a("div",{staticClass:"header-page__help"},[a("Help",{attrs:{message:e.help,error:e.error,isLoading:e.isLoading}}),e.validationError?a("div",{staticClass:"header-page__error"},[e._v(" "+e._s(e.validationError)+" ")]):e._e()],1),a("div",{staticClass:"header-page__actions"},[a("button",{staticClass:"Tags__create success",on:{click:function(t){return e.addTag()}}},[a("i",{staticClass:"fas fa-plus"}),e._v(" "+e._s(e.$t("page-tags.action-add"))+" ")])])]),e.isTrashDisplayed?e._e():a("div",{staticClass:"content__main-view Tags__items"},[0===e.tags.length?a("h3",{staticClass:"Tags__empty"},[e._v(" "+e._s(e.$t("page-tags.no-item"))+" ")]):e._e(),e._l(e.tags,(function(t){return a("div",{key:t.id,staticClass:"Tags__item",class:{"Tags__item--protected":e.isProtected(t.name)}},[a("span",{staticClass:"Tags__item__name"},[a("i",{staticClass:"fas fa-tag"}),e._v(" "+e._s(t.name)+" ")]),e.isProtected(t.name)?e._e():a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("action-edit"),expression:"$t('action-edit')"}],staticClass:"Tags__edit-button info",on:{click:function(a){return e.edit(t.id,t.name)}}},[a("i",{staticClass:"fas fa-edit"})]),e.isProtected(t.name)?e._e():a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("action-trash"),expression:"$t('action-trash')"}],staticClass:"Tags__edit-button warning",on:{click:function(a){return e.remove(t.id)}}},[a("i",{staticClass:"fas fa-trash"})])])}))],2),e.isTrashDisplayed?a("div",{staticClass:"content__main-view Tags__items"},[0===e.deletedTags.length?a("h3",{staticClass:"Tags__empty"},[e._v(" "+e._s(e.$t("page-tags.no-item-in-trash"))+" ")]):e._e(),e._l(e.deletedTags,(function(t){return a("div",{key:t.id,staticClass:"Tags__item Tags__item--deleted"},[a("span",{staticClass:"Tags__item__name"},[a("i",{staticClass:"fas fa-tag"}),e._v(" "+e._s(t.name)+" ")]),a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("action-restore"),expression:"$t('action-restore')"}],staticClass:"Tags__edit-button info",on:{click:function(a){return e.restore(t.id)}}},[a("i",{staticClass:"fas fa-trash-restore"})]),a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("action-delete"),expression:"$t('action-delete')"}],staticClass:"Tags__edit-button danger",on:{click:function(a){return e.remove(t.id)}}},[a("i",{staticClass:"fas fa-trash-alt"})])])}))],2):e._e(),a("div",{staticClass:"content__footer"},[a("button",{staticClass:"Tags__show-trashed",class:e.isTrashDisplayed?"info":"warning",on:{click:function(t){return e.showTrashed()}}},[e.isTrashDisplayed?e._e():a("span",[a("i",{staticClass:"fas fa-trash"}),e._v(" "+e._s(e.$t("open-trash-bin"))+" ")]),e.isTrashDisplayed?a("span",[a("i",{staticClass:"fas fa-eye"}),e._v(" "+e._s(e.$t("display-not-deleted-items"))+" ")]):e._e()])])])},fn=[],hn={name:"Tags",components:{Help:de},data:function(){return{help:"page-tags.help",error:null,isLoading:!1,validationError:null,isDisplayTrashed:!1,isTrashDisplayed:!1,deletedTags:[]}},computed:{tags:function(){return S.state.tags.list},isFetched:function(){return S.state.tags.isFetched}},mounted:function(){S.dispatch("tags/fetch")},methods:{isProtected:function(e){return S.getters["tags/isProtected"](e)},addTag:function(){var e=this;We.Prompt(this.$t,this.$t("page-tags.prompt-add"),"page-tags.tag-name","page-tags.create").then((function(t){var a=t.value;a&&e.save(null,a)}))},edit:function(e,t){var a=this;We.Prompt(this.$t,this.$t("page-tags.prompt-modify"),t,"save",t).then((function(t){var s=t.value;s&&a.save(e,s)}))},save:function(e,t){var a=this,s=this.$route.meta.resource,i=this.$http.post,n=s;e&&(i=this.$http.put,n="".concat(s,"/").concat(e)),this.resetHelpLoading(),i(n,{name:t}).then((function(){a.help={type:"success",text:"page-tags.saved"},a.isLoading=!1,S.dispatch("tags/refresh")})).catch(this.displayError)},remove:function(e){var t=this,a=!this.isTrashDisplayed;We.ConfirmDelete(this.$t,"tags",a).then((function(a){a.value&&(t.resetHelpLoading(),t.$http.delete("tags/".concat(e)).then((function(){t.help={type:"success",text:"page-tags.deleted"},t.isLoading=!1,t.isTrashDisplayed?t.fetchDeleted():S.dispatch("tags/refresh")})).catch(t.displayError))}))},restore:function(e){var t=this;We.ConfirmRestore(this.$t,"tags").then((function(a){a.value&&(t.resetHelpLoading(),t.$http.put("".concat(t.$route.meta.resource,"/restore/").concat(e)).then((function(){t.fetchDeleted(),S.dispatch("tags/refresh")})).catch(t.showError))}))},showTrashed:function(){this.isDisplayTrashed=!this.isDisplayTrashed,this.isDisplayTrashed?this.fetchDeleted():(S.dispatch("tags/refresh"),this.isTrashDisplayed=!1)},fetchDeleted:function(){var e=this;this.resetHelpLoading();var t={deleted:!0};this.$http.get(this.$route.meta.resource,{params:t}).then((function(t){var a=t.data;e.deletedTags=a.data,e.isLoading=!1})).catch(this.displayError).finally((function(){e.isTrashDisplayed=e.isDisplayTrashed}))},resetHelpLoading:function(){this.help="page-tags.help",this.error=null,this.isLoading=!0,this.validationError=null},displayError:function(e){var t,a;this.help="page-tags.help",this.isLoading=!1,this.error=e,this.validationError=null;var s=(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||{code:0,details:{}},i=s.code,n=s.details;if(400===i&&n.name){var r=Object(it["a"])(n.name,1);this.validationError=r[0]}}}},_n=hn,vn=(a("7794"),Object(H["a"])(_n,pn,fn,!1,null,null,null)),gn=vn.exports,bn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content Technicians"},[a("div",{staticClass:"content__header header-page"},[a("div",{staticClass:"header-page__help"},[a("Help",{attrs:{message:e.help,error:e.error,isLoading:e.isLoading}})],1),a("div",{staticClass:"header-page__actions"},[a("router-link",{staticClass:"Technicians__create success",attrs:{to:"/technicians/new",tag:"button"}},[a("i",{staticClass:"fas fa-user-plus"}),e._v(" "+e._s(e.$t("page-technicians.action-add"))+" ")])],1)]),a("div",{staticClass:"content__main-view"},[a("v-server-table",{ref:"DataTable",attrs:{name:"techniciansTable",columns:e.columns,options:e.options},scopedSlots:e._u([{key:"email",fn:function(t){return a("div",{},[a("a",{attrs:{href:"mailto:"+t.row.email}},[e._v(e._s(t.row.email))])])}},{key:"phone",fn:function(t){return a("div",{},[e._v(" "+e._s(t.row.phone)+" ")])}},{key:"address",fn:function(t){return a("div",{},[e._v(" "+e._s(t.row.street)),a("br"),e._v(" "+e._s(t.row.postal_code)+" "+e._s(t.row.locality)+" ")])}},{key:"note",fn:function(t){return a("div",{},[a("pre",[e._v(e._s(t.row.note))])])}},{key:"actions",fn:function(t){return a("div",{staticClass:"Technicians__actions"},[e.isTrashDisplayed?e._e():a("router-link",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("action-edit"),expression:"$t('action-edit')"}],staticClass:"item-actions__button info",attrs:{to:"/technicians/"+t.row.id,tag:"button"}},[a("i",{staticClass:"fas fa-edit"})]),e.isTrashDisplayed?e._e():a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("action-trash"),expression:"$t('action-trash')"}],staticClass:"item-actions__button warning",on:{click:function(a){return e.deleteTechnician(t.row.id)}}},[a("i",{staticClass:"fas fa-trash"})]),e.isTrashDisplayed?a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("action-restore"),expression:"$t('action-restore')"}],staticClass:"item-actions__button info",on:{click:function(a){return e.restoreTechnician(t.row.id)}}},[a("i",{staticClass:"fas fa-trash-restore"})]):e._e(),e.isTrashDisplayed?a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("action-delete"),expression:"$t('action-delete')"}],staticClass:"item-actions__button danger",on:{click:function(a){return e.deleteTechnician(t.row.id)}}},[a("i",{staticClass:"fas fa-trash-alt"})]):e._e()],1)}}])})],1),a("div",{staticClass:"content__footer"},[a("button",{staticClass:"Technicians__show-trashed",class:e.isTrashDisplayed?"info":"warning",on:{click:function(t){return e.showTrashed()}}},[e.isTrashDisplayed?e._e():a("span",[a("i",{staticClass:"fas fa-trash"}),e._v(" "+e._s(e.$t("open-trash-bin"))+" ")]),e.isTrashDisplayed?a("span",[a("i",{staticClass:"fas fa-eye"}),e._v(" "+e._s(e.$t("display-not-deleted-items"))+" ")]):e._e()])])])},yn=[],Cn={name:"Technicians",components:{Help:de},data:function(){var e=this;return{help:"page-technicians.help",error:null,isLoading:!1,isDisplayTrashed:!1,isTrashDisplayed:!1,columns:["last_name","first_name","nickname","email","phone","address","note","actions"],options:{columnsDropdown:!0,preserveState:!0,orderBy:{column:"last_name",ascending:!0},initialPage:this.$route.query.page||1,sortable:["last_name","first_name","nickname","email"],columnsDisplay:{note:"mobile"},headings:{last_name:this.$t("last-name"),first_name:this.$t("first-name"),nickname:this.$t("nickname"),email:this.$t("email"),phone:this.$t("phone"),address:this.$t("address"),note:this.$t("notes"),actions:""},columnsClasses:{nickname:"Technicians__nickname",email:"Technicians__email",address:"Technicians__address",note:"Technicians__note"},requestFunction:function(t){e.error=null,e.isLoading=!0;var a=Object(v["a"])(Object(v["a"])({},t),{},{tags:[_.technicianTagName],deleted:e.isDisplayTrashed?"1":"0"});return e.$http.get(e.$route.meta.resource,{params:a}).catch(e.showError).finally((function(){e.isTrashDisplayed=e.isDisplayTrashed,e.isLoading=!1}))}}}},methods:{deleteTechnician:function(e){var t=this,a=!this.isTrashDisplayed;We.ConfirmDelete(this.$t,"technicians",a).then((function(a){a.value&&(t.error=null,t.isLoading=!0,t.$http.delete("".concat(t.$route.meta.resource,"/").concat(e)).then(t.refreshTable).catch(t.showError))}))},restoreTechnician:function(e){var t=this;We.ConfirmRestore(this.$t,"technicians").then((function(a){a.value&&(t.error=null,t.isLoading=!0,t.$http.put("".concat(t.$route.meta.resource,"/restore/").concat(e)).then(t.refreshTable).catch(t.showError))}))},refreshTable:function(){this.help="page-technicians.help",this.error=null,this.isLoading=!0,this.$refs.DataTable.refresh()},showTrashed:function(){this.isDisplayTrashed=!this.isDisplayTrashed,this.refreshTable()},showError:function(e){this.isLoading=!1,this.error=e}}},$n=Cn,wn=(a("1669"),Object(H["a"])($n,bn,yn,!1,null,null,null)),kn=wn.exports,En=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"content__main-view"},[a("div",{staticClass:"Technician"},[a("PersonForm",{attrs:{person:e.person,errors:e.errors},on:{submit:e.saveTechnician}}),a("Help",{attrs:{message:e.help,error:e.error,isLoading:e.isLoading}})],1)])])},Tn=[],jn={name:"Technician",components:{Help:de,PersonForm:mi},data:function(){return{help:"page-technicians.help-edit",error:null,isLoading:!1,person:{id:this.$route.params.id||null,email:"",first_name:"",last_name:"",nickname:"",phone:"",street:"",postal_code:"",locality:"",note:""},errors:{first_name:null,last_name:null,nickname:null,phone:null,street:null,postal_code:null,locality:null,note:null}}},mounted:function(){this.getTechnicianData()},methods:{getTechnicianData:function(){var e=this,t=this.person.id;if(t&&"new"!==t){this.resetHelpLoading();var a=this.$route.meta.resource;this.$http.get("".concat(a,"/").concat(t)).then((function(t){var a=t.data;e.setPerson(a),e.isLoading=!1})).catch(this.displayError)}},saveTechnician:function(e){var t=this;e.preventDefault(),this.resetHelpLoading();var a=this.person.id,s=this.$route.meta.resource,i=this.$http.post,n=s;a&&(i=this.$http.put,n="".concat(s,"/").concat(a));var r=Object(v["a"])({},this.person);a||(r.tags=[_.technicianTagName]),i(n,r).then((function(e){var a=e.data;t.isLoading=!1,t.help={type:"success",text:"page-technicians.saved"},t.setPerson(a),setTimeout((function(){t.$router.push("/technicians")}),300)})).catch(this.displayError)},resetHelpLoading:function(){this.help="page-technicians.help-edit",this.error=null,this.isLoading=!0},displayError:function(e){var t,a;this.help="page-technicians.help-edit",this.error=e,this.isLoading=!1;var s=(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||{code:0,details:{}},i=s.code,n=s.details;400===i&&(this.errors=Object(v["a"])({},n))},setPerson:function(e){this.person=e;var t=e.full_name||"".concat(e.first_name," ").concat(e.last_name);S.commit("setPageSubTitle",t)}}},Dn=jn,Mn=(a("cb24"),Object(H["a"])(Dn,En,Tn,!1,null,null,null)),Fn=Mn.exports,Sn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content Categories"},[a("div",{staticClass:"content__header header-page"},[a("div",{staticClass:"header-page__help"},[a("Help",{attrs:{message:e.help,error:e.error,isLoading:e.isLoading}}),e.validationError?a("div",{staticClass:"header-page__error"},[e._v(" "+e._s(e.validationError)+" ")]):e._e()],1),a("div",{staticClass:"header-page__actions"},[a("button",{staticClass:"Categories__create success",on:{click:function(t){return e.addCategory()}}},[a("i",{staticClass:"fas fa-plus"}),e._v(" "+e._s(e.$t("page-categories.action-add"))+" ")])])]),a("div",{staticClass:"content__main-view Categories__items"},e._l(e.categories,(function(t){return a("div",{key:t.id,staticClass:"Categories__category"},[a("div",{staticClass:"Categories__category__name"},[a("i",{staticClass:"fas fa-folder-open"}),e._v(" "+e._s(t.name)+" "),a("div",{staticClass:"Categories__category__actions"},[a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("action-edit"),expression:"$t('action-edit')"}],staticClass:"Categories__edit-button info",on:{click:function(a){return e.editCategory(t.id,t.name)}}},[a("i",{staticClass:"fas fa-edit"})]),a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("action-trash"),expression:"$t('action-trash')"}],staticClass:"Categories__edit-button warning",on:{click:function(a){return e.remove("categories",t.id)}}},[a("i",{staticClass:"fas fa-trash"})])])]),a("div",{staticClass:"Categories__sub-categories"},[e._l(t.sub_categories,(function(t){return a("div",{key:t.id,staticClass:"Categories__sub-category"},[a("div",{staticClass:"Categories__sub-category__name"},[a("i",{staticClass:"fas fa-arrow-right"}),e._v(" "+e._s(t.name)+" "),a("div",{staticClass:"Categories__sub-category__actions"},[a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("action-edit"),expression:"$t('action-edit')"}],staticClass:"Categories__edit-button info",on:{click:function(a){return e.editSubCategory(t.id,t.name)}}},[a("i",{staticClass:"fas fa-edit"})]),a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("action-trash"),expression:"$t('action-trash')"}],staticClass:"Categories__edit-button warning",on:{click:function(a){return e.remove("subcategories",t.id)}}},[a("i",{staticClass:"fas fa-trash"})])])])])})),a("a",{staticClass:"Categories__add-link",on:{click:function(a){return e.addSubCategory(t.id,t.name)}}},[a("i",{staticClass:"fas fa-plus"}),e._v(" "+e._s(e.$t("page-subcategories.add"))+" ")])],2)])})),0)])},xn=[],Ln={name:"Categories",components:{Help:de},data:function(){return{help:"page-categories.help",error:null,isLoading:!1,validationError:null}},computed:{categories:function(){return S.state.categories.list},isFetched:function(){return S.state.categories.isFetched}},mounted:function(){S.dispatch("categories/fetch")},methods:{addCategory:function(){var e=this;We.Prompt(this.$t,this.$t("page-categories.prompt-add"),"page-categories.category-name","page-categories.create").then((function(t){var a=t.value;a&&e.save("categories",null,a)}))},editCategory:function(e,t){var a=this;We.Prompt(this.$t,this.$t("page-categories.prompt-modify"),t,"save",t).then((function(t){var s=t.value;s&&a.save("categories",e,s)}))},addSubCategory:function(e,t){var a=this;We.Prompt(this.$t,this.$t("page-subcategories.prompt-add",{categoryName:t}),"page-subcategories.sub-category-name","page-subcategories.create").then((function(t){var s=t.value;s&&a.saveNewSubCategory(s,e)}))},editSubCategory:function(e,t){var a=this;We.Prompt(this.$t,this.$t("page-subcategories.prompt-modify"),t,"save",t).then((function(t){var s=t.value;s&&a.save("subcategories",e,s)}))},save:function(e,t,a){var s=this;this.resetHelpLoading();var i=this.$http.post,n=e;t&&(i=this.$http.put,n="".concat(e,"/").concat(t));var r="page-categories.saved";"subcategories"===e&&(r="page-subcategories.saved"),i(n,{name:a}).then((function(){s.isLoading=!1,s.help={type:"success",text:r},S.dispatch("categories/refresh")})).catch(this.displayError)},saveNewSubCategory:function(e,t){var a=this;this.resetHelpLoading(),this.$http.post("subcategories",{name:e,category_id:t}).then((function(){a.isLoading=!1,a.help={type:"success",text:"page-subcategories.saved"},S.dispatch("categories/refresh")})).catch(this.displayError)},remove:function(e,t){var a=this,s="page-categories.deleted";"subcategories"===e&&(s="page-subcategories.deleted"),We.ConfirmDelete(this.$t,e).then((function(i){i.value&&(a.resetHelpLoading(),a.isLoading=!1,a.$http.delete("".concat(e,"/").concat(t)).then((function(){a.help={type:"success",text:s},S.dispatch("categories/refresh")})).catch(a.displayError))}))},resetHelpLoading:function(){this.help="page-categories.help",this.error=null,this.isLoading=!0,this.validationError=null},displayError:function(e){var t,a;this.help="page-categories.help",this.error=e,this.isLoading=!1,this.validationError=null;var s=(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||{code:0,details:{}},i=s.code,n=s.details;if(400===i&&n.name){var r=Object(it["a"])(n.name,1);this.validationError=r[0]}}}},On=Ln,qn=(a("b0b8"),Object(H["a"])(On,Sn,xn,!1,null,null,null)),An=qn.exports,Nn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content Parks"},[a("div",{staticClass:"content__header header-page"},[a("div",{staticClass:"header-page__help"},[a("Help",{attrs:{message:e.help,error:e.error,isLoading:e.isLoading}})],1),a("div",{staticClass:"header-page__actions"},[a("router-link",{staticClass:"success",attrs:{to:"/parks/new",tag:"button"}},[a("i",{staticClass:"fas fa-user-plus"}),e._v(" "+e._s(e.$t("page-parks.action-add"))+" ")])],1)]),a("div",{staticClass:"content__main-view"},[a("v-server-table",{ref:"DataTable",attrs:{name:"ParksTable",columns:e.columns,options:e.options},scopedSlots:e._u([{key:"name",fn:function(t){return a("div",{},[e._v(" "+e._s(t.row.name)+" ")])}},{key:"address",fn:function(t){return a("div",{},[e._v(" "+e._s(t.row.street)),a("br"),e._v(" "+e._s(t.row.postal_code)+" "+e._s(t.row.locality)+" ")])}},{key:"totalItems",fn:function(t){return a("div",{},[a("router-link",{attrs:{to:"/materials?park="+t.row.id}},[e._v(" "+e._s(e.$t("items-count",{count:t.row.total_items},t.row.total_items))+" ")]),t.row.total_items>0?a("span",{staticClass:"Parks__total-stock"},[e._v(" ("+e._s(e.$t("stock-items-count",{count:t.row.total_stock_quantity}))+") ")]):e._e(),a("span",{staticClass:"Parks__total-amount"},[e._v(" ("+e._s(e.formatAmount(t.row.total_amount))+") ")])],1)}},{key:"note",fn:function(t){return a("div",{},[a("pre",[e._v(e._s(t.row.note))])])}},{key:"actions",fn:function(t){return a("div",{staticClass:"Parks__actions"},[e.isTrashDisplayed?e._e():a("router-link",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("action-edit"),expression:"$t('action-edit')"}],staticClass:"item-actions__button info",attrs:{to:"/parks/"+t.row.id,tag:"button"}},[a("i",{staticClass:"fas fa-edit"})]),e.isTrashDisplayed?e._e():a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("action-trash"),expression:"$t('action-trash')"}],staticClass:"item-actions__button warning",on:{click:function(a){return e.deletePark(t.row.id)}}},[a("i",{staticClass:"fas fa-trash"})]),e.isTrashDisplayed?a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("action-restore"),expression:"$t('action-restore')"}],staticClass:"item-actions__button info",on:{click:function(a){return e.restorePark(t.row.id)}}},[a("i",{staticClass:"fas fa-trash-restore"})]):e._e(),e.isTrashDisplayed?a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("action-delete"),expression:"$t('action-delete')"}],staticClass:"item-actions__button danger",on:{click:function(a){return e.deletePark(t.row.id)}}},[a("i",{staticClass:"fas fa-trash-alt"})]):e._e()],1)}}])})],1),a("div",{staticClass:"content__footer"},[a("button",{staticClass:"Parks__show-trashed",class:e.isTrashDisplayed?"info":"warning",on:{click:function(t){return e.showTrashed()}}},[e.isTrashDisplayed?e._e():a("span",[a("i",{staticClass:"fas fa-trash"}),e._v(" "+e._s(e.$t("open-trash-bin"))+" ")]),e.isTrashDisplayed?a("span",[a("i",{staticClass:"fas fa-eye"}),e._v(" "+e._s(e.$t("display-not-deleted-items"))+" ")]):e._e()])])])},Pn=[],In={name:"Parks",components:{Help:de},data:function(){var e=this;return{help:"page-parks.help",error:null,isLoading:!1,isDisplayTrashed:!1,isTrashDisplayed:!1,columns:["name","address","opening_hours","totalItems","note","actions"],options:{columnsDropdown:!0,preserveState:!0,orderBy:{column:"name",ascending:!0},initialPage:this.$route.query.page||1,sortable:["name"],columnsDisplay:{note:"mobile"},headings:{name:this.$t("name"),address:this.$t("address"),opening_hours:this.$t("opening-hours"),totalItems:this.$t("page-parks.total-items"),note:this.$t("notes"),actions:""},columnsClasses:{address:"Parks__address",opening_hours:"Parks__opening-hours",note:"Parks__note"},requestFunction:function(t){e.error=null,e.isLoading=!0;var a=Object(v["a"])(Object(v["a"])({},t),{},{deleted:e.isDisplayTrashed?"1":"0"});return e.$http.get(e.$route.meta.resource,{params:a}).catch(e.showError).finally((function(){e.isTrashDisplayed=e.isDisplayTrashed,e.isLoading=!1}))}}}},methods:{deletePark:function(e){var t=this,a=!this.isTrashDisplayed;We.ConfirmDelete(this.$t,"parks",a).then((function(a){a.value&&t.$http.delete("".concat(t.$route.meta.resource,"/").concat(e)).then(t.refreshTable).catch(t.showError)}))},restorePark:function(e){var t=this;We.ConfirmRestore(this.$t,"parks").then((function(a){a.value&&(t.error=null,t.isLoading=!0,t.$http.put("".concat(t.$route.meta.resource,"/restore/").concat(e)).then(t.refreshTable).catch(t.showError))}))},formatAmount:function(e){return ct(e)},refreshTable:function(){this.error=null,this.isLoading=!0,this.$refs.DataTable.refresh(),S.dispatch("parks/refresh")},showTrashed:function(){this.isDisplayTrashed=!this.isDisplayTrashed,this.refreshTable()},showError:function(e){this.isLoading=!1,this.error=e}}},Bn=In,Rn=(a("0fc2"),Object(H["a"])(Bn,Nn,Pn,!1,null,null,null)),Hn=Rn.exports,zn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"content__main-view"},[a("div",{staticClass:"Park"},[a("form",{staticClass:"Form",attrs:{method:"POST"},on:{submit:e.savePark}},[a("section",{staticClass:"Form__fieldset"},[a("h4",{staticClass:"Form__fieldset__title"},[e._v(" "+e._s(e.$t("minimal-infos"))+" "),a("span",{staticClass:"FormField__label__required"},[e._v("*")])]),a("FormField",{attrs:{name:"name",label:"name",required:"",errors:e.errors.name},model:{value:e.park.name,callback:function(t){e.$set(e.park,"name",t)},expression:"park.name"}})],1),a("section",{staticClass:"Form__fieldset"},[a("h4",{staticClass:"Form__fieldset__title"},[e._v(" "+e._s(e.$t("contact-details"))+" ")]),a("FormField",{attrs:{name:"street",label:"street",errors:e.errors.street},model:{value:e.park.street,callback:function(t){e.$set(e.park,"street",t)},expression:"park.street"}}),a("FormField",{staticClass:"Park__postal-code",attrs:{name:"postal_code",label:"postal-code",errors:e.errors.postal_code},model:{value:e.park.postal_code,callback:function(t){e.$set(e.park,"postal_code",t)},expression:"park.postal_code"}}),a("FormField",{attrs:{name:"locality",label:"city",errors:e.errors.locality},model:{value:e.park.locality,callback:function(t){e.$set(e.park,"locality",t)},expression:"park.locality"}}),a("FormField",{attrs:{name:"country_id",label:"country",type:"select",options:e.countriesOptions,errors:e.errors.country_id},model:{value:e.park.country_id,callback:function(t){e.$set(e.park,"country_id",t)},expression:"park.country_id"}})],1),a("section",{staticClass:"Form__fieldset"},[a("h4",{staticClass:"Form__fieldset__title"},[e._v(" "+e._s(e.$t("other-infos"))+" ")]),a("FormField",{attrs:{name:"opening_hours",label:"opening-hours",errors:e.errors.opening_hours},model:{value:e.park.opening_hours,callback:function(t){e.$set(e.park,"opening_hours",t)},expression:"park.opening_hours"}}),a("FormField",{attrs:{name:"note",label:"notes",type:"textarea",errors:e.errors.note},model:{value:e.park.note,callback:function(t){e.$set(e.park,"note",t)},expression:"park.note"}})],1),a("section",{staticClass:"Form__actions"},[a("button",{staticClass:"Form__actions__save success",attrs:{type:"submit"}},[e._v(" "+e._s(e.$t("save"))+" ")])])]),a("Help",{attrs:{message:e.help,error:e.error,isLoading:e.isLoading}})],1)])])},Un=[],Vn={name:"Material",components:{Help:de,FormField:Te},data:function(){return{help:"page-parks.help-edit",error:null,isLoading:!1,park:{id:this.$route.params.id||null,name:"",street:"",postal_code:"",locality:"",country_id:"",note:""},errors:{name:null,street:null,postal_code:null,locality:null,country_id:null}}},computed:{countriesOptions:function(){return S.getters["countries/options"]}},mounted:function(){S.dispatch("countries/fetch"),this.getParkData()},methods:{getParkData:function(){var e=this,t=this.park.id;if(t&&"new"!==t){this.resetHelpLoading();var a=this.$route.meta.resource;this.$http.get("".concat(a,"/").concat(t)).then((function(t){var a=t.data;e.setParkData(a),e.isLoading=!1})).catch(this.displayError)}},savePark:function(e){var t=this;e.preventDefault(),this.resetHelpLoading();var a=this.park.id,s=this.$route.meta.resource,i=this.$http.post,n=s;a&&(i=this.$http.put,n="".concat(s,"/").concat(a)),i(n,Object(v["a"])({},this.park)).then((function(e){var a=e.data;t.isLoading=!1,t.help={type:"success",text:"page-parks.saved"},t.setParkData(a),S.dispatch("parks/refresh"),setTimeout((function(){t.$router.push("/parks")}),300)})).catch(this.displayError)},resetHelpLoading:function(){this.help="page-parks.help-edit",this.error=null,this.isLoading=!0},displayError:function(e){var t,a;this.help="page-parks.help-edit",this.error=e,this.isLoading=!1;var s=(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||{code:0,details:{}},i=s.code,n=s.details;400===i&&(this.errors=Object(v["a"])({},n))},setParkData:function(e){this.park=e,S.commit("setPageSubTitle",this.park.name)}}},Qn=Vn,Gn=(a("6e11"),Object(H["a"])(Qn,zn,Un,!1,null,null,null)),Yn=Gn.exports;s["a"].use(y["a"]);var Wn=new y["a"]({mode:"history",linkActiveClass:"SideMenu__item--active",routes:[{path:"/login",name:"login",component:Y},{path:"/profile",name:"user-profile",component:Fe,meta:{resource:"users",readableName:"page-profile.title",requiresAuth:!0,requiresGroups:["admin","member","visitor"]}},{path:"/settings",name:"user-settings",component:Ae,meta:{resource:"users",readableName:"page-settings.title",requiresAuth:!0,requiresGroups:["admin","member","visitor"]}},{path:"/",name:"calendar",component:ca,meta:{resource:"events",readableName:"page-calendar.title",requiresAuth:!0,requiresGroups:["admin","member","visitor"]}},{path:"/events/new",name:"addEvent",component:Bs,meta:{resource:"events",readableName:"page-events.add",requiresAuth:!0,requiresGroups:["admin","member"]}},{path:"/events/:id",name:"editEvent",component:Bs,meta:{resource:"events",readableName:"page-events.edit",requiresAuth:!0,requiresGroups:["admin","member"]}},{path:"/users",name:"users",component:Qs,meta:{resource:"users",readableName:"page-users.title",requiresAuth:!0,requiresGroups:["admin"]}},{path:"/users/new",name:"addUser",component:Xs,meta:{resource:"users",readableName:"page-users.add",requiresAuth:!0,requiresGroups:["admin"]}},{path:"/users/:id",name:"editUser",component:Xs,meta:{resource:"users",readableName:"page-users.edit",requiresAuth:!0,requiresGroups:["admin"]}},{path:"/beneficiaries",name:"beneficiaries",component:ii,meta:{resource:"persons",readableName:"page-beneficiaries.title",requiresAuth:!0,requiresGroups:["admin","member"]}},{path:"/beneficiaries/new",name:"addBeneficiary",component:_i,meta:{resource:"persons",readableName:"page-beneficiaries.add",requiresAuth:!0,requiresGroups:["admin","member"]}},{path:"/beneficiaries/:id",name:"editBeneficiary",component:_i,meta:{resource:"persons",readableName:"page-beneficiaries.edit",requiresAuth:!0,requiresGroups:["admin","member"]}},{path:"/companies/new",name:"addCompany",component:Di,meta:{resource:"companies",readableName:"page-companies.add",requiresAuth:!0,requiresGroups:["admin","member"]}},{path:"/companies/:id",name:"editCompany",component:Di,meta:{resource:"companies",readableName:"page-companies.edit",requiresAuth:!0,requiresGroups:["admin","member"]}},{path:"/materials",name:"materials",component:Qi,meta:{resource:"materials",readableName:"page-materials.title",requiresAuth:!0,requiresGroups:["admin","member"]}},{path:"/materials/new",name:"addMaterial",component:Zi,meta:{resource:"materials",readableName:"page-materials.add",requiresAuth:!0,requiresGroups:["admin","member"]}},{path:"/materials/:id",name:"editMaterial",component:Zi,meta:{resource:"materials",readableName:"page-materials.edit",requiresAuth:!0,requiresGroups:["admin","member"]}},{path:"/attributes",name:"attributes",component:mn,meta:{resource:"attributes",readableName:"page-attributes.title",requiresAuth:!0,requiresGroups:["admin"]}},{path:"/categories",name:"categories",component:An,meta:{resource:"categories",readableName:"page-categories.title",requiresAuth:!0,requiresGroups:["admin"]}},{path:"/technicians",name:"technicians",component:kn,meta:{resource:"persons",readableName:"page-technicians.title",requiresAuth:!0,requiresGroups:["admin","member"]}},{path:"/technicians/new",name:"addTechnician",component:Fn,meta:{resource:"persons",readableName:"page-technicians.add",requiresAuth:!0,requiresGroups:["admin","member"]}},{path:"/technicians/:id",name:"editTechnician",component:Fn,meta:{resource:"persons",readableName:"page-technicians.edit",requiresAuth:!0,requiresGroups:["admin","member"]}},{path:"/tags",name:"tags",component:gn,meta:{resource:"tags",readableName:"page-tags.title",requiresAuth:!0,requiresGroups:["admin"]}},{path:"/parks",name:"parks",component:Hn,meta:{resource:"parks",readableName:"page-parks.title",requiresAuth:!0,requiresGroups:["admin"]}},{path:"/parks/new",name:"addPark",component:Yn,meta:{resource:"parks",readableName:"page-parks.add",requiresAuth:!0,requiresGroups:["admin"]}},{path:"/parks/:id",name:"editPark",component:Yn,meta:{resource:"parks",readableName:"page-parks.edit",requiresAuth:!0,requiresGroups:["admin"]}},{path:"*",redirect:"/"}]});Wn.beforeEach((function(e,t,a){var s=!1,i=e.matched.some((function(e){return e.meta.requiresAuth}));i&&!Kn.is.authenticated&&(s=!0);var n=e.matched[0].meta.requiresGroups,r=S.state.user.groupId;if(n&&n.length){var o=n.includes(r);o||(s=!0)}if(s)return window.localStorage.removeItem("lastVisited"),void Kn.logout({mode:"restricted"});a()})),Wn.afterEach((function(e){var t=e.name,a=e.fullPath,s=e.matched;if("login"!==t){window.localStorage.setItem("lastVisited",a);var i=s[0].meta.readableName;S.commit("setPageTitle",i)}}));var Jn=Wn,Kn={is:{authenticated:!1},login:function(e,t){var a=this;e.$http.post("token",t).then((function(t){var s=t.data;window.sessionStorage.setItem("token",s.token),a.is.authenticated=!0;var i=s.user;S.commit("user/init",i);var n=i.settings.language.toLowerCase();e.$i18n.set(n),window.localStorage.setItem("userLocale",n);var r=window.localStorage.getItem("lastVisited"),o=r&&"/login"!==r?r:"/";Jn.replace(o||"/")})).catch((function(t){if(t.response){var a=t.response,s=a.status,i=a.data,n=404!==s||i.error?404:0,r=i.error?i.error.message:"network error";e.errorMessage({code:n,message:r})}else e.errorMessage({code:0,message:"network error"})}))},logout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{mode:null},t=e.mode;S.commit("user/reset"),window.sessionStorage.clear(),this.is.authenticated=!1,Jn.replace({path:"/login",hash:t}).catch((function(){}))},checkAuth:function(){var e=window.sessionStorage.getItem("token");if(e){this.is.authenticated=!0;var t=window.localStorage.getItem("lastVisited");Jn.replace(t||"calendar")}else this.logout()}},Xn=b.a.create({baseURL:_.api.url,headers:_.api.headers});Xn.interceptors.request.use((function(e){var t=Object(v["a"])({},e),a=window.sessionStorage.getItem("token");return a&&(t.headers.Authorization="Bearer ".concat(a)),t}),(function(e){return Promise.reject(e)})),Xn.interceptors.response.use((function(e){return e}),(function(e){var t=e.response||{status:0},a=t.status;return 401===a&&Kn.logout({mode:"expired"}),Promise.reject(e)}));var Zn=Xn,er={"hello-nick":"Hello {nick}!","your-profile":"Your profile","your-settings":"Your settings","logout-quit":"Quit Robert","action-add":"Add","action-edit":"Edit","action-trash":"Trash bin","action-restore":"Restore","action-delete":"Delete","action-enable":"Enable","action-disable":"Disable","action-refresh":"Refresh data",yes:"Yes",no:"No","help-loading":"Loading...","please-confirm":"Please confirm...","yes-delete":"Yes, move in trash bin","yes-permanently-delete":"Yes, permanently delete","yes-restore":"Oui, restaurer",cancel:"Cancel",close:"Close","copy-to-clipboard":"Copy to clipboard","copied-in-clipboard":"Copied in clipboard!","please-choose":"Please choose...","add-item":"Add a {item}","remove-item":"Remove this {item}","cancel-add-item":"Cancel adding {item}","item-not-found":"{item} not found. Element may have been deleted.",locked:"locked",save:"Save",add:"Add",saving:"Saving...",saved:"{entity} saved.",actions:"Actions",informations:"Informations","connexion-infos":"Credentials","personnal-infos":"Personnal informations","minimal-infos":"Minimal informations","billing-infos":"Billing informations",billing:"Billing","extra-infos":"Extra informations","special-attributes":"Special attributes",pseudo:"Pseudo","email-address-or-pseudo":"E-mail address or Pseudo",password:"Password","first-name":"First name","last-name":"Last name",name:"Name",nickname:"Nickname",company:"Company","legal-name":"Legal name",contact:"Contact","contact-details":"Contact details","other-infos":"Other informations",email:"E-mail",phone:"Phone",address:"Address",street:"Street and Number","postal-code":"Postal code",city:"City",locality:"City",country:"Pays",group:"Group",admin:"Administrator",member:"Member",visitor:"Visitor","opening-hours":"Opening hours",notes:"Notes",description:"Description",ref:"Ref.",reference:"Reference",park:"Park","rental-price":"Rental price","replacement-price":"Replacement price","rent-price":"Rent. price","repl-price":"Repl. price","serial-number":"Serial n°",quantity:"Stock qty","quantity-out-of-order":"Out of order qty",discountable:"Discountable?","hidden-on-bill":"Hidden on bill?","price-must-be-zero":"the rental price must be 0","all-parks":"All parks combined","all-categories":"All categories","all-sub-categories":"All sub-categories","open-trash-bin":"Display trash bin","display-not-deleted-items":"Display not deleted items","event-details":"Event's details",title:"Title","start-date":"Start Date","end-date":"End Date",location:"Location",duration:"Duration","duration-days":"Duration {duration} days",confirmed:"Confirmed","not-confirmed":"Not confirmed","is-billable":"Is billable?","is-not-billable-help":"« Loan » Mode: no billing.","is-billable-help":"« Rent » Mode: billing possible.","event-not-billable":"This event is defined as « not billable ».","enable-billable-event":"Enable billing for this event",confirm:"Confirm","set-back-on-hold":"Set back on hold","set-event-confirmed":"Confirm event","set-back-event-pending":"Set back event on hold",print:"Print","print-summary":"Print this summary",in:"In","open-in-openstreetmap":"Search in OpenStreetMap","on-date":"On {date}","from-date-to-date":"from {from} to {to}",for:"For",with:"With","in-progress":"in progress","show-materials-details":"Show detailed materials list","hide-materials-details":"Hide materials list",bill:"Bill","no-bill-help":"No bill for this event yet.","missing-beneficiary":"Missing beneficiary","not-billable-help":"You can't create a bill for an event without at least one beneficiary.","click-edit-to-create-one":"Click on « Edit » button to add one.","download-bill-help1":"Bill n° {number}, generated on {date}","download-bill-help2":"with a discount rate of {discountRate} %","download-bill-help3":"for an amount of {amount}","create-bill-help":"You can create a new bill for the first beneficiary in the list, and give it a discount rate or amount:",discount:"Discount","without-discount":"Without discount","wanted-rate":"Rate in %","wanted-amount":"Wanted amount","create-bill":"Create bill","download-bill-pdf":"Download PDF file","regenerate-bill-help":"You can regenerate the bill to change discount, or if the event has been modified.","click-here-to-regenerate":"Click here to create a new bill.",total:"Total","total-discountable":"Total discountable","items-count":["{count} item","{count} items"],"stock-items-count":"{count} in stock","sub-total":"Sub-total","total-amount":"Total amount","total-amount-with-discount":"Total with discount","replacement-total":"Total replacement price",day:"day",days:"days",ratio:"ratio","ratio-long":"Ratio",tags:"Tags","add-tags":"Add tags","choose-tags-below":"Choose tags below:","entity-name-tags":"Tags of « {entityName} »","remove-all-tags":"Remove all tags","remaining-count":"{count} remaining",event:"Event",user:"User",beneficiary:"Beneficiary",material:"Material",category:"Category","sub-category":"Sub-category",categories:"Categories",technician:"Technicien","this-feature-is-coming-soon":"This feature implementation is in progress.",french:"Français",english:"English"},tr={"page-login":{welcome:"Hello! Who are you?",connexion:"Enter Robert","please-wait":"Authentication, please wait...",bye:"See you !",footer:"Robert2 is a free (as in 'freedom') software. You can copy and redistribute it freely, except for commercial purpose.","official-website":"Official website","community-forum":"Community Forum",error:{"bad-infos":"Given infos ar not correct. Please give your e-mail address or pseudo, and your password.","expired-session":"Your session has expired. Please log back in!","not-allowed":"You tried to visit a page with restricted access. Please log in with an account who can access this page."}},"page-profile":{title:"Profile of user « {pageSubTitle} »",help:"","you-are-group":"You are: {group}.","edit-password":"Change your password","password-confirmation":"Password confirmation","password-confirmation-must-match":"Password and its confirmation must be identical.","password-modified":"Your password was modified.",saved:"Your profile was saved."},"page-settings":{title:"Settings of {pageSubTitle}",help:"The « duration of a session » is the time allowed before you're automatically logged out.","auth-token-validity-duration":"Max. duration of a session",interface:"Interface",language:"Language",hours:"hours",saved:"Settings saved."},"page-calendar":{title:"Calendar",help:"Click and drag to move timeline. Use mouse wheel to zoom in / out. Double-click on an empty column to create an event with start date pre-filled.","help-center-view-on-today":"Center calendar on today","help-add-event":"Create a new event","add-event":"New event","confirm-delete":"Move this event in trash bin?","confirm-permanently-delete":"Do you really want to permanently delete this event?","confirm-restore":"Do you really want to restore this event?","event-deleted":"The event was deleted.","event-saved":"The event was saved.","loading-event":"Loading event...","help-timeline-event-operations":"Click to selct the event and move or resize it. Double-click to open event's preview.","center-on-today":"Center on today","center-on":"Center on","this-event-is-past":"This event is past.","this-event-is-currently-running":"This event is currently running.","this-event-is-confirmed":"This event is confirmed.","this-event-has-missing-materials":"This event has missing materials."},"page-events":{"help-edit":"","back-to-calendar":"Back to calendar",add:"New event",edit:"Modify event « {pageSubTitle} »","edit-event":"Modify event","save-and-back-to-calendar":"Save and back to calendar","save-and-continue":"Save and continue",step:"Step","event-informations":"Informations","event-beneficiaries":"Beneficiaries","event-technicians":"Technicians","event-materials":"Materials","event-summary":"Summary","event-confirmation":"Confirmation",saved:"Event saved.","not-saved":"Event has not saved modifications","display-only-selected-materials":"Display event's selected materials only?","event-not-confirmed-help":"The event is not confirmed yet. It is subject to change at any time.","event-confirmed-help":"The event is confirmed: its information should no longer change.","event-missing-materials":"Missing materials","event-missing-materials-help":"These are the missing materials for the period of the event, because it is used in another event, the number needed is too high, or there are some out of order. These materials must therefore be added to the park, or rented from another company.","warning-no-material":"Warning: this event is empty, there is no material at the moment!","warning-no-beneficiary":"Warning: this event has no beneficiaries!","missing-material-count":"Need {quantity}, missing {missing}!","beneficiary-billing-help":"Only the first beneficiary in the list will be displayed on the bill.","all-events":"All events","event-with-missing-material-only":"Events with missing material only?"},"page-users":{title:"Users",help:"You can send an email to an user by clicking on his/her adress.","help-edit":"« Administrator » group gives all access rights to user. Group « Member » allow user to use most parts of Robert application. And « Visitor » group gives a limited access to some data.","action-add":"New user",add:"New user",edit:"Modify user « {pageSubTitle} »","confirm-delete":"Move this user in trash bin?","confirm-permanently-delete":"Do you really want to permanently delete this user?","confirm-restore":"Do you really want to restore this user?",saved:"User saved.","profile-missing-or-deleted":"Profile missing or deleted"},"page-beneficiaries":{title:"Beneficiaries",help:"You can send an email to a beneficiary by clicking on his/her adress.","action-add":"New beneficiary",add:"New beneficiary",edit:"Modify beneficiary « {pageSubTitle} »","beneficiary-type":"Beneficiary type",person:"Natural person (individual)",company:"Legal entity (company)","help-edit":"Only first name and last name are mandatory.","confirm-delete":"Move this beneficiary in trash bin?","confirm-permanently-delete":"Do you really want to permanently delete this beneficiary?","confirm-restore":"Do you really want to restore this beneficiary?",saved:"Beneficiary saved."},"page-companies":{title:"Companies",add:"New company",edit:"Modify company « {pageSubTitle} »","edit-btn":"Modify company","create-new":"Add a new company","help-edit":"The legal name of the company is mandatory.","attached-persons":"People attached to the company",saved:"Company saved."},"page-materials":{title:"Materials",help:"You can choose a park, a category or some tags to filter materials.","action-add":"New material",add:"New material",edit:"Modify material « {pageSubTitle} »","help-edit":"Give a short name, and use the description field to detail the material if needed.","confirm-delete":"Move this material in trash bin?","confirm-permanently-delete":"Do you really want to permanently delete this material?","confirm-restore":"Do you really want to restore this material?",saved:"Material saved.","clear-filters":"Clear filters"},"page-attributes":{title:"Material special attributes",help:"Here you can check, and add fields that allows you to describe your material according to your own criteria.","go-back-to-material":"Back to material",name:"Name of the attribute",type:"Attribute type",unit:"Unit","max-length":"Max. length","type-string":"Text","type-integer":"Integer number","type-float":"Decimal number","type-boolean":"Boolean (Yes/No)","no-limit":"No limit","add-attributes":"Add attributes","no-attribute-yet":"No attribute yet.","add-btn":"Add an attribute"},"page-categories":{title:"Categories",help:"Manage material's categories and sub-categories.","action-add":"New category","prompt-add":"New category","category-name":"Category name",create:"Create category","prompt-modify":"Add a sub-category","confirm-delete":"Move this category in trash bin?","confirm-permanently-delete":"Do you really want to permanently delete this category?","confirm-restore":"Do you really want to restore this category?",saved:"Category saved.",deleted:"Category deleted."},"page-subcategories":{add:"Do you really want to delete this category?","prompt-add":"New sub-category of « {categoryName} »","sub-category-name":"Sub-category name",create:"Create sub-category","prompt-modify":"Modify sub-category","confirm-delete":"Move this sub in trash bin-category?","confirm-permanently-delete":"Do you really want to permanently delete this sub-category?","confirm-restore":"Do you really want to restore this sub-category?",saved:"Sub-category saved.",deleted:"Sub-category deleted."},"page-technicians":{title:"Technicians",help:"You can send an email to a technician by clicking on his/her adress.","action-add":"New technician",add:"New technician",edit:"Modify technician « {pageSubTitle} »","help-edit":"Only first name and last name are mandatory.","confirm-delete":"Move this technician in trash bin?","confirm-permanently-delete":"Do you really want to permanently delete this technician?","confirm-restore":"Do you really want to restore this technician?",saved:"Technician saved."},"page-parks":{title:"Material parks",help:"You can click on the number of items in the park to display the list.","action-add":"New materials park",add:"New materials park",edit:"Modify park « {pageSubTitle} »","help-edit":"Only the name of the park is mandatory.","confirm-delete":"Move this park in trash bin? This won't delete materials in this park.","confirm-permanently-delete":"Do you really want to permanently delete this park? WARNING: this will delete all materials of this park!!","confirm-restore":"Do you really want to restore this park?",saved:"Park saved.","total-items":"Totals"},"page-tags":{title:"Tags",help:"Non-modifiables tags are those used by the system.","no-item":"No tag yet.","no-item-in-trash":"No tag in trash bin.","action-add":"New tag","prompt-add":"New tag","tag-name":"Tag name",create:"Create tag",add:"New tag","prompt-modify":"Modify tag","confirm-delete":"Move this tag in trash bin?","confirm-permanently-delete":"Do you really want to permanently delete this tag?","confirm-restore":"Do you really want to restore this tag?",saved:"Tag saved.",deleted:"Tag deleted."}},ar={errors:{"api-unreachable":"Sorry, but Robert2 API is unreachable... Please check your access to network.",default:"Error {code}: {reason}",validation:"Please check form informations.","already-exists":"This record already exists.","show-details":"Show error details","details-title":"Details of error","details-intro1":"You can copy and paste the following to get help from the community.","details-intro2":"Please copy it as is, because it's written in markdown to help reading on","details-intro-forum":"the forum","details-intro3":"or in","details-intro-not-detailed":"To get more details about the error, you can modify the parameter `displayErrorDetails` to 'true' in file 'src/App/Config/settings.json'.","details-request":"API request:","details-message":"Error message","details-file":"File:","details-stacktrace":"Stack trace:"}},sr=Object(v["a"])(Object(v["a"])(Object(v["a"])({},er),tr),ar),ir={"hello-nick":"Bonjour {nick} !","your-profile":"Votre profil","your-settings":"Vos paramètres","logout-quit":"Quitter Robert","action-add":"Ajouter","action-edit":"Modifier","action-trash":"Corbeille","action-restore":"Restaurer","action-delete":"Supprimer","action-enable":"Activer","action-disable":"Désactiver","action-refresh":"Rafraîchir les données",yes:"Oui",no:"Non","help-loading":"Chargement...","please-confirm":"Veuillez confirmer...","yes-delete":"Oui, mettre à la corbeille","yes-permanently-delete":"Oui, supprimer définitivement","yes-restore":"Oui, restaurer",cancel:"Annuler",close:"Fermer","copy-to-clipboard":"Copier dans le presse-papier","copied-in-clipboard":"Copié dans le presse-papier !","please-choose":"Veuillez choisir...","add-item":"Ajouter un {item}","remove-item":"Enlever ce {item}","cancel-add-item":"Annuler l'ajout de {item}","item-not-found":"{item} introuvable. Peut-être a-t-il été supprimé ?",locked:"verrouillé",save:"Sauvegarder",add:"Ajouter",saving:"Sauvegarde...",saved:"{entity} sauvegardé.",actions:"Actions",informations:"Informations","connexion-infos":"Informations de connexion","personnal-infos":"Informations personnelles","minimal-infos":"Informations minimales","extra-infos":"Informations supplémentaires","billing-infos":"Informations de facturation",billing:"Facturation","special-attributes":"Caractéristiques spéciales",pseudo:"Pseudo","email-address-or-pseudo":"Adresse e-mail ou Pseudo",password:"Mot de passe","first-name":"Prénom","last-name":"Nom",name:"Nom",nickname:"Surnom",company:"Société","legal-name":"Raison sociale",contact:"Contact","contact-details":"Coordonnées","other-infos":"Autres informations",email:"E-mail",phone:"Téléphone",address:"Adresse",street:"Rue et N°","postal-code":"Code postal",city:"Ville",locality:"Ville",country:"Pays",group:"Groupe",admin:"Administrateur",member:"Membre",visitor:"Visiteur","opening-hours":"Horaires d'ouverture",notes:"Notes",description:"Description",ref:"Réf.",reference:"Référence",park:"Parc","rental-price":"Tarif location","replacement-price":"Prix de remplacement","rent-price":"Tarif loc.","repl-price":"Val. rempl.","serial-number":"N° de série",quantity:"Qté stock","quantity-out-of-order":"Qté en panne",discountable:"Remisable ?","hidden-on-bill":"Caché sur la facture ?","price-must-be-zero":"le tarif de location doit être égal à 0","all-parks":"Tous parcs confondus","all-categories":"Toutes catégories","all-sub-categories":"Toutes sous-catégories","open-trash-bin":"Afficher la corbeille","display-not-deleted-items":"Afficher les enregistrements non supprimés","event-details":"Détails de l'événement",title:"Titre","start-date":"Date de début","end-date":"Date de fin",location:"Lieu",duration:"Durée","duration-days":"Durée {duration} jours",confirmed:"Confirmé","not-confirmed":"Non confirmé","is-billable":"Est facturable ?","is-not-billable-help":"Mode « prêt » : pas de facturation.","is-billable-help":"Mode « location » : facturation possible.","event-not-billable":"Cet événement est défini comme « non facturable ».","enable-billable-event":"Activer la facturation pour cet événement",confirm:"Confirmer","set-back-on-hold":"Remettre en attente","set-event-confirmed":"Confirmer l'événement","set-back-event-pending":"Remettre l'événement en attente",print:"Imprimer","print-summary":"Imprimer ce récap",in:"À","open-in-openstreetmap":"Rechercher dans OpenStreetMap","on-date":"Le {date}","from-date-to-date":"du {from} au {to}",for:"Pour",with:"Avec","in-progress":"en cours","show-materials-details":"Afficher la liste détaillée du matériel","hide-materials-details":"Cacher la liste du matériel",bill:"Facture","no-bill-help":"Cet événement n'a aucune facture pour le moment.","missing-beneficiary":"Bénéficiaire manquant","not-billable-help":"Vous ne pouvez pas créer de facture pour un événement qui n'a pas encore de bénéficiaire.","click-edit-to-create-one":"Cliquez sur le bouton « Modifier » pour en ajouter un.","download-bill-help1":"Facture n° {number}, générée le {date}","download-bill-help2":"avec une remise de {discountRate} %","download-bill-help3":"pour un montant de {amount}","create-bill-help":"Vous pouvez créer une facture au nom du premier bénéficiaire de la liste, en utilisant une remise (taux ou montant) :",discount:"Remise","without-discount":"sans remise","wanted-rate":"Taux en %","wanted-amount":"Montant souhaité","create-bill":"Créer la facture","download-bill-pdf":"Télécharger au format PDF","regenerate-bill-help":"Vous pouvez re-générer la facture pour en changer la remise, ou si l'événement a été modifié.","click-here-to-regenerate":"Cliquez ici pour refaire une facture.",total:"Total","total-discountable":"Total remisable","items-count":["{count} article","{count} articles"],"stock-items-count":"{count} en stock","sub-total":"Sous-total","total-amount":"Montant total","total-amount-with-discount":"Total après remise","replacement-total":"Valeur de remplacement totale",day:"jour",days:"jours",ratio:"coef.","ratio-long":"Coefficient",tags:"Étiquettes","add-tags":"Ajouter des étiquettes","choose-tags-below":"Choisissez les étiquettes ci-dessous :","entity-name-tags":"Étiquettes de « {entityName} »","remove-all-tags":"Enlever tous les tags","remaining-count":"reste {count}",event:"Événement",user:"Utilisateur",beneficiary:"Bénéficiaire",material:"Matériel",category:"Catégorie","sub-category":"Sous-catégorie",categories:"Catégories",technician:"Technicien","this-feature-is-coming-soon":"Cette fonctionnalité est en cours de développement.",french:"Français",english:"English"},nr={"page-login":{welcome:"Bonjour ! Qui êtes vous ?",connexion:"Connexion","please-wait":"Authentification, merci de patienter...",bye:"À bientôt !",footer:"Robert2 est un logiciel libre. Vous pouvez le copier et le redistribuer librement, sauf pour une utilisation commerciale.","official-website":"Site web officiel","community-forum":"Forum de la communauté",error:{"bad-infos":"Les informations fournies sont incorrectes. Utilisez votre adresse e-mail ou votre pseudo, et votre mot de passe.","expired-session":"Votre session a expiré. Merci de vous reconnecter !","not-allowed":"Vous avez essayé d'accéder à une page dont l'accès vous est interdit. Merci de vous connecter avec un compte qui y a accès."}},"page-profile":{title:"Profil de l'utilisateur « {pageSubTitle} »",help:"Si vous modifiez votre email, votre pseudo ou votre mot de passe, ne les oubliez pas avant de vous déconnecter ;)","you-are-group":"Vous êtes : {group}.","edit-password":"Modifier votre mot de passe","password-confirmation":"Confirmation du mot passe","password-confirmation-must-match":"Le mot de passe et sa confirmation doivent être identiques.","password-modified":"Votre mot de passe a bien été modifié.",saved:"Votre profil a bien été sauvegardé."},"page-settings":{title:"Paramètres de {pageSubTitle}",help:"La « durée d'une session » est le temps imparti avant votre déconnexion automatique de l'application.","auth-token-validity-duration":"Durée max. d'une session",interface:"Interface",language:"Langue",hours:"heures",saved:"Paramètres sauvegardés."},"page-calendar":{title:"Calendrier",help:"Cliquez-glissez pour déplacer la frise. Utilisez la molette pour zoomer / dézoomer. Double-cliquez sur une colonne vide pour créer un événement avec la date de départ pré-remplie.","help-center-view-on-today":"Centrer le calendrier sur aujourd'hui","help-add-event":"Créer un nouvel événement","add-event":"Nouvel événement","confirm-delete":"Mettre cet événement à la corbeille ?","confirm-permanently-delete":"Voulez-vous vraiment supprimer définitivement cet événement ?","confirm-restore":"Voulez-vous vraiment restaurer cet événement ?","event-deleted":"L'événement a bien été supprimé.","event-saved":"L'événement a bien été sauvegardé.","loading-event":"Chargement de l'événement...","help-timeline-event-operations":"Cliquer pour sélectionner l'événement et le déplacer ou redimensionner. Double-cliquer pour ouvrir l'aperçu de l'événement.","center-on-today":"Centrer sur aujourd'hui","center-on":"Centrer sur le","this-event-is-past":"Cet événement est passé.","this-event-is-currently-running":"Cet événement se déroule en ce moment.","this-event-is-confirmed":"Cet événement est confirmé.","this-event-has-missing-materials":"Cet événement a du matériel manquant.","all-events":"Tous les événements","event-with-missing-material-only":"Événements en manque de matériel uniquement ?"},"page-events":{"help-edit":"","back-to-calendar":"Retour au calendrier",add:"Nouvel événement",edit:"Modifier l'événement « {pageSubTitle} »","edit-event":"Modifier l'événement","save-and-back-to-calendar":"Sauvegarder et retour au calendrier","save-and-continue":"Sauvegarder et continuer",step:"Étape","event-informations":"Informations","event-beneficiaries":"Bénéficiaires","event-technicians":"Techniciens","event-materials":"Matériel","event-summary":"Récapitulatif","event-confirmation":"Confirmation",saved:"Événement sauvegardé.","not-saved":"L'événement comporte des modifications non sauvegardées","display-only-selected-materials":"Afficher uniquement le matériel de l'événement ?","event-not-confirmed-help":"L'évenement n'est pas encore confirmé, il est susceptible de changer à tout moment.","event-confirmed-help":"L'événement est confirmé : Ses informations ne devraient plus changer.","event-missing-materials":"Matériel manquant","event-missing-materials-help":"Il s'agit du matériel manquant pour la période de l'événement, car il est utilisé dans un autre événement, le nombre voulu est trop important, ou quelques uns sont en panne. Ce matériel doit donc être ajouté au parc, ou bien loué auprès d'une autre société.","warning-no-material":"Attention, cet événement est vide, il ne contient aucun matériel pour le moment !","warning-no-beneficiary":"Attention, cet événement n'a aucun bénéficiaire !","missing-material-count":"Besoin de {quantity}, il en manque {missing} !","beneficiary-billing-help":"Seul le premier bénéficiaire de la liste apparaîtra sur la facture."},"page-users":{title:"Utilisateurs",help:"Vous pouvez envoyer un email à un utilisateur en cliquant sur son adresse.","help-edit":"Le groupe « Administrateur » donne tous les droits à l'utilisateur. Le groupe « Membre » permet à l'utilisateur d'utiliser la plupart des fonctions de Robert. Et le groupe « Visiteur » donne un accès limité à certaines données.","action-add":"Nouvel utilisateur",add:"Nouvel utilisateur",edit:"Modifier l'utilisateur « {pageSubTitle} »","confirm-delete":"Mettre cet utilisateur à la corbeille ?","confirm-permanently-delete":"Voulez-vous vraiment supprimer définitivement cet utilisateur ?","confirm-restore":"Voulez-vous vraiment restaurer cet utilisateur ?",saved:"Utilisateur sauvegardé.","profile-missing-or-deleted":"Profil manquant ou supprimé"},"page-beneficiaries":{title:"Bénéficiaires",help:"Vous pouvez envoyer un email à un bénéficiaire en cliquant sur son adresse.","action-add":"Nouveau bénéficiaire",add:"Nouveau bénéficiaire",edit:"Modifier le bénéficiaire « {pageSubTitle} »","beneficiary-type":"Type de bénéficiaire",person:"Personne physique (individu)",company:"Personne morale (entreprise)","help-edit":"Seuls le nom et le prénom de la personne sont obligatoires.","confirm-delete":"Mettre ce bénéficiaire à la corbeille ?","confirm-permanently-delete":"Voulez-vous vraiment supprimer définitivement ce bénéficiaire ?","confirm-restore":"Voulez-vous vraiment restaurer ce bénéficiaire ?",saved:"Bénéficiaire sauvegardé."},"page-companies":{title:"Sociétés",add:"Nouvelle société",edit:"Modifier la société « {pageSubTitle} »","edit-btn":"Modifier la société","create-new":"Ajouter une nouvelle société","help-edit":"La raison sociale (nom de la société) est obligatoire.","attached-persons":"Personnes associées à la société",saved:"Société sauvegardée."},"page-materials":{title:"Matériel",help:"Vous pouvez choisir un parc, une catégorie ou des étiquettes pour filtrer le matériel.","action-add":"Nouveau matériel",add:"Nouveau matériel",edit:"Modifier le matériel « {pageSubTitle} »","help-edit":"Trouvez un nom assez court, et utilisez plutôt la description pour détailler le matériel si besoin.","confirm-delete":"Mettre ce matériel à la corbeille ?","confirm-permanently-delete":"Voulez-vous vraiment supprimer définitivement ce matériel ?","confirm-restore":"Voulez-vous vraiment restaurer ce matériel ?",saved:"Matériel sauvegardé.","clear-filters":"Réinitialiser les filtres"},"page-attributes":{title:"Caractéristiques spéciales du matériel",help:"Ici vous pouvez consulter, et ajouter les champs qui permettent de décrire votre matériel selon vos propres critères.","go-back-to-material":"Retourner au matériel",name:"Nom de la caractéristique",type:"Type de donnée",unit:"Unité","max-length":"Taille max.","type-string":"Texte","type-integer":"Nombre entier","type-float":"Nombre décimal","type-boolean":"Booléen (Oui / Non)","no-limit":"Sans limite","add-attributes":"Ajouter des caractéristiques","no-attribute-yet":"Aucune caractéristique spéciale pour le moment.","add-btn":"Ajouter une caractéristique"},"page-categories":{title:"Catégories",help:"Gestion des catégories et sous-catégories de matériel.","action-add":"Nouvelle catégorie","prompt-add":"Nouvelle catégorie","category-name":"Nom de la catégorie",create:"Créer la catégorie","prompt-modify":"Modifier la catégorie","confirm-delete":"Mettre cette catégorie à la corbeille ?","confirm-permanently-delete":"Voulez-vous vraiment supprimer définitivement cette catégorie ?","confirm-restore":"Voulez-vous vraiment restaurer cette catégorie ?",saved:"Catégorie sauvegardée.",deleted:"Catégorie supprimée."},"page-subcategories":{add:"Ajouter une sous-catégorie","prompt-add":"Nouvelle sous-catégorie de « {categoryName} »","sub-category-name":"Nom de la sous-catégorie",create:"Créer la sous-catégorie","prompt-modify":"Modifier la sous-catégorie","confirm-delete":"Mettre cette sous-catégorie à la corbeille ?","confirm-permanently-delete":"Voulez-vous vraiment supprimer définitivement cette sous-catégorie ?","confirm-restore":"Voulez-vous vraiment restaurer cette sous-catégorie ?",saved:"Sous-catégorie sauvegardée.",deleted:"Sous-catégorie supprimée."},"page-technicians":{title:"Techniciens",help:"Vous pouvez envoyer un email à un technicien en cliquant sur son adresse.","action-add":"Nouveau technicien",add:"Nouveau technicien",edit:"Modifier le technicien « {pageSubTitle} »","help-edit":"Seuls le nom et le prénom de la personne sont obligatoires.","confirm-delete":"Mettre ce technicien à la corbeille ?","confirm-permanently-delete":"Voulez-vous vraiment supprimer définitivement ce technicien ?","confirm-restore":"Voulez-vous vraiment restaurer ce technicien ?",saved:"Technicien sauvegardé."},"page-parks":{title:"Parcs de matériel",help:"Vous pouvez cliquer sur le nombre d'articles que contient le parc pour en afficher la liste.","action-add":"Nouveau parc de matériel",add:"Nouveau parc de matériel",edit:"Modifier le parc « {pageSubTitle} »","help-edit":"Seul le nom du parc est obligatoire.","confirm-delete":"Mettre ce parc à la corbeille ? Cela ne supprimera pas le matériel qu'il contient.","confirm-permanently-delete":"Voulez-vous vraiment supprimer définitivement ce parc ? ATTENTION, cela supprimera tout le matériel contenu dans ce parc !!","confirm-restore":"Voulez-vous vraiment restaurer ce parc ?",saved:"Parc sauvegardé.","total-items":"Totaux"},"page-tags":{title:"Étiquettes",help:"Les étiquettes non modifiables sont celles utilisées par le système.","no-item":"Aucune étiquette.","no-item-in-trash":"Aucune étiquette dans la corbeille.","action-add":"Nouvelle étiquette","prompt-add":"Nouvelle étiquette","tag-name":"Nom de l'étiquette",create:"Créer l'étiquette",add:"Nouvelle étiquette","prompt-modify":"Modifier l'étiquette","confirm-delete":"Mettre cette étiquette à la corbeille ?","confirm-permanently-delete":"Voulez-vous vraiment supprimer définitivement cette étiquette ?","confirm-restore":"Voulez-vous vraiment restaurer cette étiquette ?",saved:"Étiquette sauvegardée.",deleted:"Étiquette supprimée."}},rr={errors:{"api-unreachable":"Désolé, mais l'API de Robert2 est inaccessible... Veuillez vérifier votre accès au réseau.",default:"Erreur {code} : {reason}",validation:"Veuillez vérifier les informations du formulaire.","already-exists":"Cet enregistrement existe déjà.","show-details":"Voir le détail de l'erreur","details-title":"Détails de l'erreur","details-intro1":"Vous pouvez copier ce qui suit, pour obtenir de l'aide de la part de la communauté.","details-intro2":"Merci de le copier tel quel, car c'est écrit en markdown pour faciliter la lecture sur","details-intro-forum":"le forum","details-intro3":"ou dans","details-intro-not-detailed":"Pour obtenir plus de détails sur l'erreur, vous pouvez modifier le paramètre `displayErrorDetails` à 'true' dans le fichier 'src/App/Config/settings.json'.","details-request":"Requête API :","details-message":"Message de l'erreur","details-file":"Fichier :","details-stacktrace":"Trace de la pile :"}},or=Object(v["a"])(Object(v["a"])(Object(v["a"])({},ir),nr),rr),lr={en:sr,fr:or},cr={count:"Enregistrements {from} à {to} sur {count}|{count} enregistrements|Un enregistrement",first:"Première",last:"Dernière",filter:"Filtre :",filterPlaceholder:"Rechercher un nom...",limit:"Enregistrements :",page:"Page :",noResults:"Aucun enregistrement trouvé.",filterBy:"Filtrer par {column}",loading:"Chargement...",defaultOption:"Sélection {column}",columns:"Col."},ur={count:"Showing {from} to {to} of {count} records|{count} records|One record",first:"First",last:"Last",filter:"Filter:",filterPlaceholder:"Search a name...",limit:"Records:",page:"Page:",noResults:"No matching records",filterBy:"Filter by {column}",loading:"Loading...",defaultOption:"Select {column}",columns:"Col."},dr={fr:cr,en:ur},mr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"main"},[e.user.groupId?a("MainHeader",{on:{toggleMenu:e.toggleSideNav}}):e._e(),a("div",{staticClass:"main__body"},[e.user.groupId?a("SideNav",{attrs:{isOpen:e.isOpenedSideNav}}):e._e(),a("router-view")],1)],1)])},pr=[],fr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"MainHeader"},[a("div",{staticClass:"MainHeader__logo"},[a("Logo",{attrs:{minimalist:""}})],1),a("div",{staticClass:"MainHeader__menu-toggle",on:{click:e.toggleMenu}},[a("i",{staticClass:"fas fa-bars fa-2x"})]),a("div",{staticClass:"MainHeader__title"},[e._v(" "+e._s(e.$t(e.pageTitle,{pageSubTitle:e.pageSubTitle}))+" ")]),a("TopMenu",{staticClass:"MainHeader__menu"})],1)},hr=[],_r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.closeDropdown,expression:"closeDropdown"}],staticClass:"TopMenu"},[a("div",{staticClass:"TopMenu__dropdown-btn",on:{click:e.toggleDropdown}},[a("span",{staticClass:"TopMenu__welcome"},[e._v(e._s(e.$t("hello-nick",{nick:e.nickname})))]),a("i",{directives:[{name:"show",rawName:"v-show",value:!e.isDropdownMenuOpen,expression:"!isDropdownMenuOpen"}],staticClass:"fas fa-chevron-down"}),a("i",{directives:[{name:"show",rawName:"v-show",value:e.isDropdownMenuOpen,expression:"isDropdownMenuOpen"}],staticClass:"fas fa-chevron-up"})]),a("div",{staticClass:"TopMenu__dropdown",class:{"TopMenu__dropdown--open":e.isDropdownMenuOpen}},[a("div",{staticClass:"TopMenu__dropdown__nickname"},[e._v(e._s(e.nickname))]),a("router-link",{staticClass:"TopMenu__dropdown__item",attrs:{to:"/profile",tag:"div"}},[a("i",{staticClass:"fas fa-user-alt"}),e._v(" "+e._s(e.$t("your-profile"))+" ")]),a("router-link",{staticClass:"TopMenu__dropdown__item",attrs:{to:"/settings",tag:"div"}},[a("i",{staticClass:"fas fa-cogs"}),e._v(" "+e._s(e.$t("your-settings"))+" ")]),a("div",{staticClass:"TopMenu__dropdown__item",on:{click:e.logout}},[a("i",{staticClass:"fas fa-power-off"}),e._v(" "+e._s(e.$t("logout-quit"))+" ")])],1)])},vr=[],gr=a("e67d"),br=a.n(gr),yr={name:"TopMenu",directives:{ClickOutside:br.a},data:function(){return{isDropdownMenuOpen:!1}},computed:{nickname:function(){return S.state.user.pseudo},isAdmin:function(){return"admin"===S.state.user.groupId},isMember:function(){return"member"===S.state.user.groupId}},watch:{$route:function(){this.closeDropdown()}},methods:{toggleDropdown:function(){this.isDropdownMenuOpen=!this.isDropdownMenuOpen},closeDropdown:function(){this.isDropdownMenuOpen=!1},logout:function(){Kn.logout({mode:"bye"})}}},Cr=yr,$r=(a("3678"),Object(H["a"])(Cr,_r,vr,!1,null,null,null)),wr=$r.exports,kr={name:"MainHeader",components:{TopMenu:wr,Logo:U},computed:{pageTitle:function(){return S.state.pageTitle},pageSubTitle:function(){return S.state.pageSubTitle}},watch:{pageTitle:function(){this.$emit("toggleMenu",!1)}},methods:{toggleMenu:function(){this.$emit("toggleMenu","toggle")}}},Er=kr,Tr=(a("33ac"),Object(H["a"])(Er,fr,hr,!1,null,null,null)),jr=Tr.exports,Dr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"SideNav",class:{"SideNav--opened":e.isOpen}},[a("div",{staticClass:"SideNav__logo"},[a("Logo",{attrs:{minimalist:""}})],1),a("SideMenu",{staticClass:"SideNav__menu"}),a("div",{staticClass:"SideNav__footer"},[e._v(" © 2017-"+e._s(e.year)),a("br"),e._v(" v. "+e._s(e.apiVersion)+" ")])],1)},Mr=[],Fr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"SideMenu"},[a("router-link",{staticClass:"SideMenu__item",attrs:{to:"/",tag:"li",exact:""}},[a("i",{staticClass:"fas fa-calendar-alt"}),a("br"),a("span",{staticClass:"SideMenu__item__title"},[e._v(e._s(e.$t("page-calendar.title")))])]),e.isAdmin||e.isMember?a("router-link",{staticClass:"SideMenu__item",attrs:{to:"/materials",tag:"li"}},[a("i",{staticClass:"fas fa-box"}),a("br"),a("span",{staticClass:"SideMenu__item__title"},[e._v(e._s(e.$t("page-materials.title")))])]):e._e(),e.isAdmin||e.isMember?a("router-link",{staticClass:"SideMenu__item",attrs:{to:"/technicians",tag:"li"}},[a("i",{staticClass:"fas fa-people-carry"}),a("br"),a("span",{staticClass:"SideMenu__item__title"},[e._v(e._s(e.$t("page-technicians.title")))])]):e._e(),e.isAdmin||e.isMember?a("router-link",{staticClass:"SideMenu__item",attrs:{to:"/beneficiaries",tag:"li"}},[a("i",{staticClass:"fas fa-address-book"}),a("br"),a("span",{staticClass:"SideMenu__item__title"},[e._v(e._s(e.$t("page-beneficiaries.title")))])]):e._e(),e.isAdmin?a("router-link",{staticClass:"SideMenu__item",attrs:{to:"/categories",tag:"li"}},[a("i",{staticClass:"fas fa-sitemap"}),a("br"),a("span",{staticClass:"SideMenu__item__title"},[e._v(e._s(e.$t("page-categories.title")))])]):e._e(),e.isAdmin?a("router-link",{staticClass:"SideMenu__item",attrs:{to:"/tags",tag:"li"}},[a("i",{staticClass:"fas fa-tags"}),a("br"),a("span",{staticClass:"SideMenu__item__title"},[e._v(e._s(e.$t("page-tags.title")))])]):e._e(),e.isAdmin?a("router-link",{staticClass:"SideMenu__item",attrs:{to:"/parks",tag:"li"}},[a("i",{staticClass:"fas fa-industry"}),a("br"),a("span",{staticClass:"SideMenu__item__title"},[e._v(e._s(e.$t("page-parks.title")))])]):e._e(),e.isAdmin?a("router-link",{staticClass:"SideMenu__item",attrs:{to:"/users",tag:"li"}},[a("i",{staticClass:"fas fa-users-cog"}),a("br"),a("span",{staticClass:"SideMenu__item__title"},[e._v(e._s(e.$t("page-users.title")))])]):e._e()],1)},Sr=[],xr={name:"SideMenu",computed:{isAdmin:function(){return"admin"===S.state.user.groupId},isMember:function(){return"member"===S.state.user.groupId}}},Lr=xr,Or=(a("268d"),Object(H["a"])(Lr,Fr,Sr,!1,null,null,null)),qr=Or.exports,Ar={name:"SideNav",props:{isOpen:Boolean},components:{SideMenu:qr,Logo:U},data:function(){var e=(new Date).getFullYear(),t=_.api.version;return{year:e,apiVersion:t}}},Nr=Ar,Pr=(a("ca61"),Object(H["a"])(Nr,Dr,Mr,!1,null,null,null)),Ir=Pr.exports,Br={name:"App",components:{MainHeader:jr,SideNav:Ir},data:function(){return{user:S.state.user,isOpenedSideNav:!1}},watch:{$route:function(){s["a"].prototype.$modal.hide("defaultModal")}},methods:{toggleSideNav:function(e){this.isOpenedSideNav="toggle"!==e?e:!this.isOpenedSideNav}}},Rr=Br,Hr=(a("5c0b"),Object(H["a"])(Rr,mr,pr,!1,null,null,null)),zr=Hr.exports;a("7ddb");a("15f5"),s["a"].config.productionTip=!1,s["a"].prototype.$http=Zn,s["a"].use(l.a,{dialog:!0,dynamic:!0,dynamicDefaults:{}}),c["a"].options.defaultContainer="#app",c["a"].options.disposeTimeout=1e3,c["a"].options.defaultDelay=100,s["a"].directive("tooltip",c["a"]),s["a"].use(r["a"].plugin,S),Object.keys(lr).forEach((function(e){s["a"].i18n.add(e,lr[e])}));var Ur=_.defaultLang;s["a"].i18n.set(Ur);var Vr=localStorage.getItem("userLocale");Vr&&s["a"].i18n.localeExists(Vr)&&(s["a"].i18n.set(Vr),Ur=Vr),s["a"].i18n.fallback(Ur),n.a.locale(Ur);var Qr={columnsClasses:{actions:"VueTables__actions"},sortIcon:{base:"fas",up:"fa-sort-up",down:"fa-sort-down",is:"fa-sort"},texts:dr[Ur],requestKeys:{query:"search"},perPage:_.defaultPaginationLimit,perPageValues:[_.defaultPaginationLimit],responseAdapter:function(e){if(!e)return{data:[],count:0};var t=e.data,a=t.data,s=t.pagination;return{data:a,count:s?s.total:0}}};s["a"].use(u["ClientTable"],Qr),s["a"].use(u["ServerTable"],Qr,!0),Kn.checkAuth(),new s["a"]({el:"#app",store:S,router:Jn,components:{App:zr},template:"<App/>"})},"56e7":function(e,t,a){"use strict";var s=a("4d37"),i=a.n(s);i.a},"5af6":function(e,t,a){"use strict";var s=a("1e1d"),i=a.n(s);i.a},"5afa":function(e,t,a){"use strict";var s=a("ce8b"),i=a.n(s);i.a},"5b9a":function(e,t,a){"use strict";var s=a("c194"),i=a.n(s);i.a},"5bf9":function(e,t,a){},"5c0b":function(e,t,a){"use strict";var s=a("9c0c"),i=a.n(s);i.a},"5f98":function(e,t,a){"use strict";var s=a("60f9"),i=a.n(s);i.a},"5ffb":function(e,t,a){"use strict";var s=a("7db3"),i=a.n(s);i.a},"60f9":function(e,t,a){},6348:function(e,t,a){},"64fa":function(e,t,a){},6564:function(e,t,a){"use strict";var s=a("09db"),i=a.n(s);i.a},"6aae":function(e,t,a){"use strict";var s=a("53c4"),i=a.n(s);i.a},"6c54":function(e,t,a){},"6e11":function(e,t,a){"use strict";var s=a("1afd"),i=a.n(s);i.a},"6e2a":function(e,t,a){},"6ead":function(e,t,a){},"704a":function(e,t,a){"use strict";var s=a("0e51"),i=a.n(s);i.a},"756f":function(e,t,a){},7794:function(e,t,a){"use strict";var s=a("6348"),i=a.n(s);i.a},"79bd":function(e,t,a){},"7b33":function(e,t,a){},"7db3":function(e,t,a){},"7fa5":function(e,t,a){},"8633a":function(e,t,a){"use strict";var s=a("be38"),i=a.n(s);i.a},"86c6":function(e,t,a){"use strict";var s=a("7b33"),i=a.n(s);i.a},"88fc":function(e,t,a){},"8a72":function(e,t,a){},"8d7f":function(e,t,a){"use strict";var s=a("55e1"),i=a.n(s);i.a},"8e75":function(e,t,a){},9041:function(e,t,a){},9264:function(e,t,a){},9598:function(e,t,a){},"95a4":function(e,t,a){"use strict";var s=a("5321"),i=a.n(s);i.a},"9b72":function(e,t,a){"use strict";var s=a("b134"),i=a.n(s);i.a},"9c0c":function(e,t,a){},a5de:function(e,t,a){"use strict";var s=a("8e75"),i=a.n(s);i.a},a993:function(e,t,a){"use strict";var s=a("9598"),i=a.n(s);i.a},ae27:function(e,t,a){"use strict";var s=a("2475"),i=a.n(s);i.a},b0b8:function(e,t,a){"use strict";var s=a("42f0"),i=a.n(s);i.a},b0bc:function(e,t,a){"use strict";var s=a("fd39"),i=a.n(s);i.a},b134:function(e,t,a){},b574:function(e,t,a){"use strict";var s=a("79bd"),i=a.n(s);i.a},be38:function(e,t,a){},bf6b:function(e,t,a){e.exports=a.p+"img/logo-R.svg"},c194:function(e,t,a){},c81b:function(e,t,a){var s={"./af":"42ea","./af.js":"42ea","./ar":"936a","./ar-dz":"31b5","./ar-dz.js":"31b5","./ar-kw":"78b2","./ar-kw.js":"78b2","./ar-ly":"4740","./ar-ly.js":"4740","./ar-ma":"547c","./ar-ma.js":"547c","./ar-sa":"acc4","./ar-sa.js":"acc4","./ar-tn":"b95c","./ar-tn.js":"b95c","./ar.js":"936a","./az":"5496","./az.js":"5496","./be":"b032","./be.js":"b032","./bg":"fe1a","./bg.js":"fe1a","./bm":"4f01","./bm.js":"4f01","./bn":"a20e","./bn.js":"a20e","./bo":"496d","./bo.js":"496d","./br":"dc78","./br.js":"dc78","./bs":"ae29","./bs.js":"ae29","./ca":"72d7","./ca.js":"72d7","./cs":"0077","./cs.js":"0077","./cv":"de9e","./cv.js":"de9e","./cy":"4878","./cy.js":"4878","./da":"e647","./da.js":"e647","./de":"7c31","./de-at":"c1dd","./de-at.js":"c1dd","./de-ch":"4471","./de-ch.js":"4471","./de.js":"7c31","./dv":"414e","./dv.js":"414e","./el":"731b","./el.js":"731b","./en-au":"ee72","./en-au.js":"ee72","./en-ca":"ba85","./en-ca.js":"ba85","./en-gb":"6623","./en-gb.js":"6623","./en-ie":"e406","./en-ie.js":"e406","./en-il":"5720","./en-il.js":"5720","./en-in":"98a6","./en-in.js":"98a6","./en-nz":"15a9","./en-nz.js":"15a9","./en-sg":"38a9","./en-sg.js":"38a9","./eo":"9559","./eo.js":"9559","./es":"f4d4","./es-do":"5676","./es-do.js":"5676","./es-us":"742e","./es-us.js":"742e","./es.js":"f4d4","./et":"9411","./et.js":"9411","./eu":"1f30","./eu.js":"1f30","./fa":"c6d0","./fa.js":"c6d0","./fi":"3d3f","./fi.js":"3d3f","./fil":"1881","./fil.js":"1881","./fo":"5ba8","./fo.js":"5ba8","./fr":"efc6","./fr-ca":"75e1","./fr-ca.js":"75e1","./fr-ch":"bfb8","./fr-ch.js":"bfb8","./fr.js":"efc6","./fy":"add5","./fy.js":"add5","./ga":"a844","./ga.js":"a844","./gd":"8c93","./gd.js":"8c93","./gl":"e8d4","./gl.js":"e8d4","./gom-deva":"8ca3","./gom-deva.js":"8ca3","./gom-latn":"b546","./gom-latn.js":"b546","./gu":"ba83","./gu.js":"ba83","./he":"89d2","./he.js":"89d2","./hi":"adf9","./hi.js":"adf9","./hr":"fc44","./hr.js":"fc44","./hu":"4b0a","./hu.js":"4b0a","./hy-am":"e2ed","./hy-am.js":"e2ed","./id":"b59e","./id.js":"b59e","./is":"f26b","./is.js":"f26b","./it":"c575","./it-ch":"9148","./it-ch.js":"9148","./it.js":"c575","./ja":"d6de","./ja.js":"d6de","./jv":"e2e3","./jv.js":"e2e3","./ka":"6392","./ka.js":"6392","./kk":"3cc5","./kk.js":"3cc5","./km":"838a","./km.js":"838a","./kn":"2503","./kn.js":"2503","./ko":"46ab","./ko.js":"46ab","./ku":"ab0c","./ku.js":"ab0c","./ky":"1f10","./ky.js":"1f10","./lb":"26a1","./lb.js":"26a1","./lo":"9845","./lo.js":"9845","./lt":"b96b","./lt.js":"b96b","./lv":"8ef3","./lv.js":"8ef3","./me":"1ba8","./me.js":"1ba8","./mi":"5e17","./mi.js":"5e17","./mk":"e6af","./mk.js":"e6af","./ml":"2c56","./ml.js":"2c56","./mn":"5c85","./mn.js":"5c85","./mr":"b628","./mr.js":"b628","./ms":"8b41","./ms-my":"3526","./ms-my.js":"3526","./ms.js":"8b41","./mt":"760d","./mt.js":"760d","./my":"3a79","./my.js":"3a79","./nb":"1855","./nb.js":"1855","./ne":"1810","./ne.js":"1810","./nl":"dea6","./nl-be":"3608","./nl-be.js":"3608","./nl.js":"dea6","./nn":"5184","./nn.js":"5184","./oc-lnc":"6b56","./oc-lnc.js":"6b56","./pa-in":"53c1","./pa-in.js":"53c1","./pl":"5249","./pl.js":"5249","./pt":"5a66","./pt-br":"37a9","./pt-br.js":"37a9","./pt.js":"5a66","./ro":"b83f","./ro.js":"b83f","./ru":"aabd","./ru.js":"aabd","./sd":"cba2","./sd.js":"cba2","./se":"b405","./se.js":"b405","./si":"d309","./si.js":"d309","./sk":"b3e0","./sk.js":"b3e0","./sl":"8633","./sl.js":"8633","./sq":"c623","./sq.js":"c623","./sr":"2b0e","./sr-cyrl":"c1f1","./sr-cyrl.js":"c1f1","./sr.js":"2b0e","./ss":"e03b","./ss.js":"e03b","./sv":"0fa6","./sv.js":"0fa6","./sw":"e1d36","./sw.js":"e1d36","./ta":"353d","./ta.js":"353d","./te":"559d","./te.js":"559d","./tet":"8733","./tet.js":"8733","./tg":"ef07","./tg.js":"ef07","./th":"4a1f","./th.js":"4a1f","./tk":"9b58","./tk.js":"9b58","./tl-ph":"d894","./tl-ph.js":"d894","./tlh":"eb2d","./tlh.js":"eb2d","./tr":"ccb8","./tr.js":"ccb8","./tzl":"0661","./tzl.js":"0661","./tzm":"66eb","./tzm-latn":"9915","./tzm-latn.js":"9915","./tzm.js":"66eb","./ug-cn":"fb8f","./ug-cn.js":"fb8f","./uk":"8ee1","./uk.js":"8ee1","./ur":"1f88","./ur.js":"1f88","./uz":"5a67","./uz-latn":"c10a","./uz-latn.js":"c10a","./uz.js":"5a67","./vi":"19df","./vi.js":"19df","./x-pseudo":"9424","./x-pseudo.js":"9424","./yo":"1f31","./yo.js":"1f31","./zh-cn":"0998","./zh-cn.js":"0998","./zh-hk":"2c04","./zh-hk.js":"2c04","./zh-mo":"b13a","./zh-mo.js":"b13a","./zh-tw":"c90c","./zh-tw.js":"c90c"};function i(e){var t=n(e);return a(t)}function n(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}i.keys=function(){return Object.keys(s)},i.resolve=n,e.exports=i,i.id="c81b"},ca61:function(e,t,a){"use strict";var s=a("cd50"),i=a.n(s);i.a},cb24:function(e,t,a){"use strict";var s=a("43fc"),i=a.n(s);i.a},cd50:function(e,t,a){},cd79:function(e,t,a){"use strict";var s=a("d1b1"),i=a.n(s);i.a},ce8b:function(e,t,a){},d0bc:function(e,t,a){"use strict";var s=a("7fa5"),i=a.n(s);i.a},d1b1:function(e,t,a){},d928:function(e,t,a){},dbf0:function(e,t,a){},de23:function(e,t,a){},e517:function(e,t,a){},ebe1:function(e,t,a){},ef5b:function(e,t,a){"use strict";var s=a("1eb7"),i=a.n(s);i.a},f0f3:function(e,t,a){},f59e:function(e,t,a){"use strict";var s=a("3010"),i=a.n(s);i.a},f62a:function(e,t,a){"use strict";var s=a("64fa"),i=a.n(s);i.a},f8c6:function(e,t,a){"use strict";var s=a("d928"),i=a.n(s);i.a},fbc1:function(e,t,a){},fd39:function(e,t,a){}});